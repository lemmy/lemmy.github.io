<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>l e m m s t e r . d e - Markus A. Kuppe</title><link href="http://www.lemmster.de/" rel="alternate"></link><link href="http://www.lemmster.de/feeds/markus-a-kuppe.atom.xml" rel="self"></link><id>http://www.lemmster.de/</id><updated>2019-05-08T09:43:02+02:00</updated><entry><title>Review of "Modeling Adversaries with TLA+"</title><link href="http://www.lemmster.de/tla-liveness-review.html" rel="alternate"></link><published>2019-05-08T09:43:02+02:00</published><updated>2019-05-08T09:43:02+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2019-05-08:/tla-liveness-review.html</id><summary type="html">&lt;p&gt;Hillel Wayne recently published a blog post titled "&lt;a href="https://www.hillelwayne.com/post/adversaries/"&gt;Modeling Adversaries with TLA+&lt;/a&gt;". The post does a &lt;a href="https://twitter.com/lemmster/status/1125423627904544768"&gt;good job&lt;/a&gt; showing how adversaries and environmental effects can be modeled in TLA&lt;sup&gt;+&lt;/sup&gt;. The post is also subtly incorrect when it comes to two of the liveness properties. In other words, "Modeling Adversaries with …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Hillel Wayne recently published a blog post titled "&lt;a href="https://www.hillelwayne.com/post/adversaries/"&gt;Modeling Adversaries with TLA+&lt;/a&gt;". The post does a &lt;a href="https://twitter.com/lemmster/status/1125423627904544768"&gt;good job&lt;/a&gt; showing how adversaries and environmental effects can be modeled in TLA&lt;sup&gt;+&lt;/sup&gt;. The post is also subtly incorrect when it comes to two of the liveness properties. In other words, "Modeling Adversaries with TLA+" not only shows how to model adversaries but also comes with a spec to discuss the intricacies of temporal logic. :-)&lt;/p&gt;
&lt;p&gt;Before we get started, let me make clear that the spec indeed satisfies all of the properties described in prose. The error is that some of the specified properties do not match their description but are instead trivially true. This is why Lamport - in e.g. the &lt;a href="https://lamport.azurewebsites.net/video/video5.html"&gt;TLA&lt;sup&gt;+&lt;/sup&gt; video lecture #5&lt;/a&gt; - cautions us to "Always be suspicious of success". Reasoning about liveness is &lt;a href="https://pron.github.io/posts/tlaplus_part3#a-bit-of-historical-background"&gt;delicate business&lt;/a&gt; and easy to get wrong.&lt;/p&gt;
&lt;p&gt;To quickly recap, the spec models a system that converges to a set of goal states (&lt;code&gt;x \in Goal&lt;/code&gt;) and an environment &lt;code&gt;World&lt;/code&gt; that perturbs the system by knocking it out of the goal states. Below is a slightly simplified excerpt of the original spec:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;VARIABLES&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;

&lt;span class="n"&gt;TotalInterval&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;
&lt;span class="n"&gt;Goal&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;

&lt;span class="n"&gt;TypeInvariant&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;TotalInterval&lt;/span&gt;

&lt;span class="n"&gt;Init&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;TotalInterval&lt;/span&gt;

&lt;span class="n"&gt;Machine&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="k k-Conditional"&gt;IF&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="k k-Conditional"&gt;THEN&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="s"&gt;&amp;#39; = x + 1 ELSE x&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="n"&gt;World&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;TotalInterval&lt;/span&gt;

&lt;span class="n"&gt;Next&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Machine&lt;/span&gt; &lt;span class="o"&gt;\/&lt;/span&gt; &lt;span class="n"&gt;World&lt;/span&gt;

&lt;span class="n"&gt;Spec&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Init&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="p"&gt;[][&lt;/span&gt;&lt;span class="n"&gt;Next&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="n"&gt;_x&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;WF_x&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Machine&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Several invariants and liveness properties are discussed that are satisfied by &lt;code&gt;Spec&lt;/code&gt;. Two properties however are incorrect; &lt;code&gt;FiniteWorldStable&lt;/code&gt; and &lt;code&gt;RareWorldResilient&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;FiniteWorldStable&lt;/h2&gt;
&lt;p&gt;The comment for the &lt;code&gt;FiniteWorldStable&lt;/code&gt; property says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[...] If the world is only kicking things out of alignment a finite number of times, say one million, then it should still be stable. My argument is that after the millionth kick, we're now somewhere in TotalInterval and the spec is equivalent to one without the World. We can represent “finite World actions” by saying “it's not always eventually the case that World happens”, which we'd write in TLA+ as &lt;code&gt;~[]&amp;lt;&amp;gt;&amp;lt;&amp;lt;World&amp;gt;&amp;gt;_x&lt;/code&gt;. Here the &amp;lt;&amp;lt;&amp;gt;&amp;gt; means “an action that changes x”, not sequence.&lt;/p&gt;
&lt;p&gt;While Stable still doesn't hold, FiniteWorldStable does.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is translated into the following TLA&lt;sup&gt;+&lt;/sup&gt; property:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Safe&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;Goal&lt;/span&gt;
&lt;span class="n"&gt;Stable&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="n"&gt;Safe&lt;/span&gt;

&lt;span class="n"&gt;FiniteWorldStable&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="ni"&gt;&amp;lt;&amp;gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;World&lt;/span&gt;&lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;_x&lt;/span&gt; &lt;span class="ni"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Stable&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The reasoning in the comment is correct. Checking &lt;code&gt;FiniteWorldStable&lt;/code&gt; with TLC confirms that the property holds. Being suspicious of success though, let us alter &lt;code&gt;FiniteWorldStable&lt;/code&gt; to &lt;code&gt;~[]&amp;lt;&amp;gt;&amp;lt;&amp;lt;World&amp;gt;&amp;gt;_x =&amp;gt; ~&amp;lt;&amp;gt;[](x \in Goal)&lt;/code&gt;; we negated the &lt;a href="https://en.wikipedia.org/wiki/Truth_table#Logical_implication"&gt;implication's&lt;/a&gt; consequent &lt;code&gt;Stable&lt;/code&gt;. Unfortunately, this also holds! Even substituting the consequent with &lt;code&gt;23=42 /\ 23#42&lt;/code&gt; holds. The reason is that &lt;code&gt;Spec =&amp;gt; FiniteWorldStable&lt;/code&gt; is &lt;a href="https://en.wikipedia.org/wiki/Vacuous_truth#Scope_of_the_concept"&gt;vacuously true&lt;/a&gt;. We will discuss why it is vacuously true later. First we will shift our attention to &lt;code&gt;RareWorldResilient&lt;/code&gt;:&lt;/p&gt;
&lt;h2&gt;RareWorldResilient&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;[...] to get resilience we don't need to require World to only happen finite times. Instead, we only need to guarantee it happens finite times while we're out of equilibrium. If eventually the world only kicks x out of Goal when it's already in Goal, then we're giving our machine enough time to return x to Goal and we have resilience.&lt;/p&gt;
&lt;p&gt;Another way of looking at it: if World happens rarely enough, say one-tenth as often as Machine, then we'll return to Goal before the next World action pushes us out again.&lt;/p&gt;
&lt;p&gt;This property holds.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is translated into &lt;code&gt;RareWorldResilient&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Resilient&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="ni"&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Safe&lt;/span&gt;
&lt;span class="n"&gt;RareWorldResilient&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;[][&lt;/span&gt;&lt;span class="n"&gt;World&lt;/span&gt; &lt;span class="ni"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Safe&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="n"&gt;_x&lt;/span&gt; &lt;span class="ni"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Resilient&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As with &lt;code&gt;FiniteWorldStable&lt;/code&gt; above, the prose is convincing and TLC once again confirms that &lt;code&gt;RareWorldResilient&lt;/code&gt; holds. But as we have now learned, implication can be tricky. Let us try and replace the consequent of the inner implication: &lt;code&gt;&amp;lt;&amp;gt;[][World =&amp;gt; 23 # 42]_x =&amp;gt; Resilient&lt;/code&gt;. Checking the modified property with TLC should make us suspicious.&lt;/p&gt;
&lt;h2&gt;What is the problem?&lt;/h2&gt;
&lt;p&gt;At this point we will zoom out and discuss the underlying problem. For that we will first need Lamport's (&lt;a href="https://lamport.azurewebsites.net/pubs/lamport-actions.pdf"&gt;see "The Temporal Logic of Actions" (section 4.1)&lt;/a&gt;) definition of what an &lt;em&gt;action-step&lt;/em&gt; is. Let &lt;code&gt;s,t&lt;/code&gt; be a pair of states (a state &lt;code&gt;s&lt;/code&gt; and its successor state &lt;code&gt;t&lt;/code&gt; such as &lt;code&gt;x=8,x=7&lt;/code&gt;). The pair &lt;code&gt;s,t&lt;/code&gt; is a &lt;code&gt;World&lt;/code&gt; step iff &lt;code&gt;s[[World]]t&lt;/code&gt; equals true. We obtain &lt;code&gt;s[[World]]t&lt;/code&gt; by replacing each unprimed variable &lt;code&gt;x&lt;/code&gt; in &lt;code&gt;World&lt;/code&gt; with the value of &lt;code&gt;x&lt;/code&gt; in state &lt;code&gt;s&lt;/code&gt; and each primed occurrence of the variable &lt;code&gt;x&lt;/code&gt; with the value of &lt;code&gt;x&lt;/code&gt; in the successor state &lt;code&gt;t&lt;/code&gt;. For example, the pair &lt;code&gt;x=8,x=7&lt;/code&gt; is a &lt;code&gt;World&lt;/code&gt; step because &lt;code&gt;7 \in TotalInterval&lt;/code&gt; equals true. However, the same argument applies to &lt;code&gt;s[[Machine]]t&lt;/code&gt;  because &lt;code&gt;7 = 8 - 1&lt;/code&gt;. Thus, the pair &lt;code&gt;x=8,x=7&lt;/code&gt; is both a &lt;code&gt;World&lt;/code&gt; and a &lt;code&gt;Machine&lt;/code&gt; step. The pair &lt;code&gt;x=8,x=7&lt;/code&gt; is not the only pair which is a &lt;code&gt;World&lt;/code&gt; and &lt;code&gt;Machine&lt;/code&gt; step. Due to the definitions of the &lt;code&gt;World&lt;/code&gt; and &lt;code&gt;Machine&lt;/code&gt; actions, the spec implies that any &lt;code&gt;Machine&lt;/code&gt; step is also a &lt;code&gt;World&lt;/code&gt; step (but not vice versa)! The only behaviors satisfying the spec and the property &lt;code&gt;~[]&amp;lt;&amp;gt;&amp;lt;&amp;lt;World&amp;gt;&amp;gt;_x&lt;/code&gt; are ones with a (finite) prefix of &lt;code&gt;World&lt;/code&gt; steps followed by infinite stuttering. The spec's &lt;em&gt;fairness&lt;/em&gt; conjunct &lt;code&gt;WF_x(Machine)&lt;/code&gt; however, asserts that there are infinitely many (non-stuttering) &lt;code&gt;Machine&lt;/code&gt; steps. Thus &lt;code&gt;~[]&amp;lt;&amp;gt;&amp;lt;&amp;lt;World&amp;gt;&amp;gt;_x&lt;/code&gt; never holds and &lt;code&gt;Spec =&amp;gt; FiniteWorldStable&lt;/code&gt; is vacuously true.&lt;/p&gt;
&lt;p&gt;To approach this from a different angle, we will substitute for the identifier &lt;code&gt;World&lt;/code&gt; its definition &lt;code&gt;x' \in TotalInterval&lt;/code&gt; in &lt;code&gt;FiniteWorldStable&lt;/code&gt; to obtain &lt;code&gt;~[]&amp;lt;&amp;gt;&amp;lt;&amp;lt;x' \in TotalInterval&amp;gt;&amp;gt;_x =&amp;gt; Stable&lt;/code&gt;. This immediately looks funny. But can we verify it too? We can use TLC to verify that &lt;code&gt;[][x' \in TotalInterval]_x&lt;/code&gt; (always) holds for all behaviors of spec (the type invariant &lt;code&gt;TypeInvariant&lt;/code&gt; confirms it too) and therefore &lt;code&gt;~[]&amp;lt;&amp;gt;&amp;lt;&amp;lt;x' \in TotalInterval&amp;gt;&amp;gt;_x&lt;/code&gt; has to be always false. To repeat, all steps of all behaviors satisfying &lt;code&gt;Spec&lt;/code&gt; are always &lt;code&gt;World&lt;/code&gt; steps regardless of whether a step "occurred" by taking a &lt;code&gt;Machine&lt;/code&gt; or &lt;code&gt;World&lt;/code&gt; &lt;em&gt;action&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;The property &lt;code&gt;RareWorldResilient&lt;/code&gt; suffers from the same flaw. By replacing &lt;code&gt;World&lt;/code&gt; with its definition we obtain &lt;code&gt;&amp;lt;&amp;gt;[](x' \in TotalInterval =&amp;gt; Safe]_x =&amp;gt; []&amp;lt;&amp;gt;Safe&lt;/code&gt;. By what we discussed in the previous paragraph, &lt;code&gt;RareWorldResilient&lt;/code&gt; thus equals &lt;code&gt;&amp;lt;&amp;gt;[][TRUE =&amp;gt; Safe]_x =&amp;gt; []&amp;lt;&amp;gt;Safe&lt;/code&gt; which can be reduced to &lt;code&gt;&amp;lt;&amp;gt;[][Safe]_x =&amp;gt; []&amp;lt;&amp;gt;Safe&lt;/code&gt;. The formula &lt;code&gt;&amp;lt;&amp;gt;[]P =&amp;gt; []&amp;lt;&amp;gt;P&lt;/code&gt; is a tautology in temporal logic. Semantically, if &lt;code&gt;Safe&lt;/code&gt; is eventually always true - in any behavior of &lt;code&gt;Spec&lt;/code&gt; - then it follows that &lt;code&gt;Safe&lt;/code&gt; is also repeatedly true.&lt;/p&gt;
&lt;p&gt;How can we address this problem? We somehow have to make sure that &lt;code&gt;Spec&lt;/code&gt; no longer implies that &lt;code&gt;Machine&lt;/code&gt; steps are also &lt;code&gt;World&lt;/code&gt; steps.&lt;/p&gt;
&lt;h2&gt;How do we fix this?&lt;/h2&gt;
&lt;p&gt;One approach would be to modify the definition of &lt;code&gt;World&lt;/code&gt; to &lt;code&gt;x' \in (TotalInterval \ Goal)&lt;/code&gt;. This causes &lt;code&gt;Machine&lt;/code&gt; steps in the &lt;code&gt;Goal&lt;/code&gt; set to not be &lt;code&gt;World&lt;/code&gt; steps. For example &lt;code&gt;x=2,x=3&lt;/code&gt; would be a &lt;code&gt;Machine&lt;/code&gt; but not a &lt;code&gt;World&lt;/code&gt; step. We can verify this by checking that &lt;code&gt;[][World]_x&lt;/code&gt; is violated.&lt;/p&gt;
&lt;p&gt;Unfortunately, this approach has drawbacks: The original definition of &lt;code&gt;World&lt;/code&gt; allows for behaviors (satisfying the spec) where the variable &lt;code&gt;x&lt;/code&gt; non-deterministically changes in the &lt;code&gt;Goal&lt;/code&gt; interval. Especially it allows behaviors with e.g. a &lt;code&gt;World&lt;/code&gt; step such as &lt;code&gt;x=3,x=2&lt;/code&gt;(all &lt;code&gt;Machine&lt;/code&gt; steps are &lt;code&gt;World&lt;/code&gt; steps but not vice versa). Semantically this models an adversary/environment that perturbs our &lt;code&gt;Machine&lt;/code&gt; but that we define to "play by the rules" in certain states. This is upside down because we want to make as few assumptions about the adversary as possible. On a tangent, we could even argue that &lt;code&gt;x' \in TotalInterval&lt;/code&gt; should be broadened to &lt;code&gt;x' \in Nat&lt;/code&gt; to model all (type-correct) values and - for model checking - be redefined with a &lt;em&gt;Definition Override&lt;/em&gt; to a &lt;em&gt;finite&lt;/em&gt; set of e.g. &lt;code&gt;0..6&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There is a more subtly problem with changing the &lt;code&gt;World&lt;/code&gt; action though. Let us use TLC to generate all steps of &lt;code&gt;Spec&lt;/code&gt; that are not &lt;code&gt;World&lt;/code&gt; steps. We again check the property &lt;code&gt;[][World]_x&lt;/code&gt; but in order for TLC to print &lt;em&gt;all&lt;/em&gt; violations (which correspond to the steps we are interested in), we use the &lt;a href="https://lamport.azurewebsites.net/tla/tlc-options.html?back-link=tools.html"&gt;continue parameter&lt;/a&gt;[^1]. TLC reports the following five violations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;x=1,x=2&lt;/li&gt;
&lt;li&gt;x=2,x=3&lt;/li&gt;
&lt;li&gt;x=3,x=2&lt;/li&gt;
&lt;li&gt;x=4,x=3&lt;/li&gt;
&lt;li&gt;x=5,x=4&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As we can see, this is only a subset of the possible &lt;code&gt;Machine&lt;/code&gt; steps of the specification. In other words, by modifying the &lt;code&gt;World&lt;/code&gt; action to &lt;code&gt;x' \in (TotalWorld \ Goal)&lt;/code&gt;, the &lt;code&gt;FiniteWorldStable&lt;/code&gt; property &lt;em&gt;only&lt;/em&gt; asserts that &lt;code&gt;Spec&lt;/code&gt; is guaranteed to reach a &lt;code&gt;Goal&lt;/code&gt; state if it already is in a &lt;code&gt;Goal&lt;/code&gt; state or "on the brink" of it. The property still does not assert that - given no &lt;code&gt;World&lt;/code&gt; steps from some point forward - &lt;code&gt;Spec&lt;/code&gt; will eventually converge to stability when starting from &lt;em&gt;any&lt;/em&gt; state in &lt;code&gt;TotalInterval&lt;/code&gt;. If we for example are in a state &lt;code&gt;x=6&lt;/code&gt;, the property &lt;code&gt;FiniteWorldStable&lt;/code&gt; does not assert that the &lt;code&gt;Machine&lt;/code&gt; will converge (we just happen to know it will because this is a toy example).&lt;/p&gt;
&lt;p&gt;To make this more explicit, we will temporarily introduce a "bug" in our specification by changing the &lt;code&gt;Machine&lt;/code&gt; action to not converge to a stable state if the value of the variable &lt;code&gt;x&lt;/code&gt; is greater than 6 (the upper bound &lt;code&gt;x &amp;lt; 10&lt;/code&gt; prevents the model from being infinite).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ChangeX&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt;
   &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="k k-Conditional"&gt;IF&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="k k-Conditional"&gt;THEN&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="k k-Conditional"&gt;ELSE&lt;/span&gt; 
                               &lt;span class="k k-Conditional"&gt;IF&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ni"&gt;&amp;gt;&lt;/span&gt; &lt;span class="m"&gt;6&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="k k-Conditional"&gt;THEN&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; 
                               &lt;span class="k k-Conditional"&gt;ELSE&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The property &lt;code&gt;FiniteWorldStable&lt;/code&gt; still holds. Our "programming bug" above will go unnoticed!&lt;/p&gt;
&lt;p&gt;One might also try and remove &lt;code&gt;Machine&lt;/code&gt; from the next-state relation to show that &lt;code&gt;FiniteWorldState&lt;/code&gt; does not reveal violations even with the &lt;code&gt;TotalInteval \ Goal&lt;/code&gt; modification. After all, if no &lt;code&gt;Machine&lt;/code&gt; steps are possible and &lt;code&gt;World&lt;/code&gt; no longer gets us into a stable state, &lt;code&gt;FiniteWorldState&lt;/code&gt; should be violated. This however does not work for reasons beyond what this post can cover (Lamport calls this a "weird spec").&lt;/p&gt;
&lt;h2&gt;Another fix?&lt;/h2&gt;
&lt;p&gt;In &lt;a href="https://arxiv.org/abs/1703.05121"&gt;"Auxiliary Variables in TLA+" (section 3.4)&lt;/a&gt; Lamport and &lt;a href="https://members.loria.fr/SMerz/"&gt;Merz&lt;/a&gt; discuss how &lt;em&gt;history variables&lt;/em&gt; serve as a "helper" to state properties that we want to show are satisfied by a spec. While being primarily used in the scope of &lt;a href="https://lamport.azurewebsites.net/video/video10b.html"&gt;refinement mappings&lt;/a&gt;, an auxiliary history variable will help us distinguish &lt;code&gt;World&lt;/code&gt; from &lt;code&gt;Machine&lt;/code&gt; steps. For &lt;code&gt;Spec&lt;/code&gt; we simply amend the invariant &lt;code&gt;TypeInvariant&lt;/code&gt;, the &lt;em&gt;state predicate&lt;/em&gt; &lt;code&gt;Init&lt;/code&gt; and the  two &lt;code&gt;World&lt;/code&gt; and &lt;code&gt;Machine&lt;/code&gt; actions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;VARIABLES&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;

&lt;span class="n"&gt;TypeInvariant&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt;
  &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;TotalInterval&lt;/span&gt;
  &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="ni"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;i&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class="ni"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;Machine&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt;
  &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="k k-Conditional"&gt;IF&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="k k-Conditional"&gt;THEN&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="s"&gt;&amp;#39; = x + 1 ELSE x&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
  &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;m&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;Init&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt;
  &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;TotalInterval&lt;/span&gt;
  &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;i&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;World&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; 
  &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;TotalInterval&lt;/span&gt;
  &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;With this modification e.g. one behavior allowed by &lt;code&gt;Spec&lt;/code&gt; will be &lt;code&gt;&amp;lt;x=7,h="i"&amp;gt;, &amp;lt;x=6,h="m"&amp;gt;, &amp;lt;x=0,h="w"&amp;gt;, &amp;lt;x=1,h="m"&amp;gt;, &amp;lt;x=0,h="w"&amp;gt;, ...&lt;/code&gt; where &lt;code&gt;....&lt;/code&gt; represents infinite more steps. The first step of the behavior has to be an &lt;code&gt;Init&lt;/code&gt; step because &lt;code&gt;&amp;lt;x=7,h="i"&amp;gt;[[Init]]&amp;lt;x=6,h="m"&amp;gt;&lt;/code&gt; equals true and false for &lt;code&gt;World&lt;/code&gt; and &lt;code&gt;Machine&lt;/code&gt;. Likewise the pair &lt;code&gt;&amp;lt;x=0,h="m"&amp;gt;, &amp;lt;x=1,h="m"&amp;gt;&lt;/code&gt; is a &lt;code&gt;Machine&lt;/code&gt; and not a &lt;code&gt;World&lt;/code&gt; step and so on. With this change in place &lt;code&gt;FiniteWorldStable&lt;/code&gt; and &lt;code&gt;RareWorldResilient&lt;/code&gt; finally assert what is stated in their comments.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;FiniteWorldStable&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="ni"&gt;&amp;lt;&amp;gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="s"&gt;&amp;#39; \in TotalInterval /\ h&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;_x&lt;/span&gt; &lt;span class="ni"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Stable&lt;/span&gt;

&lt;span class="n"&gt;RareWorldResilient&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;[][(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="s"&gt;&amp;#39; \in TotalInterval /\ h&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="ni"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Safe&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="n"&gt;_x&lt;/span&gt; &lt;span class="ni"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Resilient&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Having learned from past mistakes, we now experiment with the properties by e.g. negating the antecedent and/or the consequent to gain some confidence in their correctness.&lt;/p&gt;
&lt;p&gt;In general a history variables comes with an increase in the size of the state space. For the given spec the introduction of the history variable &lt;code&gt;h&lt;/code&gt; almost triples the size from 11 to 31 (distinct) states. While this is not a problem here, it can be for real-world specs. Since we are checking liveness properties, we are barred from using the &lt;a href="https://tla.msr-inria.inria.fr/tlatoolbox/doc/model/model-values.html#symmetry"&gt;symmetry reduction&lt;/a&gt; technique; liveness checking and symmetry reduction are - &lt;a href="https://github.com/tlaplus/tlaplus/blob/master/general/docs/contributions.md#liveness-checking-under-symmetry-difficulty-high-skills-java-tla"&gt;for now&lt;/a&gt; - incompatible (TLC and the Toolbox will emit a warning if we try this)[^2].&lt;/p&gt;
&lt;p&gt;One might also argue that the introduction of a history variable has a second undesired consequence: How can we possibly expect an adversary to be so nice and properly "mark" his steps? Instead of assuming the adversary to mark steps, we can instead consider the history variable to represent &lt;a href="https://en.wikipedia.org/wiki/Message_authentication_code"&gt;message authentication codes&lt;/a&gt; i.e. &lt;code&gt;Machine&lt;/code&gt; "messages" include an (unforgeable) signature (modeled above as &lt;code&gt;"m"&lt;/code&gt;). We will stop here and ignore this problem because I wanted to constrain this post to leave the original properties untouched. The goal was to make the properties assert what the comments says. We might revisit modeling adversaries in a &lt;a href="https://lemmster.de/feeds/tla.atom"&gt;future post&lt;/a&gt; though to discuss alternative ways to state the properties. &lt;/p&gt;
&lt;p&gt;The primary purpose of this post is to remind us of two things: First, we should always be suspicious of success! "&lt;a href="https://groups.google.com/d/msg/tlaplus/ox2AI3VqPbw/v7RIK4pQBQAJ"&gt;&lt;em&gt;Model checking [...] is most informative when it returns a counter-example, not when it says that the property holds, which may be vacuous&lt;/em&gt;&lt;/a&gt;". Second, decomposing a next-state relation into (sub) actions makes a spec more comprehensible for a human. It however does not give us a higher-level concept to reason about. Or as Lamport puts it: "&lt;a href="https://lamport.azurewebsites.net/pubs/lamport-eye-of-beholder.ps"&gt;Processes are in the eye of the beholder&lt;/a&gt;".&lt;/p&gt;
&lt;p&gt;We end this post with a little puzzler: What hack does the linked BlockingQueue spec below (&lt;a href="https://gist.github.com/lemmy/5cae084db688c06fbcb5faaa2f630dec"&gt;gist with better syntax highlighting&lt;/a&gt;) "pull" to make the &lt;code&gt;NoPStarvation&lt;/code&gt; property reveal that the spec does not guarantee &lt;a href="https://en.wikipedia.org/wiki/Starvation_(computer_science)"&gt;starvation-freedom&lt;/a&gt; for &lt;em&gt;producers&lt;/em&gt;? Why doesn't the same hack work for &lt;em&gt;consumers&lt;/em&gt;, i.e. &lt;code&gt;NoCStarvation&lt;/code&gt; is not violated? &lt;a href="https://twitter.com/lemmster"&gt;Let me know&lt;/a&gt; what you find.&lt;/p&gt;
&lt;p&gt;Thanks to Leslie Lamport for a review of this post.&lt;/p&gt;
&lt;p&gt;([^1]: The &lt;em&gt;-continue&lt;/em&gt; parameter is &lt;a href="https://github.com/tlaplus/tlaplus/issues/79"&gt;not yet supported&lt;/a&gt; by the TLA Toolbox.)&lt;/p&gt;
&lt;p&gt;([^2]: What does work for this spec is to use a &lt;em&gt;view&lt;/em&gt; function &lt;code&gt;&amp;lt;&amp;lt;x&amp;gt;&amp;gt;&lt;/code&gt; to retain the original size of the state space even with a history variable. This is however due to the particular shape of the state space and does not generalize. A &lt;em&gt;view&lt;/em&gt; is great to shoot yourself in the foot!)&lt;/p&gt;
&lt;hr&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c c-PreProc"&gt;---------------------------&lt;/span&gt; &lt;span class="c c-PreProc"&gt;MODULE&lt;/span&gt; &lt;span class="c c-PreProc"&gt;BlockingQueueBlog&lt;/span&gt; &lt;span class="c c-PreProc"&gt;---------------------------&lt;/span&gt;
&lt;span class="kn"&gt;EXTENDS&lt;/span&gt; &lt;span class="n"&gt;Naturals&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Sequences&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;FiniteSets&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TLC&lt;/span&gt;

&lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="ni"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="ni"&gt;}&lt;/span&gt;   &lt;span class="c"&gt;\* Two consumers and producers...&lt;/span&gt;
&lt;span class="n"&gt;P&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="ni"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;d&amp;quot;&lt;/span&gt;&lt;span class="ni"&gt;}&lt;/span&gt;   &lt;span class="c"&gt;\* ...which are usually better model as sets of model values.&lt;/span&gt;
&lt;span class="n"&gt;K&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;            &lt;span class="c"&gt;\* Fix queue size to 1 element&lt;/span&gt;

&lt;span class="c"&gt;\* We assume the following properties even though the spec doesn&amp;#39;t use CONSTANTS.&lt;/span&gt;
&lt;span class="n"&gt;ASSUME&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;IsFiniteSet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;IsFiniteSet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;P&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;\* Finite sets&lt;/span&gt;
       &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="nb"&gt;\intersect&lt;/span&gt; &lt;span class="n"&gt;P&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="ni"&gt;{}&lt;/span&gt;              &lt;span class="c"&gt;\* A producer is no consumer and vice versa&lt;/span&gt;
&lt;span class="n"&gt;ASSUME&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Nat&lt;/span&gt; &lt;span class="o"&gt;\&lt;/span&gt; &lt;span class="ni"&gt;{&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="ni"&gt;}&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                   &lt;span class="c"&gt;\* K is a natural number without zero&lt;/span&gt;

&lt;span class="o"&gt;------------------------------------------------------------------&lt;/span&gt;

&lt;span class="c"&gt;\* Nondeterministically notify (wake) a process from the given waitset.&lt;/span&gt;
&lt;span class="n"&gt;Notify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="k k-Conditional"&gt;IF&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="ni"&gt;{}&lt;/span&gt;
             &lt;span class="k k-Conditional"&gt;THEN&lt;/span&gt; &lt;span class="s"&gt;\E&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;\&lt;/span&gt; &lt;span class="ni"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="ni"&gt;}&lt;/span&gt;
             &lt;span class="k k-Conditional"&gt;ELSE&lt;/span&gt; &lt;span class="n"&gt;UNCHANGED&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;

&lt;span class="o"&gt;------------------------------------------------------------------&lt;/span&gt;

&lt;span class="kn"&gt;VARIABLES&lt;/span&gt; &lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c"&gt;\* The (internal) storage for the queue&lt;/span&gt;
          &lt;span class="n"&gt;waitP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c"&gt;\* A waitset for producers&lt;/span&gt;
          &lt;span class="n"&gt;waitC&lt;/span&gt;  &lt;span class="c"&gt;\* A waitset for consumers&lt;/span&gt;
&lt;span class="n"&gt;vars&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;waitP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;waitC&lt;/span&gt; &lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;\* A type correctness invariant asserting that...&lt;/span&gt;
&lt;span class="n"&gt;TypeOK&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;waitP&lt;/span&gt; &lt;span class="nb"&gt;\subseteq&lt;/span&gt; &lt;span class="n"&gt;P&lt;/span&gt; &lt;span class="c"&gt;\* only producers are in waitP&lt;/span&gt;
          &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;waitC&lt;/span&gt; &lt;span class="nb"&gt;\subseteq&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="c"&gt;\* only consumers are in waitC&lt;/span&gt;
          &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;DOMAIN&lt;/span&gt; &lt;span class="n"&gt;store&lt;/span&gt; &lt;span class="nb"&gt;\subseteq&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="n"&gt;K&lt;/span&gt; &lt;span class="c"&gt;\* store is a sequence for which the &lt;/span&gt;
                                         &lt;span class="c"&gt;\* elements of the codomain are undefined.&lt;/span&gt;

&lt;span class="cm"&gt;(***************************************************************************)&lt;/span&gt;
&lt;span class="cm"&gt;(* Initially consumers and processes are alive and the queue is empty.     *)&lt;/span&gt;
&lt;span class="cm"&gt;(***************************************************************************)&lt;/span&gt;
&lt;span class="n"&gt;Init&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;store&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;lt;&amp;gt;&amp;gt;&lt;/span&gt;
        &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;waitP&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="ni"&gt;{}&lt;/span&gt;
        &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;waitC&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="ni"&gt;{}&lt;/span&gt;

&lt;span class="cm"&gt;(***************************************************************************)&lt;/span&gt;
&lt;span class="cm"&gt;(* A producer either waits if the queue is full or appends an element.     *)&lt;/span&gt;
&lt;span class="cm"&gt;(***************************************************************************)&lt;/span&gt;
&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;Len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;waitP&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;waitP&lt;/span&gt; &lt;span class="nb"&gt;\cup&lt;/span&gt; &lt;span class="ni"&gt;{&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="ni"&gt;}&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;UNCHANGED&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;waitC&lt;/span&gt; &lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;

&lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;Len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;Notify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;waitC&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;UNCHANGED&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;waitP&lt;/span&gt; &lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;(***************************************************************************)&lt;/span&gt;
&lt;span class="cm"&gt;(* A consumer either waits if the queue is empty (c1) or picks one element *)&lt;/span&gt;
&lt;span class="cm"&gt;(* (c2). c2 is the critical section from the perspective of the consumer.  *)&lt;/span&gt;
&lt;span class="cm"&gt;(***************************************************************************)&lt;/span&gt;
&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;Len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;waitC&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;waitC&lt;/span&gt; &lt;span class="nb"&gt;\cup&lt;/span&gt; &lt;span class="ni"&gt;{&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="ni"&gt;}&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;UNCHANGED&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;waitP&lt;/span&gt; &lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;

&lt;span class="n"&gt;c2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;Len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;Notify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;waitP&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="ni"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Tail&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;UNCHANGED&lt;/span&gt; &lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;waitC&lt;/span&gt; &lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;(***************************************************************************)&lt;/span&gt;
&lt;span class="cm"&gt;(* Let the scheduler non-deterministically schedule consumer and           *)&lt;/span&gt;
&lt;span class="cm"&gt;(* producers processes.                                                    *)&lt;/span&gt;
&lt;span class="cm"&gt;(***************************************************************************)&lt;/span&gt;
&lt;span class="n"&gt;Next&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="o"&gt;\/&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;\E&lt;/span&gt; &lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;P&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;\/&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="o"&gt;\/&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;\E&lt;/span&gt; &lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;\/&lt;/span&gt; &lt;span class="n"&gt;c2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="n"&gt;Spec&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Init&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="p"&gt;[][&lt;/span&gt;&lt;span class="n"&gt;Next&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="n"&gt;_vars&lt;/span&gt; &lt;span class="o"&gt;/\&lt;/span&gt; &lt;span class="n"&gt;WF_vars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;THEOREM&lt;/span&gt; &lt;span class="n"&gt;Spec&lt;/span&gt; &lt;span class="ni"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="n"&gt;TypeOK&lt;/span&gt;

&lt;span class="o"&gt;------------------------------------------------------------------&lt;/span&gt;

&lt;span class="c"&gt;\* Not all consumers and producers wait at once.&lt;/span&gt;
&lt;span class="n"&gt;NoDeadLock&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;waitP&lt;/span&gt; &lt;span class="nb"&gt;\cup&lt;/span&gt; &lt;span class="n"&gt;waitC&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="nb"&gt;\cup&lt;/span&gt; &lt;span class="n"&gt;P&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;THEOREM&lt;/span&gt; &lt;span class="n"&gt;Spec&lt;/span&gt; &lt;span class="ni"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="n"&gt;NoDeadLock&lt;/span&gt;

&lt;span class="c"&gt;\* All consumers eventually dequeue elements.&lt;/span&gt;
&lt;span class="n"&gt;NoCStarvation&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="s"&gt;\A&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="ni"&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;c2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c"&gt;\* All producers eventually enqueue elements.&lt;/span&gt;
&lt;span class="n"&gt;NoPStarvation&lt;/span&gt; &lt;span class="ni"&gt;==&lt;/span&gt; &lt;span class="s"&gt;\A&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="s"&gt;\in&lt;/span&gt; &lt;span class="n"&gt;P&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="ni"&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="ni"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="ni"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c c-PreProc"&gt;=============================================================================&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Include TLA+ in LyX documents and export it pretty-printed to PDF</title><link href="http://www.lemmster.de/tla-in-lyx.html" rel="alternate"></link><published>2016-08-15T09:43:02+02:00</published><updated>2016-08-15T09:43:02+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2016-08-15:/tla-in-lyx.html</id><summary type="html">&lt;p&gt;Create a wrapper script for tla2tex.TeX (part of tlatools), put it onto $PATH and name it tla2tex.sh:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="nv"&gt;OUTPUT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
&lt;span class="nv"&gt;INPUT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;

&lt;span class="c1"&gt;## Creating dummy file ${OUTPUT%.*}.tex for …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</summary><content type="html">&lt;p&gt;Create a wrapper script for tla2tex.TeX (part of tlatools), put it onto $PATH and name it tla2tex.sh:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="nv"&gt;OUTPUT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
&lt;span class="nv"&gt;INPUT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;

&lt;span class="c1"&gt;## Creating dummy file ${OUTPUT%.*}.tex for tla2tex to remove. It apparently needs this.&lt;/span&gt;
touch &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;OUTPUT&lt;/span&gt;&lt;span class="p"&gt;%.*&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.tex

&lt;span class="c1"&gt;## Running tla2tex.TeX on $INPUT and writing output to ${OUTPUT%.*}.tex. Expects the TLA+Toolbox to&lt;/span&gt;
&lt;span class="c1"&gt;## be installed to /opt/TLA+Toolbox&lt;/span&gt;
java -cp /opt/TLA+Toolbox/plugins/org.lamport.tlatools_1.0.0.*/ tla2tex.TeX -out &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;OUTPUT&lt;/span&gt;&lt;span class="p"&gt;%.*&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.tex &lt;span class="nv"&gt;$INPUT&lt;/span&gt;

&lt;span class="c1"&gt;## Converting ${OUTPUT%.*}.tex back to $OUTPUT for LyX to read it&lt;/span&gt;
&lt;span class="c1"&gt;#cp ${OUTPUT%.*}.tex $OUTPUT&lt;/span&gt;
&lt;span class="c1"&gt;## tla2tex.TeX does not accept &amp;quot;\label{...}&amp;quot; as a lexem and fails. To still be able to use \label&lt;/span&gt;
&lt;span class="c1"&gt;## within algorithms, they get wrapped into a TLA+ line comment (&amp;quot;\*...&amp;quot;). Despite being an empty&lt;/span&gt;
&lt;span class="c1"&gt;## comment, the resulting PDF shows a grayish box for each \label iff comment shading is enabled.&lt;/span&gt;
&lt;span class="c1"&gt;## The regexp below removes all boxes created by TLA+ line comments with \label{...}.&lt;/span&gt;
cat &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;OUTPUT&lt;/span&gt;&lt;span class="p"&gt;%.*&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.tex &lt;span class="p"&gt;|&lt;/span&gt;perl -0777 -pe &lt;span class="s1"&gt;&amp;#39;s/\\\@y\{%\n (\\label\{[:a-zA-Z0-9]+})\n}%/$1/igs&amp;#39;&lt;/span&gt; &amp;gt; &lt;span class="nv"&gt;$OUTPUT&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Open up LyX and create two new "File Formats" under Tools &amp;gt; Preferences &amp;gt; File Handling &amp;gt; File Formats:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Format&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;LaTeX&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tla2tex&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Short&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tla2tex&lt;/span&gt;
&lt;span class="n"&gt;Extensions&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tex&lt;/span&gt;

&lt;span class="n"&gt;Format&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;PDF&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tla2tex&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Check&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Document format&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Show in export menu&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Vector graphics format&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Short&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;pdf4tla2tex&lt;/span&gt;
&lt;span class="n"&gt;Extensions&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;pdf&lt;/span&gt;
&lt;span class="n"&gt;Shortcut&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;
&lt;span class="n"&gt;Viewer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;qpdfview&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;unique&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Also create two new LyX "Converters" under Tools &amp;gt; Preferences &amp;gt; File Handling &amp;gt; Converters:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;From/To: LaTeX (plain) -&amp;gt; LaTeX (tla2tex)
Converter: tla2tex.sh $$o $$i

From/To: LaTeX (tla2tex) -&amp;gt; PDF (tla2tex)
Converter: pdflatex $$i
Extra flag: latex=pdflatex
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Afterwards run Tools &amp;gt; reconfigure and restart LyX. TLA+ statements can then be included in LyX documents
inside LyX's &lt;a href="https://wiki.lyx.org/FAQ/ERT"&gt;&lt;img alt="\ERT" src="https://wiki.lyx.org/FAQ/ERT"&gt;&lt;/a&gt; within a "tla" or "pcal"
environment provided the document's LaTeX preamble declares a \usepackage{tlatex} as explained in the 
&lt;a href="https://github.com/tlaplus/tlaplus/blob/master/tlatools/src/tla2tex/texinfo.txt"&gt;&lt;img alt="tla2tex help" src="https://github.com/tlaplus/tlaplus/blob/master/tlatools/src/tla2tex/texinfo.txt"&gt;&lt;/a&gt; and be exported via File &amp;gt; Export &amp;gt; PDF (tla2tex):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;\begin{tla}
(***********************************************)
(* A standard definition of spec.              *)
(***********************************************)
Spec == Init /\ [][Next]_vars /\ WF_vars(Next)
\end{tla}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ideally, the excerpts were sourced from the .tla file directly so that one wouldn't need to copy&amp;amp;paste
parts of a specification into the .tex document. Someone might want to look into This. The &lt;a href="https://www.ctan.org/pkg/catchfilebetweentags"&gt;&lt;img alt="catchfilebetweentags" src="https://www.ctan.org/pkg/catchfilebetweentags"&gt;&lt;/a&gt; packages seems to be a viable candidate.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;An incompatibility with the algorithm2e package surfaced that screws up \ref pointing to a \label whichis attached to a section/subsection.
If secnumdepth is set to be lower than the label'ed section/subsection, the \ref fails to show the number of the parent secton if
interleaved with a TLA+/PlusCal algorithm. Instead, it shows the last line number of the interleaved algorithm. If anybody cares
about it, the .tex below reproduces it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;\batchmode&lt;/span&gt;
&lt;span class="x"&gt;\makeatletter&lt;/span&gt;
&lt;span class="x"&gt;\def\input@path&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;foobar&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;\makeatother&lt;/span&gt;
&lt;span class="x"&gt;\documentclass[english]{scrreprt}&lt;/span&gt;
&lt;span class="x"&gt;\usepackage[T1]{fontenc}&lt;/span&gt;
&lt;span class="x"&gt;\usepackage[utf8]{inputenc}&lt;/span&gt;
&lt;span class="x"&gt;\setcounter{secnumdepth}{1}&lt;/span&gt;
&lt;span class="x"&gt;\setcounter{tocdepth}{1}&lt;/span&gt;
&lt;span class="x"&gt;\usepackage{algorithm2e}&lt;/span&gt;

&lt;span class="x"&gt;\makeatletter&lt;/span&gt;
&lt;span class="x"&gt;\usepackage{tlatex}&lt;/span&gt;
&lt;span class="x"&gt;\RestyleAlgo{ruled}&lt;/span&gt;
&lt;span class="x"&gt;\LinesNumbered&lt;/span&gt;

&lt;span class="x"&gt;\makeatother&lt;/span&gt;

&lt;span class="x"&gt;\usepackage{babel}&lt;/span&gt;
&lt;span class="x"&gt;\begin{document}&lt;/span&gt;

&lt;span class="x"&gt;\chapter{Chap}&lt;/span&gt;

&lt;span class="x"&gt;\section{Sec}&lt;/span&gt;

&lt;span class="x"&gt;\begin{algorithm}&lt;/span&gt;
&lt;span class="x"&gt;\begin{tla}&lt;/span&gt;
&lt;span class="x"&gt;Line&lt;/span&gt;
&lt;span class="x"&gt;Line&lt;/span&gt;
&lt;span class="x"&gt;Line&lt;/span&gt;
&lt;span class="x"&gt;\end{tla}&lt;/span&gt;
&lt;span class="x"&gt;\begin{tlatex}&lt;/span&gt;
&lt;span class="x"&gt;\@x{ Line}%&lt;/span&gt;
&lt;span class="x"&gt;\@x{ Line}%&lt;/span&gt;
&lt;span class="x"&gt;\@x{ Line}%&lt;/span&gt;
&lt;span class="x"&gt;\end{tlatex}&lt;/span&gt;
&lt;span class="x"&gt;\centering{}\caption{caption}&lt;/span&gt;
&lt;span class="x"&gt;\end{algorithm}&lt;/span&gt;


&lt;span class="x"&gt;\subsection{Subsec\label{subsec:subsection}}&lt;/span&gt;

&lt;span class="x"&gt;\chapter{Broken Ref Below}&lt;/span&gt;

&lt;span class="x"&gt;\ref{subsec:subsection} &amp;lt;= incorrectly shows last line number of&lt;/span&gt;
&lt;span class="x"&gt;algorithm instead of ``1.1&amp;#39;&amp;#39;.&lt;/span&gt;
&lt;span class="x"&gt;\begin{itemize}&lt;/span&gt;
&lt;span class="x"&gt;\item If line numbers are omitted (no \textbackslash{}LinesNumbered in Preamble),&lt;/span&gt;
&lt;span class="x"&gt;the bug disappears.&lt;/span&gt;
&lt;span class="x"&gt;\item If secnumdepth includes subsections, the bug disappears.&lt;/span&gt;
&lt;span class="x"&gt;\end{itemize}&lt;/span&gt;

&lt;span class="x"&gt;\end{document}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Forcefully re-resolve a stale PDE target definition</title><link href="http://www.lemmster.de/2015-03-02-forcefully-reresolve-a-targetplatform.md.html" rel="alternate"></link><published>2015-03-02T11:16:41+01:00</published><updated>2015-03-02T11:16:41+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2015-03-02:/2015-03-02-forcefully-reresolve-a-targetplatform.md.html</id><summary type="html">&lt;p&gt;Occasionally Eclipse PDE gets stuck in an error state when it tries to resolve a target definition, e.g. caused by an intermittent network issues. Once it's gotten into this state, it's impossible to forcefully resolve the target definition. p2's clever cache is very persistently saving bandwidth and thus answering …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Occasionally Eclipse PDE gets stuck in an error state when it tries to resolve a target definition, e.g. caused by an intermittent network issues. Once it's gotten into this state, it's impossible to forcefully resolve the target definition. p2's clever cache is very persistently saving bandwidth and thus answering every request by the stale and erroneous on-disk cache.&lt;/p&gt;
&lt;p&gt;To still re-resolve a stale PDE target definition, one has to remove the following workspace folders and restart the Eclipse IDE:&lt;/p&gt;
&lt;p&gt;/path/to/workspace/.metadata/.plugins/org.eclipse.pde.core/.bundle_pool
/path/to/workspace/.metadata/.plugins/org.eclipse.pde.core/.p2/org.eclipse.equinox.p2.engine/profileRegistry&lt;/p&gt;
&lt;p&gt;Unfortunately, &lt;a href="https://bugs.eclipse.org/441190"&gt;bug #441190&lt;/a&gt; supposed to fix this problem in PDE, is a mere workaround. It simply increments the target's sequence number to invalidate p2's internal cache. This is going to create a new version of the .target file on every click on the reload button. A mess when it's SCM controlled. &lt;/p&gt;
&lt;p&gt;...cache invalidation: one of the hard problems in computer science.&lt;/p&gt;</content></entry><entry><title>Cross-compile kernel module (ext2) for Samsung nx300 on Ubuntu 14.04</title><link href="http://www.lemmster.de/cross-compile-kernel-module-samsung-nx300-ubnut-14.04.html" rel="alternate"></link><published>2014-06-09T15:27:16+02:00</published><updated>2014-06-09T15:27:16+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2014-06-09:/cross-compile-kernel-module-samsung-nx300-ubnut-14.04.html</id><summary type="html">&lt;p&gt;Manually download ’NX300 1.4 NX300.zip’ from &lt;a href="http://opensource.samsung.com/reception/receptionSub.do?method=sub&amp;amp;sub=F&amp;amp;searchValue=nx300"&gt;http://opensource.samsung.com/reception/receptionSub.do?method=sub&amp;amp;sub=F&amp;amp;searchValue=nx300&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Extract nx300.zip and nested nx300.tar.gz&lt;/span&gt;
root@melanogaster:/tmp/# unzip nx300.zip &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; tar xfz nx300.tar.gz

&lt;span class="c1"&gt;# Install necessary packages&lt;/span&gt;
root@melanogaster:/tmp/# apt-get install gcc-arm-linux-gnueabi u-boot-tools …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Manually download ’NX300 1.4 NX300.zip’ from &lt;a href="http://opensource.samsung.com/reception/receptionSub.do?method=sub&amp;amp;sub=F&amp;amp;searchValue=nx300"&gt;http://opensource.samsung.com/reception/receptionSub.do?method=sub&amp;amp;sub=F&amp;amp;searchValue=nx300&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Extract nx300.zip and nested nx300.tar.gz&lt;/span&gt;
root@melanogaster:/tmp/# unzip nx300.zip &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; tar xfz nx300.tar.gz

&lt;span class="c1"&gt;# Install necessary packages&lt;/span&gt;
root@melanogaster:/tmp/# apt-get install gcc-arm-linux-gnueabi u-boot-tools libncurses5-dev

&lt;span class="c1"&gt;# Create symlinks to gcc-arm-linux-gnueabi binaries because Makefiles refer to arm-none-linux...&lt;/span&gt;
&lt;span class="c1"&gt;# See http://stackoverflow.com/a/13798214 for background info&lt;/span&gt;
root@melanogaster:/tmp/# &lt;span class="k"&gt;for&lt;/span&gt; f in /usr/bin/arm-linux-gnueabi-*&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$f&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nv"&gt;BASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;basename &lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ln -s &lt;span class="nv"&gt;$f&lt;/span&gt; /usr/local/bin/&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;BASE&lt;/span&gt;&lt;span class="p"&gt;/arm-linux/arm-none-linux&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;

root@melanogaster:/tmp/TIZEN/build# make nx300_config &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;

root@melanogaster:/tmp/TIZEN/build# &lt;span class="nb"&gt;cd&lt;/span&gt; ../packages/linux
root@melanogaster:/tmp/TIZEN/packages/linux# make menuconfig 
&lt;span class="c1"&gt;## 1. Set ext2 to be compiled as module &amp;quot;&amp;lt;M&amp;gt;&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;## 2. Set CONFIG_LOCALVERSION=&amp;quot;+&amp;quot; to make the module&amp;#39;s &amp;#39;vermagic&amp;#39; (see modinfo /path/to/compiled/ext2.ko) match the nx300&amp;#39;s in .config (thx to http://www.cnx-software.com/2012/09/11/building-kernel-modules-for-allwinner-a10-devices-android/)&lt;/span&gt;

root@melanogaster:/tmp/TIZEN/packages/linux# make &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make modules
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;

root@melanogaster:/tmp/TIZEN/packages/linux# find . -iname *.ko
./drivers/video/backlight/backlight.ko
./drivers/video/backlight/generic_bl.ko
./drivers/net/wireless/ath/ath.ko
./drivers/net/wireless/ath/ath6kl/ath6kl_sdio.ko
./drivers/usb/gadget/g_ffs.ko
./fs/ext2/ext2.ko

&lt;span class="c1"&gt;# Copy ext2.ko to nx300&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Auto backup files from the Samsung NX300 camera in the background</title><link href="http://www.lemmster.de/auto-backup-from-nx300-via-ftp.html" rel="alternate"></link><published>2014-06-07T21:16:16+02:00</published><updated>2014-06-07T21:16:16+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2014-06-07:/auto-backup-from-nx300-via-ftp.html</id><summary type="html">&lt;p&gt;This would not have been possible without &lt;a href="http://op-co.de/blog/posts/rooting_the_nx300/"&gt;Georg Lukas' work&lt;/a&gt;!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Always-On wifi&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Connect the camera to the wifi the regular way (for me only 2.4ghz wifi worked to automatically connect)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Find the corresponding settings file in /mnt/ubi1/data/var/lib/connman/&lt;span&gt;*&lt;/span&gt;/settings (note down the folder name for …&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;This would not have been possible without &lt;a href="http://op-co.de/blog/posts/rooting_the_nx300/"&gt;Georg Lukas' work&lt;/a&gt;!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Always-On wifi&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Connect the camera to the wifi the regular way (for me only 2.4ghz wifi worked to automatically connect)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Find the corresponding settings file in /mnt/ubi1/data/var/lib/connman/&lt;span&gt;*&lt;/span&gt;/settings (note down the folder name for the connection you automatically want to connect to)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Create the wpa_supplicant.conf file in /mnt/mmc/:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;nx300:/mnt/mmc# cat /tmp/wpa_supplicant.conf 
ctrl_interface=DIR=/var/run/wifi
device_name=NX300-CAMERA
manufacturer=SAMSUNG
model_name=NX300
model_number=RAE011112-00CS
serial_number=XXXXXXXXXX
config_methods=physical_display virtual_push_button keypad
country=NL
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Append the following to autoexec.sh&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Always on wifi
cp /mnt/mmc/wpa_supplicant.conf /tmp/
/usr/bin/wlan.sh start NL 0x8210 &amp;gt;&amp;gt; /mnt/mmc/wifi.log 2&amp;gt;&amp;amp;1
/usr/sbin/connmand -W nl80211 -r
/usr/sbin/net-config 
sleep 2
#dbus-send --system --type=method_call --print-reply --dest=net.connman / net.connman.Manager.GetServices|grep service &amp;gt;&amp;gt; /mnt/mmc/wifi.log 2&amp;gt;&amp;amp;1 
dbus-send --system --type=method_call --print-reply --dest=net.connman /net/connman/service/wifi_a0219572b25b_7777772e6c656d6d737465722e6465_managed_psk net.connman.Service.Connect &amp;gt;&amp;gt; /mnt/mmc/wifi.log 2&amp;gt;&amp;amp;1
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FTPd (started via inetd)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Make inetd start ftpd automatically by appending the following to autoexec.sh:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Create inetd config file that activates ftpd
echo &amp;quot;21 stream tcp nowait root ftpd /usr/sbin/ftpd /mnt/mmc/DCIM/&amp;quot; &amp;gt; /mnt/mmc/inetd.conf
# start inetd (in background) that spawns ftpd on demand
/usr/sbin/inetd /mnt/mmc/inetd.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;On a remote host periodically poll (less elegant) for new files (if the camera is on-line). The second line purges the mirrored files from the camera so that they do not get downloaded again if deleted from the backup:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;while&lt;/span&gt; &lt;span class="nt"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;do&lt;/span&gt; &lt;span class="nt"&gt;sleep&lt;/span&gt; &lt;span class="nt"&gt;5&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nt"&gt;ping&lt;/span&gt; &lt;span class="nt"&gt;-q&lt;/span&gt; &lt;span class="nt"&gt;-c&lt;/span&gt; &lt;span class="nt"&gt;3&lt;/span&gt; &lt;span class="nt"&gt;nx300&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nt"&gt;wget&lt;/span&gt; &lt;span class="nt"&gt;-q&lt;/span&gt; &lt;span class="nt"&gt;-m&lt;/span&gt; &lt;span class="nt"&gt;ftp&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="nt"&gt;nx300&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;done&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;sleep&lt;/span&gt; &lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;echo&lt;/span&gt; &lt;span class="nt"&gt;-e&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;cd /mnt/mmc/DCIM/100Photo/ &amp;amp;&amp;amp; rm SAM_0158.JPG SAM_0159.JPG&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nt"&gt;nc&lt;/span&gt; &lt;span class="nt"&gt;-q&lt;/span&gt; &lt;span class="nt"&gt;5&lt;/span&gt; &lt;span class="nt"&gt;nx300&lt;/span&gt; &lt;span class="nt"&gt;23&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If you additionally want to only mirror files that are newer than a sentinel file (e.g. because you might want to be allowed to delete files locally without re-mirroring the file again), run:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;
&lt;span class="c1"&gt;##&lt;/span&gt;
&lt;span class="c1"&gt;## Mirrors files from the nx300 samsung camera to the local machine. The set of files mirrored is the subset of files newer than the given sentinel.&lt;/span&gt;
&lt;span class="c1"&gt;##&lt;/span&gt;
&lt;span class="c1"&gt;## License see http://unlicense.org/&lt;/span&gt;
&lt;span class="c1"&gt;##&lt;/span&gt;

&lt;span class="c1"&gt;## mirrorers the files from the camera stored in the 100PHOTO/ folder int the local 100PHOTO/ folder&lt;/span&gt;
lftp nx300 -e &lt;span class="s2"&gt;&amp;quot;set ftp:use-feat off; mirror --newer-than=100PHOTO/.sentinel 100PHOTO 100PHOTO; quit&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;## Keep the last (newest) mirrored file at a sentinel.&lt;/span&gt;
&lt;span class="c1"&gt;## (Do not just store the name of the file because the original file can be touched (e.g. modified by an image editing program) on the local end&lt;/span&gt;
cp -a 100PHOTO/&lt;span class="sb"&gt;`&lt;/span&gt;ls -tp 100PHOTO/ &lt;span class="p"&gt;|&lt;/span&gt; grep -v /$ &lt;span class="p"&gt;|&lt;/span&gt; head -1&lt;span class="sb"&gt;`&lt;/span&gt; 100PHOTO/.sentinel
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;However, I have found that ftpd/lftpd do not correctly preserve the ctime/mtime/... when transfering the file. Thus, the sentinal approach does not work reliably.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;inotifywait&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Download following squeeze (oldstable) armel deb packages from packages.debian.org:&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://packages.debian.org/squeeze/libinotifytools0"&gt;https://packages.debian.org/squeeze/libinotifytools0&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://packages.debian.org/squeeze/inotify-tools"&gt;https://packages.debian.org/squeeze/inotify-tools&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://www.g-loaded.eu/2008/01/28/how-to-extract-rpm-or-deb-packages/"&gt;Extract the data bits of both .deb files with 'ar p &lt;em&gt;notify&lt;/em&gt; data.tar.gz | tar zx'&lt;/a&gt; and flatten libinotifytools.so.0, libinotifytools.so.0.4.1 inotifywait and inotifywatch from the resulting usr/* to /mnt/mmc &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Start /mnt/mmc/mirror.sh via /mnt/mmc/autoexec.sh&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/sh&lt;/span&gt;

&lt;span class="c1"&gt;## make sure to find libinotify in current directory            &lt;/span&gt;
&lt;span class="nv"&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/mnt/mmc/:&lt;span class="nv"&gt;$LD_LIBRARY_PATH&lt;/span&gt;

&lt;span class="c1"&gt;## directory to watch for images&lt;/span&gt;
&lt;span class="nv"&gt;DIR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/mnt/mmc/DCIM/100PHOTO

&lt;span class="c1"&gt;## target to ftpput files to&lt;/span&gt;
&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;strawberry

&lt;span class="c1"&gt;## watch for new files and immediately copy to remote and delete afterwards&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="nv"&gt;F&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;/mnt/mmc/inotifywait -e create &lt;span class="nv"&gt;$DIR&lt;/span&gt; --format %f .&lt;span class="k"&gt;)&lt;/span&gt;
   &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt; ftpput &lt;span class="nv"&gt;$TARGET&lt;/span&gt; /incoming/&lt;span class="nv"&gt;$F&lt;/span&gt; &lt;span class="nv"&gt;$DIR&lt;/span&gt;/&lt;span class="nv"&gt;$F&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm &lt;span class="nv"&gt;$DIR&lt;/span&gt;/&lt;span class="nv"&gt;$F&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Install vsftpd on a raspberry pi&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;apt-get install vsftpd &amp;amp;&amp;amp; mkdir -p /var/ftp/incoming &amp;amp;&amp;amp; chown root:root /var/ftp &amp;amp;&amp;amp; chown ftp:ftp /var/ftp/incoming&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add anon_upload_enable=YES, write_enable=YES, anonymous_enable=YES, anon_root=/var/ftp and anon_umask=022 to /etc/vsftpd and restart vsftpd&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The final autoexe.sh looks like:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/sh&lt;/span&gt;

&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;strawberry

mkdir -p /dev/pts
mount -t devpts none /dev/pts

&lt;span class="c1"&gt;# Start telnet server&lt;/span&gt;
telnetd -l /bin/bash -F &amp;gt; /mnt/mmc/telnetd.log &lt;span class="m"&gt;2&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;

&lt;span class="c1"&gt;# Create inetd config file that activates ftpd&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;21 stream tcp nowait root ftpd /usr/sbin/ftpd /mnt/mmc/DCIM/&amp;quot;&lt;/span&gt; &amp;gt; /mnt/mmc/inetd.conf

&lt;span class="c1"&gt;# start inetd (in background) that spawns ftpd on demand&lt;/span&gt;
/usr/sbin/inetd /mnt/mmc/inetd.conf

&lt;span class="c1"&gt;# automatically start wifi&lt;/span&gt;
cp /mnt/mmc/wpa_supplicant.conf /tmp/
/usr/bin/wlan.sh start NL 0x8210
/usr/sbin/connmand -W nl80211 -r
/usr/sbin/net-config
sleep &lt;span class="m"&gt;2&lt;/span&gt;
dbus-send --system --type&lt;span class="o"&gt;=&lt;/span&gt;method_call --print-reply --dest&lt;span class="o"&gt;=&lt;/span&gt;net.connman /net/connman/service/wifi_a0219572b25b_7777772e6c656d6d737465722e6465_managed_psk net.connman.Service.Connect

&lt;span class="c1"&gt;# start mirror.sh&lt;/span&gt;
&lt;span class="c1"&gt;# (TODO: inline the mirror.sh script?)&lt;/span&gt;
/mnt/mmc/mirror.sh &amp;gt; /mnt/mmc/mirror.log &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="c1"&gt;# copy any file the mirror.sh script might have missed in previous runs&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; f in /mnt/mmc/DCIM/100PHOTO/*.JPG&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;basename &lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ftpput &lt;span class="nv"&gt;$TARGET&lt;/span&gt; incoming/&lt;span class="nv"&gt;$file&lt;/span&gt; &lt;span class="nv"&gt;$f&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm &lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;/li&gt;
&lt;/ul&gt;</content></entry><entry><title>SWTError: No more handles [gtk_init_check() failed] running platform tests (on Linux)</title><link href="http://www.lemmster.de/2013-12-19-swterror-no-more-handles-gtk_init_check-failed-running-platform-tests-on-linux.html" rel="alternate"></link><published>2013-12-19T11:16:41+01:00</published><updated>2013-12-19T11:16:41+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-12-19:/2013-12-19-swterror-no-more-handles-gtk_init_check-failed-running-platform-tests-on-linux.html</id><summary type="html">&lt;p&gt;When running platform tests on Linux (and Mac?) one might encounter the following exception:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;org.eclipse.swt.SWTError: No more handles [gtk_init_check() failed]
at org.eclipse.swt.SWT.error(SWT.java:4445)
at org.eclipse.swt.widgets.Display.createDisplay(Display.java:929)
at org.eclipse.swt.widgets.Display.create(Display …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;When running platform tests on Linux (and Mac?) one might encounter the following exception:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;org.eclipse.swt.SWTError: No more handles [gtk_init_check() failed]
at org.eclipse.swt.SWT.error(SWT.java:4445)
at org.eclipse.swt.widgets.Display.createDisplay(Display.java:929)
at org.eclipse.swt.widgets.Display.create(Display.java:913)
at org.eclipse.swt.graphics.Device.&amp;lt;init&amp;gt;(Device.java:157)
at org.eclipse.swt.widgets.Display.&amp;lt;init&amp;gt;(Display.java:509)
at org.eclipse.swt.widgets.Display.&amp;lt;init&amp;gt;(Display.java:500)
at org.eclipse.swt.widgets.Display.getDefault(Display.java:1719)
at org.eclipse.e4.ui.tests.workbench.InjectionThreadDomainTest.setUp(InjectionThreadDomainTest.java:84)
at junit.framework.TestCase.runBare(TestCase.java:139)
at junit.framework.TestResult$1.protect(TestResult.java:122)
at junit.framework.TestResult.runProtected(TestResult.java:142)
at junit.framework.TestResult.run(TestResult.java:125)
at junit.framework.TestCase.run(TestCase.java:129)
at junit.framework.TestSuite.runTest(TestSuite.java:255)
at junit.framework.TestSuite.run(TestSuite.java:250)
at junit.framework.TestSuite.runTest(TestSuite.java:255)
at junit.framework.TestSuite.run(TestSuite.java:250)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:131)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
at org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:62)
at org.eclipse.pde.internal.junit.runtime.CoreTestApplication.run(CoreTestApplication.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:606)
at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:587)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:198)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:109)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:80)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:372)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:226)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:606)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591)
at org.eclipse.equinox.launcher.Main.run(Main.java:1450)
at org.eclipse.equinox.launcher.Main.main(Main.java:1426)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The underlying cause isn't found in SWT though, but in the .launch configuration's environment setting. In order to run the tests on a dedicated DISPLAY to avoid interferences, tests set the DISPLAY env var explicitly. Thus, an X instance has to be made available. This is easily done by installing Xvfb the &lt;a href="http://en.wikipedia.org/wiki/Xvfb"&gt;X virtual frame buffer&lt;/a&gt; (e.g. "sudo apt-get install xvfb") and starting it on 1:0 with "Xvfb :1 &amp;amp;". Voilà, this magically increases the number of handles. ;-)&lt;/p&gt;
&lt;p&gt;&lt;a href="/uploads/EnvironmentTabEclipseWithDisplay.png"&gt;&lt;img alt="Launch config Environment Tab Eclipse with Display" src="/uploads/EnvironmentTabEclipseWithDisplay-300x256.png"&gt;&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>Apache Felix HTTP whiteboard pattern on Equinox</title><link href="http://www.lemmster.de/apache-felix-http-whiteboard-pattern-on-equinox.html" rel="alternate"></link><published>2013-12-11T08:54:40+01:00</published><updated>2013-12-11T08:54:40+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-12-11:/apache-felix-http-whiteboard-pattern-on-equinox.html</id><summary type="html">&lt;p&gt;Unless I am missing something obvious, using the Equinox HttpService requires one to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;a) get the HttpService from the OSGi service registry&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;b) register the HttpServlet on the HttpService via a call to registerServlet(..)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This can be done however much more elegantly and - way more importantly - in a &lt;a href="http://books.google.de/books?id=xyffdhEOlAcC&amp;amp;lpg=PT558&amp;amp;ots=fYruSOvGTL&amp;amp;dq=osgi%20dynamic%20awareness&amp;amp;pg=PT558#v=onepage&amp;amp;q&amp;amp;f=false"&gt;dynamic aware …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;Unless I am missing something obvious, using the Equinox HttpService requires one to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;a) get the HttpService from the OSGi service registry&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;b) register the HttpServlet on the HttpService via a call to registerServlet(..)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This can be done however much more elegantly and - way more importantly - in a &lt;a href="http://books.google.de/books?id=xyffdhEOlAcC&amp;amp;lpg=PT558&amp;amp;ots=fYruSOvGTL&amp;amp;dq=osgi%20dynamic%20awareness&amp;amp;pg=PT558#v=onepage&amp;amp;q&amp;amp;f=false"&gt;dynamic aware&lt;/a&gt; fashion meaning, that the &lt;em&gt;HttpServlet&lt;/em&gt; that is registered survives life-cycle changes of the &lt;em&gt;HttpService&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;E.g. consider the case where one registers the &lt;em&gt;HttpServlet&lt;/em&gt; with &lt;em&gt;registerServlet&lt;/em&gt;(..) and the &lt;em&gt;HttpService&lt;/em&gt; is redeployed afterwards. Unless the &lt;em&gt;HttpService&lt;/em&gt; maintains its internal state (which is rather unlikely if e.g. Tomcat gets replaced with Jetty), the &lt;em&gt;HttpServlet&lt;/em&gt; won't be available anymore and consumer code will have to re-register the &lt;em&gt;HttpServlet&lt;/em&gt; again (by listening to life-cycle changes of the &lt;em&gt;HttpService&lt;/em&gt;).
If, on the other hand the &lt;em&gt;HttpServlet&lt;/em&gt; is simply registered with the OSGi service registry as a &lt;em&gt;javax.servlet.Servlet&lt;/em&gt; &lt;a href="http://blog.osgi.org/2010/03/services.html"&gt;μService&lt;/a&gt; (SR never goes away), the &lt;em&gt;HttpService&lt;/em&gt; itself (or an &lt;a href="http://blog.osgi.org/2007/02/osgi-extender-model.html"&gt;extender&lt;/a&gt; as a matter of fact) can lookup all services of the &lt;em&gt;javax.servlet.Servlet&lt;/em&gt; type whenever its need to (read when the &lt;em&gt;HttpService&lt;/em&gt; transitions through life-cycle changes).&lt;/p&gt;
&lt;p&gt;To leverage this on &lt;a href="http://www.eclipse.org/equinox/"&gt;Equinox&lt;/a&gt;, just follow the steps below:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://felix.apache.org/downloads.cgi#subprojects"&gt;Download&lt;/a&gt; recent versions of both bundles 'HTTP Service API' and 'HTTP Service Whiteboard' to e.g. Eclipse's dropins/ folder&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;It is version 2.2.2 as of writing&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add also bundle &lt;em&gt;org.eclipse.equinox.http.jetty&lt;/em&gt; and its dependencies to the launch configuration&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Alternatively use Felix's incarnation of Jetty called 'HTTP Service Jetty'&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.kuppe.exmpl&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.ServletException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServlet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletRequest&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletResponse&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ChatServlet&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HttpServlet&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;doGet&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HttpServletRequest&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;HttpServletResponse&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
        &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ServletException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
             &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStatus&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HttpServletResponse&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SC_OK&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;scr:component&lt;/span&gt;
    &lt;span class="na"&gt;xmlns:scr=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.osgi.org/xmlns/scr/v1.1.0&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;immediate=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;org.kuppe.exmpl.chat.web&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;implementation/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;service&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;provide&lt;/span&gt; &lt;span class="na"&gt;interface=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;javax.servlet.Servlet&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/service&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;alias&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;String&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/chat&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
 &lt;span class="nt"&gt;&amp;lt;/scr:component&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Set 'Bundle-ActivationPolicy: lazy' and list the component xml as a Service-Component for the DS extender in the MANIFEST.MF&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Do not forget to explicitly add DS &lt;em&gt;org.eclipse.equinox.ds&lt;/em&gt; to your launch until &lt;a href="http://blog.osgi.org/2012/03/requirements-and-capabilities.html"&gt;capabilites&lt;/a&gt; are available&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Optionally add -Dorg.eclipse.equinox.http.jetty.http.port=8181 to change the Jetty port to 8181&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Also read the &lt;a href="http://felix.apache.org/documentation/subprojects/apache-felix-http-service.html#using-the-whiteboard"&gt;generic Apache Felix Http whiteboard instructions&lt;/a&gt;!&lt;/p&gt;</content></entry><entry><title>Real word scale greenhouse (temperature)</title><link href="http://www.lemmster.de/real-world-scale-greenhouse-temperature.html" rel="alternate"></link><published>2013-11-29T09:15:49+01:00</published><updated>2013-11-29T09:15:49+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-11-29:/real-world-scale-greenhouse-temperature.html</id><summary type="html">&lt;p&gt;On my route to rebuild the &lt;a href="http://m2m.eclipse.org/demo/#/devices/RPI000000006f257df2"&gt;M2M demo&lt;/a&gt; at real-world scale, I have taken the first step. An old (from around 2004) and absurdly underpowered ARM Intel XScale IXP420 running today's Debian Wheezy (&lt;a href="http://nslu2-linux.org/"&gt;NSLU2&lt;/a&gt;) with just 266mhz has been recommissioned to act as a temperature sensor (why buy an Rasperry …&lt;/p&gt;</summary><content type="html">&lt;p&gt;On my route to rebuild the &lt;a href="http://m2m.eclipse.org/demo/#/devices/RPI000000006f257df2"&gt;M2M demo&lt;/a&gt; at real-world scale, I have taken the first step. An old (from around 2004) and absurdly underpowered ARM Intel XScale IXP420 running today's Debian Wheezy (&lt;a href="http://nslu2-linux.org/"&gt;NSLU2&lt;/a&gt;) with just 266mhz has been recommissioned to act as a temperature sensor (why buy an Rasperry Pi or Arduino, if you can recycle?). The actual thermostat is a cheapish ~10bucks USB connected "TEMPer" device.&lt;/p&gt;
&lt;p&gt;&lt;a href="/uploads/nslu2withTemper.png"&gt;&lt;img alt="nslu2withTemper" src="/uploads/nslu2withTemper-300x300.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Once the hardware is wired up and put in place, the following instructions build the &lt;a href="http://github.com/lemmy/usb-thermometer"&gt;pcsensor binary&lt;/a&gt; that is needed to read data from the USB dongle:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Install Debian necessities&lt;/span&gt;
apt-get install libusb-dev build-essential

&lt;span class="c1"&gt;# Get source (without git installed, download zip file from github)&lt;/span&gt;
&lt;span class="c1"&gt;# (I had to hack the original code to continuously flush the output to stdout to subsequently read it with mosquitto)&lt;/span&gt;
git clone https://github.com/lemmy/usb-thermometer.git

&lt;span class="c1"&gt;# Build binary&lt;/span&gt;
&lt;span class="nb"&gt;cd&lt;/span&gt; usb-thermometer/
make

&lt;span class="c1"&gt;# &amp;quot;Install&amp;quot; into system&lt;/span&gt;
cp &lt;span class="m"&gt;99&lt;/span&gt;-tempsensor.rules /etc/udev/rules.d/
cp pcsensor /usr/local/bin/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At this point a simple monitoring tool like e.g. &lt;a href="http://munin-monitoring.org/"&gt;munin&lt;/a&gt; can already show the temperature readings for last night - classico.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.lemmster.de/temperature-day.png"&gt;&lt;img alt="muninTemperature" src="http://www.lemmster.de/temperature-day.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Rendering to a static web page however is too old school and thus I wanted each reading to be send out with MQTT so that I can get the readings on any &lt;a href="https://play.google.com/store/apps/details?id=at.tripwire.mqtt.client"&gt;smartphone&lt;/a&gt; (or browser in realtime below). Fortunately, Wheezy comes with a simple MQTT command line client that is easily connected to the pcsensor process (Btw. re-spawning a new pcsensor process for every reading and piping the output to mosquitoo turned out to cause problems on the USB layer (device re-connects). The current solution with long-lived processes is also less resource intensive):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Start a pcsensor process and send its output via mosquitto (line by line) to m2m.eclipse.org&lt;/span&gt;
pcsensor -c -s -l &lt;span class="p"&gt;|&lt;/span&gt; mosquitto_pub -t 8742hvvgsdf/temp -l -h m2m.eclipse.org
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/1/10/Temperature_up.svg/170px-Temperature_up.svg.png"&gt;&lt;/p&gt;
&lt;p&gt;Thanks to &lt;a href="http://mosquitto.org/js/mosquitto-1.1.js"&gt;mosquitto's javascript client&lt;/a&gt; (though &lt;a href="http://mosquitto.org/2013/05/mosquitto-javascript-client-deprecated/"&gt;deprecated&lt;/a&gt; in favor of Paho) and websockets it is actually almost trivial to show MQTT messages in-line in a blog post like this one. :-) (I will leave it to the educated reader to lookup the source code manually. It's almost identical to their examples)&lt;/p&gt;
&lt;p&gt;Current temperature reading is &lt;strong&gt;-1&lt;/strong&gt; in °C for topic &lt;strong&gt;NA&lt;/strong&gt; &lt;br&gt;
(with timestamp &lt;strong&gt;epoch&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="http://mosquitto.org/wp-content/themes/corp-mosq/images/mosquitto-50x35.png"&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Btw. this project serves a real world purpose too ;-). The greenhouse has electrical heating to protect the plants from frost over winter. Last winter though, the heating broke and all plants died as a consequence. Thus, the temperature readings are written to a local (history) file and collected by said Munin. Munin then sends out alarms via email when a certain threshold gets reached:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Optionally one can multiplex the sensor reading to a local file to feed the data also to munin:&lt;/span&gt;

&lt;span class="c1"&gt;# Create ramdisk to avoid writes to the slow and worn out USB pen drive&lt;/span&gt;
mkdir /var/lib/ram&lt;span class="p"&gt;;&lt;/span&gt; chmod &lt;span class="m"&gt;777&lt;/span&gt; /var/lib/ram
mount -t tmpfs -o &lt;span class="nv"&gt;size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;256&lt;/span&gt; tmpfs /var/lib/ram

&lt;span class="c1"&gt;# Or permanently&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;none /var/lib/ram tmpfs nodev,nosuid,noexec,nodiratime,size=256 0 0&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; /etc/fstab

&lt;span class="c1"&gt;# Write a local history to a tiny (ramdisk) file&lt;/span&gt;
pcsensor -c -s -l &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print; print &amp;gt;f;close(f)}&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;f&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/lib/ram/temp.txt &lt;span class="p"&gt;|&lt;/span&gt; mosquitto_pub -t 8742hvvgsdf/temp -l -h m2m.eclipse.org

&lt;span class="c1"&gt;# Save the following file&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#!/bin/sh&lt;/span&gt;
&lt;span class="s1"&gt;case $1 in&lt;/span&gt;
&lt;span class="s1"&gt;    config)&lt;/span&gt;
&lt;span class="s1"&gt;        cat &amp;lt; &amp;lt;&amp;#39;&lt;/span&gt;EOM&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;graph_title Temperature&lt;/span&gt;
&lt;span class="s1"&gt;graph_vlabel temp in C&lt;/span&gt;
&lt;span class="s1"&gt;graph_args --base 1000 -l 0&lt;/span&gt;
&lt;span class="s1"&gt;graph_category Temperature&lt;/span&gt;
&lt;span class="s1"&gt;temp.label Temperature&lt;/span&gt;
&lt;span class="s1"&gt;temp.warning 0&lt;/span&gt;
&lt;span class="s1"&gt;temp.critical -5&lt;/span&gt;
&lt;span class="s1"&gt;EOM&lt;/span&gt;
&lt;span class="s1"&gt;    exit 0;;&lt;/span&gt;
&lt;span class="s1"&gt;esac&lt;/span&gt;
&lt;span class="s1"&gt;temp=`cat /var/lib/ram/temp.txt | tail -1`&lt;/span&gt;
&lt;span class="s1"&gt;echo &amp;quot;temp.value &amp;quot;$temp&amp;quot;&amp;quot;&amp;#39;&lt;/span&gt; &amp;gt; /etc/munin/plugins/temperature
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To automatically start temperature readins at boot time, create (yet another) script and have it spawned by init.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&lt;/span&gt;

&lt;span class="s1"&gt;# make sure pcsensor, awk and mosquitto are killed along with this script&lt;/span&gt;
&lt;span class="s1"&gt;# http://riccomini.name/posts/linux/2012-09-25-kill-subprocesses-linux-bash/&lt;/span&gt;
&lt;span class="s1"&gt;trap &amp;#39;&lt;/span&gt;&lt;span class="nb"&gt;kill&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;jobs&lt;/span&gt; -p&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; EXIT&lt;/span&gt;

&lt;span class="s1"&gt;# do the actual work&lt;/span&gt;
&lt;span class="s1"&gt;/usr/local/bin/pcsensor -c -s -l | awk \&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;print&lt;span class="p"&gt;;&lt;/span&gt; print &amp;gt;f&lt;span class="p"&gt;;&lt;/span&gt;close&lt;span class="o"&gt;(&lt;/span&gt;f&lt;span class="o"&gt;)}&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;f&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/lib/ram/temp.txt &lt;span class="p"&gt;|&lt;/span&gt; /usr/bin/mosquitto_pub -t 8742hvvgsdf/temp -l -h m2m.eclipse.org
&lt;span class="s1"&gt;&amp;#39; &amp;gt; /usr/local/bin/measureTemp.sh&lt;/span&gt;

&lt;span class="s1"&gt;sudo echo &amp;#39;&lt;/span&gt;&lt;span class="c1"&gt;# measureTemp&lt;/span&gt;
mt:2345:respawn:/usr/bin/sudo -u markus &lt;span class="s2"&gt;&amp;quot;/usr/local/bin/measureTemp.sh&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; /etc/inittab
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Quick'n'dirty twitter2xmbc hack to show #tatort related tweets on Sunday night</title><link href="http://www.lemmster.de/quickndirty-twitter2xbmc-hack-to-show-tatort-related-tweets-on-sunday-night.html" rel="alternate"></link><published>2013-11-27T21:24:16+01:00</published><updated>2013-11-27T21:24:16+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-11-27:/quickndirty-twitter2xbmc-hack-to-show-tatort-related-tweets-on-sunday-night.html</id><summary type="html">&lt;p&gt;Download ttytter (command line twitter client):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Get recent version of ttytter (old versions fail to auth)
wget http://www.floodgap.com/software/ttytter/ttytter.txt -O /usr/local/bin/ttytter &amp;amp;&amp;amp; chmod +x /usr/local/bin/ttytter
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Create the following script:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10 …&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</summary><content type="html">&lt;p&gt;Download ttytter (command line twitter client):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Get recent version of ttytter (old versions fail to auth)
wget http://www.floodgap.com/software/ttytter/ttytter.txt -O /usr/local/bin/ttytter &amp;amp;&amp;amp; chmod +x /usr/local/bin/ttytter
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Create the following script:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="c1"&gt;# Get list of search result&lt;/span&gt;
&lt;span class="nv"&gt;TWEET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;ttytter -runcommand&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/search #tatort&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt; tail -1 &lt;span class="p"&gt;|&lt;/span&gt; python -c &lt;span class="s1"&gt;&amp;#39;import json,sys; print json.dumps(sys.stdin.read())&amp;#39;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="c1"&gt;# Prepare json request&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;{\&amp;quot;id\&amp;quot;:1,\&amp;quot;jsonrpc\&amp;quot;:\&amp;quot;2.0\&amp;quot;,\&amp;quot;method\&amp;quot;:\&amp;quot;GUI.ShowNotification\&amp;quot;,\&amp;quot;params\&amp;quot;:{\&amp;quot;title\&amp;quot;:\&amp;quot;Tatort\&amp;quot;,\&amp;quot;displaytime\&amp;quot;:20000,\&amp;quot;message\&amp;quot;:TWEET}}&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;s/TWEET/&amp;#39;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$TWEET&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/g&amp;#39;&lt;/span&gt; &amp;gt; /tmp/tmp.json

&lt;span class="c1"&gt;# Send request&lt;/span&gt;
curl -u xbmc:xbmc -H &lt;span class="s2"&gt;&amp;quot;Accept: application/json&amp;quot;&lt;/span&gt; -H &lt;span class="s2"&gt;&amp;quot;Content-type: application/json&amp;quot;&lt;/span&gt; -X POST --data @/tmp/tmp.json http://localhost:8080/jsonrpc
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Btw. it is trivial to read the currently playing title from xbmc via curl as well to adapt to whatever one watches.&lt;/p&gt;</content></entry><entry><title>Save the date - Hamburg Eclipse /ˈhakəθɒn/ - November 22. 2013</title><link href="http://www.lemmster.de/save-the-date-hamburg-eclipse-hackathon-november-22-2013.html" rel="alternate"></link><published>2013-11-04T11:15:09+01:00</published><updated>2013-11-04T11:15:09+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-11-04:/save-the-date-hamburg-eclipse-hackathon-november-22-2013.html</id><summary type="html">&lt;p&gt;As a sequel to the very successful ECE &lt;a href="http://www.eclipsecon.org/europe2013/eclipse-contributor-hackathon"&gt;hackathon&lt;/a&gt; last week, we are going to run another &lt;a href="https://wiki.eclipse.org/Hackathon_Hamburg_2013"&gt;hackathon in Hamburg&lt;/a&gt; (see wiki for more info) in ~two week from now. So save the date, spread the word and help us put eventually more dots on the &lt;a href="https://www.zeemaps.com/Eclipsecommittersworldwide"&gt;Eclipse Committer world map …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;As a sequel to the very successful ECE &lt;a href="http://www.eclipsecon.org/europe2013/eclipse-contributor-hackathon"&gt;hackathon&lt;/a&gt; last week, we are going to run another &lt;a href="https://wiki.eclipse.org/Hackathon_Hamburg_2013"&gt;hackathon in Hamburg&lt;/a&gt; (see wiki for more info) in ~two week from now. So save the date, spread the word and help us put eventually more dots on the &lt;a href="https://www.zeemaps.com/Eclipsecommittersworldwide"&gt;Eclipse Committer world map&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://wiki.eclipse.org/Hackathon_Hamburg_2013"&gt;&lt;img alt="20100923113037!Eclipse_DemoCamp_New" src="https://wiki.eclipse.org/images/3/3f/Eclipse_Hackathon.jpg"&gt;&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>Programatically push configuration into OSGi ConfigurationAdmin</title><link href="http://www.lemmster.de/programatically-push-configuration-into-osgi-configurationadmin.html" rel="alternate"></link><published>2013-10-23T05:28:06+02:00</published><updated>2013-10-23T05:28:06+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-10-23:/programatically-push-configuration-into-osgi-configurationadmin.html</id><summary type="html">&lt;p&gt;Yesterday I lost half an hour when I struggled to push a configuration into OSGi ConfigurationAdmin. The org.osgi.service.cm.ManagedService was in fact called, but the Dictionary of properties was always null. It turns out, I forgot that one has to lookup the org.osgi.service.cm.Configuration …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Yesterday I lost half an hour when I struggled to push a configuration into OSGi ConfigurationAdmin. The org.osgi.service.cm.ManagedService was in fact called, but the Dictionary of properties was always null. It turns out, I forgot that one has to lookup the org.osgi.service.cm.Configuration not just by service PID, but also by (bundle) location. And since the location was not matching, the configuration was not a valid config for the bundle that implements the ManagedService.
Below is how one correctly configures the ManagedService registered with PID “my.ManagedService.Service.Pid” (service.pid). Notice the “?” location wildcard!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;String servicePID = &amp;quot;my.ManagedService.Service.Pid&amp;quot;;
Configuration configuration = 
    cm.getConfiguration(servicePID, &lt;span class="nt"&gt;&amp;lt;strong&amp;gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;color: #ff0000;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&amp;quot;?&amp;quot;&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&amp;lt;/strong&amp;gt;&lt;/span&gt;);
Dictionary&lt;span class="nt"&gt;&amp;lt;String&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt; &lt;span class="err"&gt;Object&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; properties = 
    configuration.getProperties();
if (properties == null) {
    properties = new Hashtable&lt;span class="nt"&gt;&amp;lt;String&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt; &lt;span class="err"&gt;Object&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;();
}
properties.put(&amp;quot;someKey&amp;quot;, &amp;quot;someValue&amp;quot;);
configuration.update(properties);
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Speaking at EclipseCon Europe 2013</title><link href="http://www.lemmster.de/speaking-at-eclipsecon-europe-2013.html" rel="alternate"></link><published>2013-09-11T15:20:56+02:00</published><updated>2013-09-11T15:20:56+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-09-11:/speaking-at-eclipsecon-europe-2013.html</id><summary type="html">&lt;p&gt;I am going to co-present two talks at this year's &lt;a href="http://www.eclipsecon.org/europe2013"&gt;EclipseCon Europe&lt;/a&gt; in Ludwigsburg in October. The first talk is titled "&lt;a href="http://www.eclipsecon.org/europe2013/discover-remote-osgi-services"&gt;Discover Remote OSGi Services&lt;/a&gt;" and &lt;a href="Discover Remote OSGi Services"&gt;Wim&lt;/a&gt; and I will show the latest and greatest of &lt;a href="http://eclipse.org/ecf/"&gt;ECF&lt;/a&gt;'s implementation of OSGi remote services.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The current state of Service Oriented Architecture …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;p&gt;I am going to co-present two talks at this year's &lt;a href="http://www.eclipsecon.org/europe2013"&gt;EclipseCon Europe&lt;/a&gt; in Ludwigsburg in October. The first talk is titled "&lt;a href="http://www.eclipsecon.org/europe2013/discover-remote-osgi-services"&gt;Discover Remote OSGi Services&lt;/a&gt;" and &lt;a href="Discover Remote OSGi Services"&gt;Wim&lt;/a&gt; and I will show the latest and greatest of &lt;a href="http://eclipse.org/ecf/"&gt;ECF&lt;/a&gt;'s implementation of OSGi remote services.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The current state of Service Oriented Architecture (SOA) is intimidating. The set of standards invented to "make your life easier" has been growing like wildfire: xml, soap, wadl, widl, wsdl, rest, bics, wxscm, sscm, web.xml, ramp, etcetera etcetera.&lt;/p&gt;
&lt;p&gt;On top of these protocols you can use a wealth of tooling and frameworks to such an extend that even you, the tech, don't know what is going on...&lt;/p&gt;
&lt;p&gt;Sometimes you wish that remote services were simple. Just implement an API, expose this API as a service in your OSGi runtime and let network clients use this implementation. If you could only focus on the meat and not on the infrastructure then you could be on your way to solve your business problems instead of solving configurations.&lt;/p&gt;
&lt;p&gt;This talk explains how the ECF project will take your existing OSGi service and promote it to a network service. The network service will be peer to peer or it will be registered with a discovery server and advertised to any interested clients. The clients then can use the service as if it was a local service. ECF has implemented the new OSGi RSA specification in order to achieve this.&lt;/p&gt;
&lt;p&gt;ECF committers Markus Kuppe and Wim Jongman will entertrain you on this remote services discovery tour which will include live coding. We will demonstrate how to promote an OSGi service to a remote service. Together we will build a simple remote service and see how all the remote services will be consumed by our client.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;"&lt;a href="http://www.eclipsecon.org/europe2013/become-eclipse-committer-20-min-and-fork-eclipse-ide"&gt;Become a Eclipse Committer in 20 min and fork the Eclipse IDE&lt;/a&gt;" with &lt;a href="https://twitter.com/vogella"&gt;Lars&lt;/a&gt; shows how easy and straightforward contributing to Eclipse actually can be. This talk will focus less on the process but dive into the technical aspects working with 'org.eclipse' code instead. Even if you are a (downstream) consumer of Eclipse code you should attend the talk though. What I learned throughout various consultancy gigs is that you want to be able to fix bugs in Eclipse code rather than clumsily work around it. Here's the excerpt:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Eclipse SDK is available via Git and the common build infrastructure allows to build your own Eclipse IDE. Join this talk to learn how you can checkout the Eclipse IDE source code, modify it, commit your changes and build the Eclipse SDK using CBI and Maven / Tycho.&lt;/p&gt;
&lt;p&gt;If you follow the approach described in this talk can learn how to build your own Eclipse IDE flavor to test your own developments before contributing them back to Eclipse.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Unfortunately, the program committee decided that software verification does not really fit into the overall theme of the conference and rejected my talk on &lt;a href="http://research.microsoft.com/en-us/um/people/lamport/tla/tla.html"&gt;TLA+&lt;/a&gt; named "&lt;a href="http://www.eclipsecon.org/europe2013/ivory-tower-eclipse-model-checking-made-easy"&gt;From the Ivory Tower to Eclipse - Model checking made easy&lt;/a&gt;". Well, maybe next time...&lt;/p&gt;</content></entry><entry><title>Sending events to e4 applications from outside of e4</title><link href="http://www.lemmster.de/sending-events-to-e4-applications-from-outside-of-e4.html" rel="alternate"></link><published>2013-06-24T09:05:41+02:00</published><updated>2013-06-24T09:05:41+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-24:/sending-events-to-e4-applications-from-outside-of-e4.html</id><summary type="html">&lt;p&gt;e4 uses an event bus to let different pieces (e.g. parts) of an e4 application communicate. Architecturally, this leads to low coupling (doubleplusgood) due to the fact that the various pieces only need to know the event topics (String constants), which are ideally defined centrally in a common bundle …&lt;/p&gt;</summary><content type="html">&lt;p&gt;e4 uses an event bus to let different pieces (e.g. parts) of an e4 application communicate. Architecturally, this leads to low coupling (doubleplusgood) due to the fact that the various pieces only need to know the event topics (String constants), which are ideally defined centrally in a common bundle. If you happen to never leave the e4 application realm you are lucky and can stop reading here.
For the rest of us though - who face the requirement to send e4 application events outside of e4 - the problem is that e4 does not use the org.osgi.service.event.EventAdmin directly. It comes with its own org.eclipse.e4.core.services.events.IEventBroker. This alone would not pose an unsolvable problem (one could simply get the IEventBroker instead of EventAdmin from OSGi), but IEventBroker does not get registered with the OSGi service registry (see bug #&lt;a href="https://bugs.eclipse.org/391097"&gt;391097&lt;/a&gt;). Luckily for us, the e4 team - even though they decided against reusing the OSGi org.osgi.service.event.EventAdmin directly - implemented IEventBroker as a wrapper around EventAdmin. So in order to send an event to e4, one simply has to get/lookup the OSGi EventAdmin from the OSGi service register (either programmatically or with DS).&lt;/p&gt;
&lt;p&gt;If one's use case also requires sending a payload along with the event, the Dictionary/Map of org.osgi.service.event.Event has to contain the element under the special key org.eclipse.e4.core.services.events.IEventBroker.DATA.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashMap&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IEventBroker&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DATA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;Event&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Event&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MyE4EventConstants&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TOPIC_SOME_TOPIC&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;ServiceReference&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;EventAdmin&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;serviceReference&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 
    &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getServiceReference&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EventAdmin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;EventAdmin&lt;/span&gt; &lt;span class="n"&gt;ea&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getService&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;serviceReference&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;ea&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;postEvent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>LyX export to markdown</title><link href="http://www.lemmster.de/lyx-export-to-markdown.html" rel="alternate"></link><published>2013-06-23T09:43:02+02:00</published><updated>2013-06-23T09:43:02+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-23:/lyx-export-to-markdown.html</id><summary type="html">&lt;p&gt;Command line (Lyx &amp;gt; Markdown)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;lyx --export latex file.lyx
pandoc --no-wrap -f latex -t markdown file.tex &amp;gt; file.md
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Command line (Markdown &amp;gt; Lyx)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pandoc --no-wrap -f markdown -t latex file.md &amp;gt; file.tex &amp;amp;&amp;amp; tex2lyx
file.tex &amp;amp;&amp;amp; lyx file.lyx
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(--no-wrap makes sure we don't screw up e.g. \hrefs by …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Command line (Lyx &amp;gt; Markdown)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;lyx --export latex file.lyx
pandoc --no-wrap -f latex -t markdown file.tex &amp;gt; file.md
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Command line (Markdown &amp;gt; Lyx)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pandoc --no-wrap -f markdown -t latex file.md &amp;gt; file.tex &amp;amp;&amp;amp; tex2lyx
file.tex &amp;amp;&amp;amp; lyx file.lyx
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(--no-wrap makes sure we don't screw up e.g. \hrefs by spanning them
over multiple lines)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install pandoc lyx
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://www.lemmster.de/uploads/FileFormats.png"&gt;&lt;img alt="FileFormats" src="http://www.lemmster.de/uploads/FileFormats-300x234.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pandoc --no-wrap -f latex -t markdown -o $$o $$i
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(might need extra whitespace at end)&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.lemmster.de/uploads/Converters.png"&gt;&lt;img alt="Converters" src="http://www.lemmster.de/uploads/Converters-300x234.png"&gt;&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>Build and run eyeD3 from source on Debian|Ubuntu with virtualenv</title><link href="http://www.lemmster.de/build-eyed3-from-source-on-debianubuntu.html" rel="alternate"></link><published>2013-06-22T13:52:17+02:00</published><updated>2013-06-22T13:52:17+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-22:/build-eyed3-from-source-on-debianubuntu.html</id><summary type="html">&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;
sudo apt-get install python-virtualenv virtualenvwrapper mercurial

&lt;span class="nb"&gt;cd&lt;/span&gt; /usr/local/src/
hg clone https://lemmster@bitbucket.org/lemmster/eyed3

&lt;span class="c1"&gt;# Change virtualenvwrapper.sh in mkenv.sh …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</summary><content type="html">&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;
sudo apt-get install python-virtualenv virtualenvwrapper mercurial

&lt;span class="nb"&gt;cd&lt;/span&gt; /usr/local/src/
hg clone https://lemmster@bitbucket.org/lemmster/eyed3

&lt;span class="c1"&gt;# Change virtualenvwrapper.sh in mkenv.sh to align with debian|ubuntu&lt;/span&gt;
&lt;span class="c1"&gt;# (http://askubuntu.com/questions/251378/where-is-virtualenvwrapper-sh)&lt;/span&gt;
sed -i.bak &lt;span class="s1"&gt;&amp;#39;s/\/usr\/bin\/virtualenvwrapper.sh/\/etc\/bash_completion.d\/virtualenvwrapper/g&amp;#39;&lt;/span&gt; mkenv.sh

&lt;span class="c1"&gt;# make virtualenvwrapper install into current directory instead of $HOME&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;WORKON_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="nb"&gt;pwd&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;/.virtualenvs

&lt;span class="c1"&gt;# Create an virtual environment for eyeD3&lt;/span&gt;
mkenv.sh

&lt;span class="c1"&gt;# Add workon to path&lt;/span&gt;
&lt;span class="nb"&gt;source&lt;/span&gt; /etc/bash_completion.d/virtualenvwrapper
&lt;span class="c1"&gt;# Switch to newly created eyeD3 virtual environment&lt;/span&gt;
workon eyeD3
&lt;span class="c1"&gt;# Run tests (creates info.py from info.py.in automatically)&lt;/span&gt;
paver &lt;span class="nb"&gt;test&lt;/span&gt;
&lt;span class="c1"&gt;# run current version of eyeD3&lt;/span&gt;
eyeD3 --help
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;See also http://eyed3.nicfit.net/installation.html&lt;/p&gt;</content></entry><entry><title>Network bonding (wlan &amp; eth) on linux ubuntu</title><link href="http://www.lemmster.de/network-bonding-wlan-eth-on-linux-ubuntu.html" rel="alternate"></link><published>2013-06-21T09:04:25+02:00</published><updated>2013-06-21T09:04:25+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-21:/network-bonding-wlan-eth-on-linux-ubuntu.html</id><summary type="html">&lt;p&gt;When we moved into our new apartment, we renewed all wires which included proper cat7 in all rooms. So lets take advantage of it... :)&lt;/p&gt;
&lt;p&gt;My primary machine is a laptop that I carry around in the house a lot. This breaks open network connections, due to the IP change when …&lt;/p&gt;</summary><content type="html">&lt;p&gt;When we moved into our new apartment, we renewed all wires which included proper cat7 in all rooms. So lets take advantage of it... :)&lt;/p&gt;
&lt;p&gt;My primary machine is a laptop that I carry around in the house a lot. This breaks open network connections, due to the IP change when NetworkManager switches from the wired interface to the wireless. To not interrupt existing network connections though, it's vital that the machine's IP stays the same regardless of whether it is hooked up with the wired or wireless. This is where network bonding comes into play. It binds both physical devices wlan and eth into a logical one with a single IP address assigned (by remote DHCP). The kernel then takes care of activating the proper device depending on the wired link state (cable connected).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install ifenslave

me@foo:/etc/NetworkManager $ cat NetworkManager.conf
&lt;span class="o"&gt;[&lt;/span&gt;main&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ifupdown,keyfile
&lt;span class="nv"&gt;dns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;dnsmasq
&lt;span class="o"&gt;[&lt;/span&gt;ifupdown&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;managed&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;keyfile&lt;span class="o"&gt;]&lt;/span&gt;
unmanaged-devices&lt;span class="o"&gt;=&lt;/span&gt;mac:00:23:ab:cd:ef:14
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;"unmanaged-devices" tells NetworkManager to leave the bonding device alone and not interfere with it. It refers to the hw address (mac) of the wifi interface.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;me@foo:/etc/network $ cat interfaces
&lt;span class="c1"&gt;# Bonding for eth0 and wlan0 at home&lt;/span&gt;
auto lo
iface lo inet loopback

&lt;span class="c1"&gt;# Do not receive dhcp on eth0&lt;/span&gt;
auto eth0
iface eth0 inet manual
bond-master bond0
bond-primary eth0

&lt;span class="c1"&gt;# Manually connect wireless to AP&lt;/span&gt;
&lt;span class="c1"&gt;#auto wlan0&lt;/span&gt;
iface wlan0 inet manual
wpa-ssid &lt;span class="s2"&gt;&amp;quot;YOUR_SSID_HERE&amp;quot;&lt;/span&gt;
wpa-psk YOUR_WPAKEY_HERE
bond-master bond0

&lt;span class="c1"&gt;# Request dhcp ip for bonded interface&lt;/span&gt;
iface bond0 inet dhcp
bond-mode active-backup
bond-miimon &lt;span class="m"&gt;100&lt;/span&gt;
bond-slaves none
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Due to issues, wlan0 is brought up via 'ifup wlan0' in /etc/rc.local.
Happy bonding (state can be observed via (cat /proc/net/bonding/bond0)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;me@foo:/ $ cat /proc/net/bonding/bond0
Ethernet Channel Bonding Driver: v3.7.1 &lt;span class="o"&gt;(&lt;/span&gt;April &lt;span class="m"&gt;27&lt;/span&gt;, &lt;span class="m"&gt;2011&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

Bonding Mode: fault-tolerance &lt;span class="o"&gt;(&lt;/span&gt;active-backup&lt;span class="o"&gt;)&lt;/span&gt;
Primary Slave: eth0 &lt;span class="o"&gt;(&lt;/span&gt;primary_reselect always&lt;span class="o"&gt;)&lt;/span&gt;
Currently Active Slave: eth0
MII Status: up
MII Polling Interval &lt;span class="o"&gt;(&lt;/span&gt;ms&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="m"&gt;100&lt;/span&gt;
Up Delay &lt;span class="o"&gt;(&lt;/span&gt;ms&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="m"&gt;0&lt;/span&gt;
Down Delay &lt;span class="o"&gt;(&lt;/span&gt;ms&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="m"&gt;0&lt;/span&gt;

Slave Interface: eth0
MII Status: up
Speed: &lt;span class="m"&gt;1000&lt;/span&gt; Mbps
Duplex: full
Link Failure Count: &lt;span class="m"&gt;0&lt;/span&gt;
Permanent HW addr: &lt;span class="m"&gt;00&lt;/span&gt;:23:ab:cd:ef:13
Slave queue ID: &lt;span class="m"&gt;0&lt;/span&gt;

Slave Interface: wlan0
MII Status: up
Speed: Unknown
Duplex: Unknown
Link Failure Count: &lt;span class="m"&gt;0&lt;/span&gt;
Permanent HW addr: &lt;span class="m"&gt;00&lt;/span&gt;:23:ab:cd:ef:14
Slave queue ID: &lt;span class="m"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If one happens to install dropbear on Ubuntu 12.10 with an encrypted disk, network is set to come up as part of initramfs (to remotely unlock the disks). This causes ethX to get an IP address long before bonding has a chance to enslave the device. Removing dropbear and manually running "update-initramfs -u" fixed this issue for me.&lt;/p&gt;</content></entry><entry><title>github issues with ghi and multiple users</title><link href="http://www.lemmster.de/ghi-with-multiple-users.html" rel="alternate"></link><published>2013-06-17T16:24:13+02:00</published><updated>2013-06-17T16:24:13+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-17:/ghi-with-multiple-users.html</id><summary type="html">&lt;p&gt;I have recently started to use &lt;a href="https://github.com/stephencelis/ghi"&gt;ghi&lt;/a&gt; - a command line github issues client. Out of the box it only supports a single github account. Personally I like to separate my private from work related coding though. Thus adding two aliases to ~/.bashrc allows me to quickly switch from one account …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I have recently started to use &lt;a href="https://github.com/stephencelis/ghi"&gt;ghi&lt;/a&gt; - a command line github issues client. Out of the box it only supports a single github account. Personally I like to separate my private from work related coding though. Thus adding two aliases to ~/.bashrc allows me to quickly switch from one account to the other (a task that is really tedious in the browser):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# aliases for ghi (github client)&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; ghi-USER-A&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;GHI_TOKEN=&amp;quot;A git oauth token&amp;quot; &amp;amp;&amp;amp; /opt/ghi&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; ghi-USER-B&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;GHI_TOKEN=&amp;quot;B git oauth token&amp;quot; &amp;amp;&amp;amp; /opt/ghi&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Btw. one gets the hashes from running ghi without GHI_TOKEN set and no [ghi] block in ~/.gitconfig.&lt;/p&gt;</content></entry><entry><title>Check Jenkins for running executors ("busyExecutors") remotely via curl</title><link href="http://www.lemmster.de/check-jenkins-for-running-executors-remotely-via-curl.html" rel="alternate"></link><published>2013-06-17T07:37:06+02:00</published><updated>2013-06-17T07:37:06+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-17:/check-jenkins-for-running-executors-remotely-via-curl.html</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -s http://localhost/api/json?depth&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; python -c &lt;span class="s1"&gt;&amp;#39;import json,sys;obj=json.load(sys.stdin);print obj[&amp;quot;assignedLabels&amp;quot;][0][&amp;quot;busyExecutors&amp;quot;]&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -s http://localhost/api/json?depth&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; python -c &lt;span class="s1"&gt;&amp;#39;import json,sys;obj=json.load(sys.stdin);print obj[&amp;quot;assignedLabels&amp;quot;][0][&amp;quot;busyExecutors&amp;quot;]&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Custom Twitter timeline rss feed after v1 API retirement</title><link href="http://www.lemmster.de/custom-twitter-timeline-rss-feed-after-v1-api-retirement.html" rel="alternate"></link><published>2013-06-15T16:29:34+02:00</published><updated>2013-06-15T16:29:34+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-15:/custom-twitter-timeline-rss-feed-after-v1-api-retirement.html</id><summary type="html">&lt;p&gt;So Twitter has decided to retire its v1 API, breaking everybody's timeline rss feeds (which I happened to use for my blog). Fortunately my twitter client (znc on top of bitblee) logs all my tweets to a text file so create my own rss feed is almost trivial (I haven't …&lt;/p&gt;</summary><content type="html">&lt;p&gt;So Twitter has decided to retire its v1 API, breaking everybody's timeline rss feeds (which I happened to use for my blog). Fortunately my twitter client (znc on top of bitblee) logs all my tweets to a text file so create my own rss feed is almost trivial (I haven't bothered to correctly link my tweets though. I plan to eventually migrate away from twitter anyway).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;grep -h &lt;span class="s1"&gt;&amp;#39;&amp;lt;markus&amp;gt;&amp;#39;&lt;/span&gt; .znc/users/markus/moddata/log/&lt;span class="se"&gt;\#&lt;/span&gt;twitter_lemmster_*.log &lt;span class="se"&gt;\&lt;/span&gt;
&amp;gt; foo.tmp &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; tac foo.tmp &lt;span class="p"&gt;|&lt;/span&gt; head -3 &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;s/&amp;lt;markus&amp;gt; //g&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
~/bin/lines2rss.sh &lt;span class="s1"&gt;&amp;#39;tweets&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://www.lemmster.de&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;whatever&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
&amp;gt; /var/www/tweets.xml
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;line2rss.sh:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;rss version=&amp;quot;2.0&amp;quot; xmlns:atom=&amp;quot;http://www.w3.org/2005/Atom&amp;quot; xmlns:dc=&amp;quot;http://purl.org/dc/elements/1.1/&amp;quot;&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;channel&amp;gt;&amp;lt;title&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;lt;/title&amp;gt;&amp;lt;link&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;lt;/link&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;description&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$3&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;lt;/description&amp;gt;&amp;lt;language&amp;gt;en&amp;lt;/language&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;lastBuildDate&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date -R&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;lt;/lastBuildDate&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;pubDate&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date -R&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;lt;/pubDate&amp;gt;&amp;#39;&lt;/span&gt;

&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="nb"&gt;read&lt;/span&gt; line &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
&lt;span class="nb"&gt;let&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;i += 1&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;item&amp;gt;&amp;lt;title&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$line&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;lt;/title&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;guid&amp;gt;`echo &lt;/span&gt;&lt;span class="nv"&gt;$line&lt;/span&gt;&lt;span class="s2"&gt; | md5sum | cut -f 1 -d &amp;#39; &amp;#39;`&amp;lt;/guid&amp;gt;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;pubDate&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date -d &lt;span class="s2"&gt;&amp;quot;-&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt; min&amp;quot;&lt;/span&gt; -R&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;lt;/pubDate&amp;gt;&amp;lt;/item&amp;gt;&amp;#39;&lt;/span&gt;

&lt;span class="k"&gt;done&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;/channel&amp;gt;&amp;lt;/rss&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</content></entry><entry><title>Free and paid for Raspberry Pi hosting/colocation</title><link href="http://www.lemmster.de/free-and-paid-for-raspberry-pi-hosting.html" rel="alternate"></link><published>2013-06-15T13:37:18+02:00</published><updated>2013-06-15T13:37:18+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-15:/free-and-paid-for-raspberry-pi-hosting.html</id><summary type="html">&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Austria: http://www.edis.at/de/server/colocation/oesterreich/raspberrypi/ (send in - hosting for free)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Netherlands****: http://www.webhostingtalk.com/showthread.php?t=1247549 (send in or buy a Pi - IPv6 hosting for free, IPv4 ~2,5€)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sweden: https://fsdata.se/server/raspberry-pi-colocation/ (send in - hosting for free, only Swedish …&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Austria: http://www.edis.at/de/server/colocation/oesterreich/raspberrypi/ (send in - hosting for free)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Netherlands****: http://www.webhostingtalk.com/showthread.php?t=1247549 (send in or buy a Pi - IPv6 hosting for free, IPv4 ~2,5€)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sweden: https://fsdata.se/server/raspberry-pi-colocation/ (send in - hosting for free, only Swedish customers accepted)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Netherlands: http://raspberrycolocation.com/home/ (send in or buy a Pi (takes ~90 days), hosting for free)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Belgium: http://www.fusa.be/en/hosting/special_colocation (send in, 15€ setup, 1,5€ monthly)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Australia: http://www.micron21.com/raspberrypi-colocation.php (send in, $10 IPv4 + data plan starting at $20)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;UK: http://www.retrosnub.co.uk/raspberrycolo (send in, hosting £2,50/month)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;http://shop.pi3g.com/ sells  ready to use Pis and delivers them to PCExtreme directly.&lt;/p&gt;</content></entry><entry><title>Call freetz' wake on lan (wol) via curl</title><link href="http://www.lemmster.de/call-freetz-wake-on-lan-wol-via-curl.html" rel="alternate"></link><published>2013-06-04T17:35:17+02:00</published><updated>2013-06-04T17:35:17+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-04:/call-freetz-wake-on-lan-wol-via-curl.html</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -d &lt;span class="s2"&gt;&amp;quot;mac=AB:CD:EF:12:34:56*&amp;amp;interf;=lan&amp;quot;&lt;/span&gt; http://fritz.box:84/cgi-bin/wake.cgi
&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -d &lt;span class="s2"&gt;&amp;quot;mac=AB:CD:EF:12:34:56*&amp;amp;interf;=lan&amp;quot;&lt;/span&gt; http://fritz.box:84/cgi-bin/wake.cgi
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>scanbuttond on fritz 7390</title><link href="http://www.lemmster.de/scanbuttond-on-fritz-7390.html" rel="alternate"></link><published>2013-06-03T08:33:14+02:00</published><updated>2013-06-03T08:33:14+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-03:/scanbuttond-on-fritz-7390.html</id><summary type="html">&lt;p&gt;A recent &lt;a href="https://github.com/olistudent/freetz/commit/ac4707b3c543a211c94fb0cf1965cd94c11a20d2"&gt;commit&lt;/a&gt; integrates my pull request to incorporate &lt;a href="http://scanbuttond.sourceforge.net/"&gt;scanbuttond&lt;/a&gt; into &lt;a href="http://freetz.org/"&gt;freetz&lt;/a&gt;, a custom firmware for Fritz Box 7390. scanbuttond's job description is, to trigger a script whenever a button is pressed on a scanner. This is all I need in order to turn my 7390 and an old (three …&lt;/p&gt;</summary><content type="html">&lt;p&gt;A recent &lt;a href="https://github.com/olistudent/freetz/commit/ac4707b3c543a211c94fb0cf1965cd94c11a20d2"&gt;commit&lt;/a&gt; integrates my pull request to incorporate &lt;a href="http://scanbuttond.sourceforge.net/"&gt;scanbuttond&lt;/a&gt; into &lt;a href="http://freetz.org/"&gt;freetz&lt;/a&gt;, a custom firmware for Fritz Box 7390. scanbuttond's job description is, to trigger a script whenever a button is pressed on a scanner. This is all I need in order to turn my 7390 and an old (three button) USB scanner into an always on snail mail to email converter (think paperless office). Once a freetz image with scanbuttond &amp;amp; sane for your scanner model has been backed, “sane-find-scanner” is uncommented in the upper box on the &lt;a href="http://fritz.box:81/cgi-bin/conf/scanbuttond"&gt;freetz webfrontend&lt;/a&gt;. The script below is pasted into the lower “Script for button” box (adapt the email addresses EMAIL_* accordingly). If you find that you cannot paste it directly, insert the script into /mod/etc/conf/scanbuttond.cfg via ssh/telnet.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/sh&lt;/span&gt;

&lt;span class="nv"&gt;TMPFILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;scan.pnm&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;LOCKFILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/var/media/ftp/tmp/copy.lock&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;RECEIPIENT_FILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/var/media/ftp/tmp/receipient.txt&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;MODE_FILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/var/media/ftp/tmp/mode.txt&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;PAGE_NUM_FILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/var/media/ftp/tmp/page_num.txt&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# to in notification mails (mapped to button A and B)&lt;/span&gt;
&lt;span class="nv"&gt;EMAIL_A&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;email1@example.com
&lt;span class="nv"&gt;EMAIL_B&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;email2@example.com

&lt;span class="c1"&gt;# from header in notification mails&lt;/span&gt;
&lt;span class="nv"&gt;EMAIL_FROM&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;scanner@example.com

&lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nv"&gt;$1&lt;/span&gt; in
    &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                &lt;span class="c1"&gt;# Set color mode to &amp;quot;gray&amp;quot; and exit&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -e &lt;span class="nv"&gt;$MODE_FILE&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                 logger &lt;span class="s2"&gt;&amp;quot;button 1 has been pressed on &lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt;, setting color mode&amp;quot;&lt;/span&gt;
                 &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Color&amp;quot;&lt;/span&gt; &amp;gt; &lt;span class="nv"&gt;$MODE_FILE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
                &lt;span class="k"&gt;fi&lt;/span&gt;

                &lt;span class="c1"&gt;# Set receipient to EMAIL_A and exit&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -e &lt;span class="nv"&gt;$RECEIPIENT_FILE&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                 logger &lt;span class="s2"&gt;&amp;quot;button 1 has been pressed on &lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt;, setting receiver&amp;quot;&lt;/span&gt;
                 &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$EMAIL_A&lt;/span&gt; &amp;gt; &lt;span class="nv"&gt;$RECEIPIENT_FILE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
                &lt;span class="k"&gt;fi&lt;/span&gt;
                &lt;span class="p"&gt;;;&lt;/span&gt;
        &lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                &lt;span class="c1"&gt;# Set color mode to &amp;quot;Color&amp;quot;&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -e &lt;span class="nv"&gt;$MODE_FILE&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                 logger &lt;span class="s2"&gt;&amp;quot;button 2 has been pressed on &lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt;, setting color mode&amp;quot;&lt;/span&gt;
                 &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Gray&amp;quot;&lt;/span&gt; &amp;gt; &lt;span class="nv"&gt;$MODE_FILE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
                &lt;span class="k"&gt;fi&lt;/span&gt;

                &lt;span class="c1"&gt;# Set receipient to EMAIL_B and exit&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -e &lt;span class="nv"&gt;$RECEIPIENT_FILE&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                 logger &lt;span class="s2"&gt;&amp;quot;button 2 has been pressed on &lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt;, setting receiver&amp;quot;&lt;/span&gt;
                 &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$EMAIL_B&lt;/span&gt; &amp;gt; &lt;span class="nv"&gt;$RECEIPIENT_FILE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
                &lt;span class="k"&gt;fi&lt;/span&gt;

                logger &lt;span class="s2"&gt;&amp;quot;button 1 has been pressed on &lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; ! mkdir -p &lt;span class="nv"&gt;$LOCKFILE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                 logger &lt;span class="s2"&gt;&amp;quot;Error: scanning already in progress for &lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
                 &lt;span class="nb"&gt;exit&lt;/span&gt;
                &lt;span class="k"&gt;fi&lt;/span&gt;

                mkdir -p /var/media/ftp/tmp/scans

                &lt;span class="c1"&gt;# Find out last page number and increment or initialize to 0&lt;/span&gt;
                &lt;span class="nb"&gt;test&lt;/span&gt; ! -e &lt;span class="nv"&gt;$PAGE_NUM_FILE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt; &amp;gt; &lt;span class="nv"&gt;$PAGE_NUM_FILE&lt;/span&gt;
                &lt;span class="nv"&gt;PAGE_NUM&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;cat &lt;span class="nv"&gt;$PAGE_NUM_FILE&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
                &lt;span class="nb"&gt;let&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;PAGE_NUM += 1&amp;quot;&lt;/span&gt;
                &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$PAGE_NUM&lt;/span&gt; &amp;gt; &lt;span class="nv"&gt;$PAGE_NUM_FILE&lt;/span&gt;

                logger &lt;span class="s2"&gt;&amp;quot;Starting to scan document&amp;quot;&lt;/span&gt;
                &lt;span class="nv"&gt;SCAN_OPTIONS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;--resolution 600 --contrast 10 --brightness 0 --format=pnm&amp;quot;&lt;/span&gt;
                scanimage --verbose --device-name &lt;span class="nv"&gt;$2&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
                          --mode Gray -x &lt;span class="m"&gt;210&lt;/span&gt; -y &lt;span class="m"&gt;297&lt;/span&gt; &lt;span class="nv"&gt;$SCAN_OPTIONS&lt;/span&gt; &amp;gt; /var/media/ftp/tmp/scans/&lt;span class="nv"&gt;$PAGE_NUM$TMPFILE&lt;/span&gt;

                &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Releasing lock file&amp;quot;&lt;/span&gt;
                rm -rf &lt;span class="nv"&gt;$LOCKFILE&lt;/span&gt;
                &lt;span class="p"&gt;;;&lt;/span&gt;
        &lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                &lt;span class="c1"&gt;# convert each page to pdf&lt;/span&gt;
                &lt;span class="k"&gt;for&lt;/span&gt; f in &lt;span class="sb"&gt;`&lt;/span&gt;find /var/media/ftp/tmp/scans/*.pnm&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
                 logger &lt;span class="s2"&gt;&amp;quot;Converting pnm documents to jpg&amp;quot;&lt;/span&gt;
                 pnmtojpeg --quality &lt;span class="m"&gt;25&lt;/span&gt; &lt;span class="nv"&gt;$f&lt;/span&gt; &amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;f&lt;/span&gt;&lt;span class="p"&gt;/pnm/jpg&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
                 &lt;span class="nv"&gt;FILES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$FILES&lt;/span&gt;,&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;f&lt;/span&gt;&lt;span class="p"&gt;/pnm/jpg&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
                &lt;span class="k"&gt;done&lt;/span&gt;

        &lt;span class="c1"&gt;# Archive pnm files&lt;/span&gt;
                logger &lt;span class="s2"&gt;&amp;quot;Archiving pnm documents&amp;quot;&lt;/span&gt;
        &lt;span class="nv"&gt;NOW&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;date +%s&lt;span class="sb"&gt;`&lt;/span&gt;
        mkdir -p /var/media/ftp/scans/&lt;span class="nv"&gt;$NOW&lt;/span&gt;
        mv /var/media/ftp/tmp/scans/*.pnm /var/media/ftp/scans/&lt;span class="nv"&gt;$NOW&lt;/span&gt;

                &lt;span class="c1"&gt;# send final concatenated pdf page to receipient&lt;/span&gt;
                &lt;span class="nv"&gt;RECEIPIENT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;cat &lt;span class="nv"&gt;$RECEIPIENT_FILE&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
                logger &lt;span class="s2"&gt;&amp;quot;Sending document to &lt;/span&gt;&lt;span class="nv"&gt;$RECEIPIENT&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; sftp://fritz.box/var/media/ftp/scans/&lt;span class="nv"&gt;$NOW&lt;/span&gt; &amp;gt; /var/media/ftp/tmp/body.txt
        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;for i in \`ls\`; do cd \$i &amp;amp;&amp;amp; pnm2pdf.sh &amp;amp;&amp;amp; cd ..; done&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /var/media/ftp/tmp/body.txt
        mailer -s Scan -f &lt;span class="nv"&gt;$EMAIL_FROM&lt;/span&gt; -t &lt;span class="nv"&gt;$RECEIPIENT&lt;/span&gt; -i /var/media/ftp/tmp/body.txt -d &lt;span class="nv"&gt;$FILES&lt;/span&gt;

                logger &lt;span class="s2"&gt;&amp;quot;Cleaning up intermediate files&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;test&lt;/span&gt; -e /var/media/ftp/tmp/body.txt &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm /var/media/ftp/tmp/body.txt
                &lt;span class="nb"&gt;test&lt;/span&gt; -e &lt;span class="nv"&gt;$MODE_FILE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm &lt;span class="nv"&gt;$MODE_FILE&lt;/span&gt;
                &lt;span class="nb"&gt;test&lt;/span&gt; -e &lt;span class="nv"&gt;$RECEIPIENT_FILE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm &lt;span class="nv"&gt;$RECEIPIENT_FILE&lt;/span&gt;
                &lt;span class="nb"&gt;test&lt;/span&gt; -e &lt;span class="nv"&gt;$PAGE_NUM_FILE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm &lt;span class="nv"&gt;$PAGE_NUM_FILE&lt;/span&gt;
                &lt;span class="nb"&gt;test&lt;/span&gt; -d /var/media/ftp/tmp/scans/ &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/media/ftp/tmp/scans/
                &lt;span class="p"&gt;;;&lt;/span&gt;
&lt;span class="k"&gt;esac&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;The following finite state machine/automata shows how the buttons are programmed:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.lemmster.de/uploads/scanbuttond.png"&gt;&lt;img alt="scanbuttond" src="http://www.lemmster.de/uploads/scanbuttond.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;If you occasionally find yourself forgetting to press the end button (#3) after the last page has been scanned, using cron to periodically check for stale tmp/ folders does the job for you. Assuming crond is part of your freetz image, just add a the following line on the &lt;a href="http://fritz.box:81/cgi-bin/file/mod/crontab"&gt;crond webfrontend&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;*/45 * * * * if [ `find /var/media/ftp/tmp/scans/ \
  -iname *.pnm -type f -mmin +15  2&amp;gt;/dev/null | wc -l` -gt 0 ]; \
  then /var/mod/etc/scanbuttond/buttonpressed.sh 3; fi
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Multiple locations for openssh's AuthorizedKeysFile useful in combination with encrypted home dirs (ecryptfs)</title><link href="http://www.lemmster.de/multiple-locations-for-opensshs-authorizedkeysfile-useful-in-combination-with-encrypted-home-dirs-ecryptfs.html" rel="alternate"></link><published>2013-06-02T10:56:01+02:00</published><updated>2013-06-02T10:56:01+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-02:/multiple-locations-for-opensshs-authorizedkeysfile-useful-in-combination-with-encrypted-home-dirs-ecryptfs.html</id><summary type="html">&lt;p&gt;When using disk encryption (e.g. ecryptfs) to protect your private home dir data, ssh pubkey authentication breaks as a side effect. It breaks for obvious reasons though. Your authorized_keys file lives in ~/.ssh/ which is intentionally encrypted when you are not logged in.&lt;/p&gt;
&lt;p&gt;A trivial change to still allow …&lt;/p&gt;</summary><content type="html">&lt;p&gt;When using disk encryption (e.g. ecryptfs) to protect your private home dir data, ssh pubkey authentication breaks as a side effect. It breaks for obvious reasons though. Your authorized_keys file lives in ~/.ssh/ which is intentionally encrypted when you are not logged in.&lt;/p&gt;
&lt;p&gt;A trivial change to still allow password less/free logins, is to add a second authorized_keys file location to /etc/ssh/sshd_config. Just add/change AuthorizedKeysFile to point to '%h/.ssh/authorized_keys /etc/ssh/%u/authorized_keys'. This makes ssh first look into ~/.ssh/ and fall back to /etc/ssh/~/ if no valid authorized_keys file can be found (make sure to chown ownership of the latter to the login user).&lt;/p&gt;</content></entry><entry><title>Remotely check if XBMC (&gt;=Frodo) is playing content with curl</title><link href="http://www.lemmster.de/remotely-check-if-xbmc-frodo-is-playing-content-with-curl.html" rel="alternate"></link><published>2013-06-01T08:30:51+02:00</published><updated>2013-06-01T08:30:51+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-06-01:/remotely-check-if-xbmc-frodo-is-playing-content-with-curl.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.xbmc.org/"&gt;XBMC&lt;/a&gt; exposes a &lt;a href="http://wiki.xbmc.org/index.php?title=JSON-RPC_API/v4"&gt;JSON API&lt;/a&gt; that allows you to query its status and remotely control it. I need the API to check if XBMC is currently playing content (manifesting itself in a running player) and if not, automatically shut down the living room pc to save energy. Fortunately, the API …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://www.xbmc.org/"&gt;XBMC&lt;/a&gt; exposes a &lt;a href="http://wiki.xbmc.org/index.php?title=JSON-RPC_API/v4"&gt;JSON API&lt;/a&gt; that allows you to query its status and remotely control it. I need the API to check if XBMC is currently playing content (manifesting itself in a running player) and if not, automatically shut down the living room pc to save energy. Fortunately, the API comes with the &lt;a href="http://wiki.xbmc.org/index.php?title=JSON-RPC_API/v4#Player.GetActivePlayers"&gt;Player.GetActivePlayers&lt;/a&gt; call. As the name indicates, it returns the currently active players meaning no players no activity and thus the machine can shut down. Combining curl with a few simple python parsing returns a number for active players.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -s -u xbmc:xbmc -X POST -H &lt;span class="s2"&gt;&amp;quot;Content-Type: application/json&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-d &lt;span class="s1"&gt;&amp;#39;{&amp;quot;jsonrpc&amp;quot;: &amp;quot;2.0&amp;quot;, &amp;quot;method&amp;quot;: &amp;quot;Player.GetActivePlayers&amp;quot;, &amp;quot;id&amp;quot;: 1}&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
http://localhost:8080/jsonrpc &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
python -c &lt;span class="s1"&gt;&amp;#39;import json,sys;obj=json.load(sys.stdin);print len(obj[&amp;quot;result&amp;quot;])&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>(Squid) proxy and p2</title><link href="http://www.lemmster.de/squid-proxy-and-p2.html" rel="alternate"></link><published>2013-05-31T18:09:49+02:00</published><updated>2013-05-31T18:09:49+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-05-31:/squid-proxy-and-p2.html</id><summary type="html">&lt;p&gt;If you happen to run a (local) proxy underneath you continuous build server, you might be a little bit surprised to learn that caching does show its full potential. E.g. if you look at your squid access log files they will look similar to:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;214 188.40.71.70 …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;If you happen to run a (local) proxy underneath you continuous build server, you might be a little bit surprised to learn that caching does show its full potential. E.g. if you look at your squid access log files they will look similar to:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;214 188.40.71.70 TCP_REFRESH_UNMODIFIED/200 44988 GET http://download.eclipse.org/releases/kepler/201305310900/plugins/org.eclipse.equinox.common_3.6.200.v20130402-1505.jar.pack.gz - DIRECT/198.41.30.199 application/x-gzip 1370018697.496
222 188.40.71.70 TCP_REFRESH_UNMODIFIED/200 50531 GET http://download.eclipse.org/releases/kepler/201305310900/plugins/org.eclipse.equinox.preferences_3.5.100.v20130422-1538.jar.pack.gz - DIRECT/198.41.30.199 application/x-gzip 1370018697.513
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This essentially says that you don't hit the local cache, but want the content reloaded. What you normally want to see though, are cache hits manifesting in TCP_MEM_HIT statements.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 188.40.71.70 TCP_MEM_HIT/200 77323 GET http://download.eclipse.org/releases/kepler/201305310900/plugins/org.objectweb.asm_3.3.1.v201105211655.jar.pack.gz - NONE/- application/x-gzip 1370018314.277      
2 188.40.71.70 TCP_MEM_HIT/200 473229 GET http://download.eclipse.org/releases/kepler/201305310900/plugins/org.objectweb.asm.source_3.3.1.v201105211655.jar.pack.gz - NONE/- application/x-gzip 1370018314.406
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;a href="https://bugs.eclipse.org/249990"&gt;underlying problem/fix&lt;/a&gt; has not been fully diagnosed yet, but configuring squid to ignore reload requests for certain file types fixes the symptoms (an OSGi bundle carries its version number in its name, thus caching this type of files should not result in reading stale content). Just add the following &lt;a href="http://www.squid-cache.org/Doc/config/refresh_pattern/"&gt;refresh_pattern&lt;/a&gt; to the squid proxy that is supposed to speed up your builds.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/squid/squid.conf
refresh_pattern -i _[0-9v.-]+\.jar(\.pack\.gz)?$ 480 20% 4320 ignore-no-cache ignore-no-store override-expire override-lastmod ignore-reload
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Below you see the cache stats for squid and all is green. :)&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.lemmster.de/uploads/squid_requests-day.png"&gt;&lt;img alt="squid_requests-day" src="http://www.lemmster.de/uploads/squid_requests-day.png"&gt;&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>Quick'n'dirty Apache Felix webconsole on (recent) Equinox</title><link href="http://www.lemmster.de/quickndirty-apache-felix-webconsole-on-recent-equinox-3.html" rel="alternate"></link><published>2013-05-24T16:24:50+02:00</published><updated>2013-05-24T16:24:50+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-05-24:/quickndirty-apache-felix-webconsole-on-recent-equinox-3.html</id><summary type="html">&lt;p&gt;Below you find a instructions to install Apache Felix webconsole on a running Equinox. Just paste this into the console and start bundle "org.apache.felix.webconsole" and "org.eclipse.equinox.http.jetty" afterwards.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16 …&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</summary><content type="html">&lt;p&gt;Below you find a instructions to install Apache Felix webconsole on a running Equinox. Just paste this into the console and start bundle "org.apache.felix.webconsole" and "org.eclipse.equinox.http.jetty" afterwards.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;
&lt;span class="c1"&gt;# On the OSGi console install the following bundles&lt;/span&gt;
&lt;span class="c1"&gt;# (optionally set -Dorg.osgi.service.http.port=9980 to change the default http port)&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;services org.osgi.service.http.HttpService&amp;quot; to check for correctly installed server and port&lt;/span&gt;

&lt;span class="c1"&gt;# common http server deps&lt;/span&gt;
install ftp://ftp.osuosl.org/pub/eclipse/tools/orbit/downloads/drops/R20130517111416/repository/plugins/org.apache.commons.io_1.4.0.v20081110-1000.jar
install ftp://ftp.osuosl.org/pub/eclipse/tools/orbit/downloads/drops/R20130517111416/repository/plugins/org.apache.commons.fileupload_1.2.2.v20111214-1400.jar

&lt;span class="c1"&gt;# equinox.http &amp;lt;= http servlet 2.1&lt;/span&gt;
&lt;span class="c1"&gt;#install ftp://ftp.osuosl.org/pub/eclipse/equinox/drops/R-3.7.2-201202080800/org.eclipse.equinox.http_1.0.500.v20110413.jar&lt;/span&gt;
&lt;span class="c1"&gt;#install ftp://ftp.osuosl.org/pub/eclipse/tools/orbit/downloads/drops/R20130517111416/repository/plugins/javax.servlet_2.4.0.v200806031604.jar&lt;/span&gt;

&lt;span class="c1"&gt;# equinox.jetty &amp;lt;= http server 2.4&lt;/span&gt;
install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.equinox.http.jetty_3.0.1.v20121109-203239.jar
install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.equinox.http.servlet_1.1.300.v20120912-130548.jar
install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.equinox.http.registry_1.1.200.v20120912-130548.jar

install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/javax.servlet_3.0.0.v201112011016.jar

install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.jetty.continuation_8.1.3.v20120522.jar
install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.jetty.http_8.1.3.v20120522.jar
install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.jetty.io_8.1.3.v20120522.jar
install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.jetty.security_8.1.3.v20120522.jar
install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.jetty.server_8.1.3.v20120522.jar
install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.jetty.servlet_8.1.3.v20120522.jar
install ftp://ftp.osuosl.org/pub/eclipse/releases/juno/201303010900/plugins/org.eclipse.jetty.util_8.1.3.v20120522.jar

&lt;span class="c1"&gt;# webconsole&lt;/span&gt;
install ftp://ftp.osuosl.org/pub/apache/felix/org.apache.felix.webconsole-4.2.0.jar

&lt;span class="c1"&gt;## Optionally&lt;/span&gt;

&lt;span class="c1"&gt;# webconsole plugins&lt;/span&gt;
install ftp://ftp.osuosl.org/pub/apache/felix/org.apache.felix.webconsole.plugins.ds-1.0.0.jar
install ftp://ftp.osuosl.org/pub/apache/felix/org.apache.felix.webconsole.plugins.memoryusage-1.0.4.jar
install ftp://ftp.osuosl.org/pub/apache/felix/org.apache.felix.webconsole.plugins.event-1.0.2.jar

&lt;span class="c1"&gt;# xray plugin (http://softwaresimplexity.blogspot.de/2012/05/x-rays-for-osgi.html) (http://repo.jpm4j.org/#!/p/sha/b9cd47a5ad2f3abd4e9d89dffa65772c3674c042//0.0.0)&lt;/span&gt;
install ftp://ftp.osuosl.org/pub/eclipse/tools/orbit/downloads/drops/R20130827064939/repository/plugins/org.json_1.0.0.v201011060100.jar
install http://repo.jpm4j.org/rest/bundle/51C83986E4B06EF1574B84F7/d213fd63f68c9e10deac51e3cda1a6ac43b44834
install http://repo.jpm4j.org/rest/bundle/51C83986E4B06EF1574B84F7/b9cd47a5ad2f3abd4e9d89dffa65772c3674c042

&lt;span class="c1"&gt;## Finally&lt;/span&gt;
&lt;span class="c1"&gt;# Go to: http://admin:admin@localhost:9980/system/console/bundles&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</content></entry><entry><title>Monitor AVM fritz box 7390 with Munin</title><link href="http://www.lemmster.de/monitor-avm-fritz-box-7390-with-munin.html" rel="alternate"></link><published>2013-05-23T12:31:29+02:00</published><updated>2013-05-23T12:31:29+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-05-23:/monitor-avm-fritz-box-7390-with-munin.html</id><summary type="html">&lt;p&gt;These days it apparently has become important again to monitor how much traffic one uses. Otherwise you might end up with pre-internet-era link speed (thanks to capital t here in Germany). So lets configure a (running) munin instance to monitor the bandwidth usage of your AVM fritz box (7390).&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Download …&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;</summary><content type="html">&lt;p&gt;These days it apparently has become important again to monitor how much traffic one uses. Otherwise you might end up with pre-internet-era link speed (thanks to capital t here in Germany). So lets configure a (running) munin instance to monitor the bandwidth usage of your AVM fritz box (7390).&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Download avm-fritzbox-wan-traffic from &lt;a href="https://github.com/munin-monitoring/contrib/blob/master/plugins/network/avm-fritzbox-wan-traffic"&gt;github&lt;/a&gt; or &lt;a href="http://munin-monitoring.org/browser/munin-contrib/plugins/network/avm-fritzbox-wan-traffic"&gt;munin-monitoring&lt;/a&gt; directly&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;You might have to change '$host' to something resolvable&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Move avm-fritzbox-wan-traffic to e.g. /usr/local/share/munin/plugins/&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;apt-get install php (if it ain't installed yet)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ln -s /usr/local/share/munin/plugins/avm-fritzbox-wan-traffic /etc/munin/plugins/avm-fritzfox-wan-traffic&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add “[avm-fritzbox-wan-traffic] \ user nobody” to /etc/munin/plugins-conf.d/munin-node&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Restart munin-node with “service munin-node restart”&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;If you happen to run freetz, make sure upnp does not get removed (“Removal patches” &amp;gt; “Remove UPnP (igdd/upnp)” and “Other patches” &amp;gt; “Disable igd/upnp”)&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;</content></entry><entry><title>Buckminster rmap to p2 (composite) repository metadata</title><link href="http://www.lemmster.de/buckminster-rmap-to-p2-composite-repository-metadata-2.html" rel="alternate"></link><published>2013-05-22T15:50:30+02:00</published><updated>2013-05-22T15:50:30+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-05-22:/buckminster-rmap-to-p2-composite-repository-metadata-2.html</id><summary type="html">&lt;p&gt;ECF has been using an &lt;a href="http://git.eclipse.org/c/ecf/org.eclipse.ecf.git/tree/releng/org.eclipse.ecf.releng.bm/rmap2b3aggr.xsl"&gt;rmap to b3aggr&lt;/a&gt; xslt stylesheet for a while now, and today I needed a similar stylesheet to convert to p2 composite repositories (single sourcing repositories feed from Buckminster to the p2 director). It takes an rmap and spits out composite repository metadata referring to all …&lt;/p&gt;</summary><content type="html">&lt;p&gt;ECF has been using an &lt;a href="http://git.eclipse.org/c/ecf/org.eclipse.ecf.git/tree/releng/org.eclipse.ecf.releng.bm/rmap2b3aggr.xsl"&gt;rmap to b3aggr&lt;/a&gt; xslt stylesheet for a while now, and today I needed a similar stylesheet to convert to p2 composite repositories (single sourcing repositories feed from Buckminster to the p2 director). It takes an rmap and spits out composite repository metadata referring to all http:// and ftp:// provider uris in the rmap. For an example check out this &lt;a href="https://raw.github.com/kuppe/epp.packages/master/features/org.eclipse.epp.allpackages.feature/epp.rmap"&gt;rmap&lt;/a&gt; and the &lt;a href="http://download.vogella.com/p2/M-MASTER-voclipse/workspace/p2repo/"&gt;generated metadata&lt;/a&gt;. As a generator use&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;standard&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;xsltproc --stringparam timestamp $((`date +%s * 1000)) --stringparam 
repository file:///a/local/p2/repo/ rmap2compositeRepository.xsl my.rmap&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In case anybody else needs it, here is the xslt stylesheet:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="k"&gt;&amp;lt;xsl:stylesheet&lt;/span&gt; &lt;span class="na"&gt;version=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1.0&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;xmlns:xsl=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/1999/XSL/Transform&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;xmlns:bm=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.eclipse.org/buckminster/RMap-1.0&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;&amp;lt;xsl:output&lt;/span&gt; &lt;span class="na"&gt;method=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;xml&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;indent=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;encoding=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

    &lt;span class="k"&gt;&amp;lt;xsl:strip-space&lt;/span&gt; &lt;span class="na"&gt;elements=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;*&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

    &lt;span class="c"&gt;&amp;lt;!-- overwrite via parameters --&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;&amp;lt;xsl:param&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;repository&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;file:///dev/null&lt;span class="k"&gt;&amp;lt;/xsl:param&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;&amp;lt;xsl:param&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;vogella Packages Repository&lt;span class="k"&gt;&amp;lt;/xsl:param&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;&amp;lt;xsl:param&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;timestamp&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;13691573970000&lt;span class="k"&gt;&amp;lt;/xsl:param&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;&amp;lt;xsl:param&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;org.eclipse.equinox.internal.p2.artifact.repository.CompositeArtifactRepository&lt;span class="k"&gt;&amp;lt;/xsl:param&amp;gt;&lt;/span&gt;

    &lt;span class="k"&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class="na"&gt;match=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bm:provider&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="c"&gt;&amp;lt;!-- only accept public http|ftp repositories --&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;&amp;lt;xsl:if&lt;/span&gt; &lt;span class="na"&gt;test=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;starts-with(bm:uri/@format, &amp;#39;http://&amp;#39;) or starts-with(bm:uri/@format, &amp;#39;ftp://&amp;#39;)&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                &lt;span class="c"&gt;&amp;lt;!-- remove dangling ?importType=binary --&amp;gt;&lt;/span&gt;
                &lt;span class="k"&gt;&amp;lt;xsl:choose&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class="k"&gt;&amp;lt;xsl:when&lt;/span&gt; &lt;span class="na"&gt;test=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;contains(bm:uri/@format, &amp;#39;?importType=binary&amp;#39;)&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;child&lt;/span&gt; &lt;span class="na"&gt;location=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{substring-before(bm:uri/@format, &amp;#39;?importType=binary&amp;#39;)}&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class="k"&gt;&amp;lt;/xsl:when&amp;gt;&lt;/span&gt;
                        &lt;span class="k"&gt;&amp;lt;xsl:otherwise&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;child&lt;/span&gt; &lt;span class="na"&gt;location=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{bm:uri/@format}&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class="k"&gt;&amp;lt;/xsl:otherwise&amp;gt;&lt;/span&gt;
                &lt;span class="k"&gt;&amp;lt;/xsl:choose&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;&amp;lt;/xsl:if&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt;

    &lt;span class="k"&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class="na"&gt;match=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;repository&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;amp;quot;{$title}&amp;amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;{$type}&amp;#39;&lt;/span&gt; &lt;span class="na"&gt;version=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;1.0.0&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

              &lt;span class="nt"&gt;&amp;lt;properties&lt;/span&gt; &lt;span class="na"&gt;size=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;2&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;p2.compressed&amp;#39;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;true&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;property&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;p2.timestamp&amp;#39;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;{$timestamp}&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
              &lt;span class="nt"&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;
              &lt;span class="nt"&gt;&amp;lt;children&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;child&lt;/span&gt; &lt;span class="na"&gt;location=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;{$repository}&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class="c"&gt;&amp;lt;!-- match all the child nodes of the template match=/ node --&amp;gt;&lt;/span&gt;
                &lt;span class="k"&gt;&amp;lt;xsl:apply-templates&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
              &lt;span class="nt"&gt;&amp;lt;/children&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/repository&amp;gt;&lt;/span&gt;

    &lt;span class="k"&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt;

&lt;span class="k"&gt;&amp;lt;/xsl:stylesheet&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Audiobooks2Podcast</title><link href="http://www.lemmster.de/audiobooks2podcast.html" rel="alternate"></link><published>2013-05-20T17:37:09+02:00</published><updated>2013-05-20T17:37:09+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-05-20:/audiobooks2podcast.html</id><summary type="html">&lt;p&gt;As an audiobook addict I have always hated the way audiobook mp3s are handled by the various players. This is because I get my fix from the local public library that rents countless audiobooks pressed on this legacy technology called CDs. Ripping audio CDs to mp3 isn't a problem (it …&lt;/p&gt;</summary><content type="html">&lt;p&gt;As an audiobook addict I have always hated the way audiobook mp3s are handled by the various players. This is because I get my fix from the local public library that rents countless audiobooks pressed on this legacy technology called CDs. Ripping audio CDs to mp3 isn't a problem (it is just annoying), but none of the various mp3 players seems to play the various tracks in correct order. Some seem to use the file name while others read the ID3 track name or any permutation of tags. With a single computer, one can adapt and tag mp3s to whatever the player of choice does. But with today's device proliferation, this becomes hell.
This morning however it occurred to me, that an mp3 player is just the wrong tool to play converted audiobooks. What fits better is a podcast player that is written to play hour long content. One only has to bridge the technology gap that exists between a podcast (single media file) and a ripped audiobook (directory of several small mp3s).Below is a list of bullet point items that outline how I do this on Ubuntu &amp;gt;=12.10 and a Raspberry Pi serving the media.&lt;/p&gt;
&lt;h2&gt;1 Converting audiobook cds to podcast-like mp3s with &lt;a href="http://code.google.com/p/abcde/"&gt;abcde&lt;/a&gt;&lt;/h2&gt;
&lt;h3&gt;1.1 Prerequisites&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;'apt-get install abcde cd-discid cdparanoia libao4 libmusicbrainz-discid-perl libwebservice-musicbrainz-perl libxml-libxml-perl normalize-audio mkcue id3v2 lame –no-install-recommends'&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;'pip install –upgrade eyeD3' (want eyeD3 &amp;gt; 0.7.1 with &lt;a href="https://bitbucket.org/nicfit/eyed3/issue/5/"&gt;CHAP support&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;https://bitbucket.org/nicfit/eyed3/pull-request/3&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Alternatively grep the source from my &lt;a href="https://bitbucket.org/lemmster/eyed3"&gt;git repo directly&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;abcde4ab.sh (abcde for audiobooks)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;wget -O /usr/local/bin/abcde4ab.sh http://www.lemmster.de/uploads/abcde4ab.sh&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;1.2 Convert all cds to single mp3 tracks with chapters&lt;/h3&gt;
&lt;p&gt;Converting an audiobook consisting out of n CDs is as simple as running 'abcde4ab.sh “Artist name” “Audiobook name” totalNumberOfCds'. E.g. to convert Treasure Island by Robert Louis Stevenson on 10 CDs, the command line is 'adbcd4ab.sh “Robert Louis Stevenson” “Treasure Island” 10'. It will output ten single mp3 files with ID3v2 chapters for each individual cd track and other tag tracks accordingly. The ID3 titles are optimized for display in an RSS feed (dircaster).&lt;/p&gt;
&lt;h2&gt;2 Serving converted audiobooks as podcasts&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://www.dircaster.org/"&gt;dircaster&lt;/a&gt;on e.g. a RPi&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;'apt-get install lighttpd php5-cgi &amp;amp;&amp;amp; lighttpd-enable-mod fastcgi-php'&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;'wget -O dircaster.zip http://www.dircaster.org/DirCasterV09j.zip &amp;amp;&amp;amp; unzip dircaster.zip'&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;'vi config_inc.php'&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Copy your audiobooks from step 1.2 to the media/ folder&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;3 Client&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/danieloeh/AntennaPod"&gt;AntennaPod&lt;/a&gt; is a good choice for an Android client. It supports ID3v2 chapters out of the box.&lt;/p&gt;</content></entry><entry><title>Roundcube (0.3.1-6) and lighttpd on Debian Squeeze (immediate logout after login)</title><link href="http://www.lemmster.de/roundcube-0-3-1-6-and-lighttpd-on-debian-squeeze-immediate-logout-after-login.html" rel="alternate"></link><published>2013-05-19T14:27:29+02:00</published><updated>2013-05-19T14:27:29+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-05-19:/roundcube-0-3-1-6-and-lighttpd-on-debian-squeeze-immediate-logout-after-login.html</id><summary type="html">&lt;p&gt;If you experince immediate logouts after successfully loging into roundcube, you have to follow the advice in /usr/share/doc/roundcube-code/NEWS.debian.gz and turn suhosin.session.enrypt off [1]. If you do not want to turn it off globally, it can easily be done for roundcube only:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;If you experince immediate logouts after successfully loging into roundcube, you have to follow the advice in /usr/share/doc/roundcube-code/NEWS.debian.gz and turn suhosin.session.enrypt off [1]. If you do not want to turn it off globally, it can easily be done for roundcube only:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/php5/cgi/conf.d# cat roundcube.ini
&lt;span class="p"&gt;;&lt;/span&gt; see /usr/share/doc/roundcube-code/NEWS.debian.gz
&lt;span class="o"&gt;[&lt;/span&gt;suhosin&lt;span class="o"&gt;]&lt;/span&gt;
suhosin.session.encrypt &lt;span class="o"&gt;=&lt;/span&gt; off
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;[1] http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=549428&lt;/p&gt;</content></entry><entry><title>Generate p2 composite repository metadata from Jenkins (Hudson) jobs on the fly</title><link href="http://www.lemmster.de/generate-p2-composite-repository-metadata-from-jenkins-hudson-jobs-on-the-fly.html" rel="alternate"></link><published>2013-03-27T11:42:59+01:00</published><updated>2013-03-27T11:42:59+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-03-27:/generate-p2-composite-repository-metadata-from-jenkins-hudson-jobs-on-the-fly.html</id><summary type="html">&lt;p&gt;Serving p2 build artifacts from Jenkins is complicated if builds from multiple Jenkins jobs should be aggregated into a master &lt;a href="http://www.vogella.com/blog/2010/04/06/eclipse-p2-composite-repository/"&gt;p2 composite repository&lt;/a&gt;. A rather simple approach to this problem is listed below, that uses Apache to generate compositeArtifacts.xml and compositeContent.xml on the fly.
We (vogella) uses this …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Serving p2 build artifacts from Jenkins is complicated if builds from multiple Jenkins jobs should be aggregated into a master &lt;a href="http://www.vogella.com/blog/2010/04/06/eclipse-p2-composite-repository/"&gt;p2 composite repository&lt;/a&gt;. A rather simple approach to this problem is listed below, that uses Apache to generate compositeArtifacts.xml and compositeContent.xml on the fly.
We (vogella) uses this to generate &lt;a href="http://download.vogella.com/p2/"&gt;repos&lt;/a&gt; for our various Jenkins jobs (e.g the content of compositeArtifacts.xml is generated).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Install Apache and point DocumentRoot to Jenkin's jobs/ directory&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Enable cgi scripts in Apache&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;On Debian or Ubuntu this is &lt;code&gt;a2enmod cgid&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AllowOverride all for the jobs/ directory (needed in order for .htaccess to work)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Clone &lt;a href="https://github.com/lemmy/p2CompositeRepoGenerator"&gt;https://github.com/lemmy/p2CompositeRepoGenerator&lt;/a&gt;into jobs/ and fix file ownership/permissions&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Cloning into a non-empty directory isn't allowed, thus move the content of p2CompositeRepoGenerator/ into jobs/ (including .git)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;chmod +x composite*.xml&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;chown jenkins:nogroup composite*.xml .htaccess p2.index&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Symlinking composite*.xml from individual jobs generates a p2 composite repository for all builds of that Jenkins jobs (contrary to all builds of all jobs)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Open a browser on the corresponding DocumentRoot url and check the content of compositeArtifacts.xml and compositeContent.xml&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;If no repositories show up, check that Jenkins even archives non-zipped p2 repository artifacts during the post build action&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;An internal server errors can best be diagnosed by opening the Apache error log&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The final directory structure should look similar to (the second part lists the structure for our I-build of the eclipse.platform.releng.aggregator) :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jenkins@build:~$ ls -lA jobs/
total &lt;span class="m"&gt;72&lt;/span&gt;
drwxr-xr-x  &lt;span class="m"&gt;8&lt;/span&gt; jenkins nogroup &lt;span class="m"&gt;4096&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;:18 .git
-rw-r--r--  &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup   &lt;span class="m"&gt;28&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;09&lt;/span&gt;:06 .gitignore
-rw-r--r--  &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup  &lt;span class="m"&gt;402&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;09&lt;/span&gt;:02 .htaccess
drwxr-xr-x  &lt;span class="m"&gt;5&lt;/span&gt; jenkins nogroup &lt;span class="m"&gt;4096&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;:42 C-MASTER-e4tools-0.14
drwxr-xr-x  &lt;span class="m"&gt;5&lt;/span&gt; jenkins nogroup &lt;span class="m"&gt;4096&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;:42 I-MASTER-eclipse.platform.releng.aggregator
-rwxr-xr-x  &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup &lt;span class="m"&gt;3192&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;:18 compositeArtifacts.xml
lrwxrwxrwx  &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup   &lt;span class="m"&gt;22&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;09&lt;/span&gt;:02 compositeContent.xml
    -&amp;gt; compositeArtifacts.xml
-rw-r--r--  &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup  &lt;span class="m"&gt;129&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;09&lt;/span&gt;:02 p2.index

jenkins@build:~$ ls -lA jobs/I-MASTER-eclipse.platform.releng.aggregator/
total &lt;span class="m"&gt;68&lt;/span&gt;
drwxr-xr-x   &lt;span class="m"&gt;5&lt;/span&gt; jenkins nogroup  &lt;span class="m"&gt;4096&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;:32 builds
lrwxrwxrwx   &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup    &lt;span class="m"&gt;44&lt;/span&gt; Mar &lt;span class="m"&gt;26&lt;/span&gt; &lt;span class="m"&gt;13&lt;/span&gt;:14 compositeArtifacts.xml
    -&amp;gt; /var/lib/jenkins/jobs/compositeArtifacts.xml
lrwxrwxrwx   &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup    &lt;span class="m"&gt;42&lt;/span&gt; Mar &lt;span class="m"&gt;26&lt;/span&gt; &lt;span class="m"&gt;13&lt;/span&gt;:16 compositeContent.xml
    -&amp;gt; /var/lib/jenkins/jobs/compositeContent.xml
-rw-r--r--   &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup  &lt;span class="m"&gt;6458&lt;/span&gt; Mar &lt;span class="m"&gt;26&lt;/span&gt; &lt;span class="m"&gt;11&lt;/span&gt;:57 config.xml
-rw-r--r--   &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup     &lt;span class="m"&gt;3&lt;/span&gt; Mar &lt;span class="m"&gt;26&lt;/span&gt; &lt;span class="m"&gt;11&lt;/span&gt;:57 nextBuildNumber
lrwxrwxrwx   &lt;span class="m"&gt;1&lt;/span&gt; jenkins nogroup    &lt;span class="m"&gt;11&lt;/span&gt; Mar &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;:42 p2.index -&amp;gt; ../p2.index
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Disclaimer: This is probably not the best idea for busy p2 repositories. The script a) scans the directory tree for every invocation and b) sets the timestamp to $now (messing up caches). &lt;a href="http://wiki.eclipse.org/Eclipse_b3/aggregator/manual"&gt;b3aggr&lt;/a&gt; is a much better tool for frequently used repositories.&lt;/p&gt;</content></entry><entry><title>Receive E-Mail notifications when Jenkins plug-in updates are available</title><link href="http://www.lemmster.de/receive-e-mail-notifications-when-jenkin-plug-in-updates-are-available-2.html" rel="alternate"></link><published>2013-03-01T15:06:31+01:00</published><updated>2013-03-01T15:06:31+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-03-01:/receive-e-mail-notifications-when-jenkin-plug-in-updates-are-available-2.html</id><summary type="html">&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Install &lt;a href="https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin"&gt;Groovy script plug-in&lt;/a&gt; via Jenkin UpdateCenter&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Create a new Jenkins job and name it e.g. zPluginCheck&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Set to “Build periodically” with a reasonable schedule (once a day?!)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add “E-Mail notification” as a post build action&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add an “Execute system Groovy script” build step:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// Explicitly checking for updates works …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Install &lt;a href="https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin"&gt;Groovy script plug-in&lt;/a&gt; via Jenkin UpdateCenter&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Create a new Jenkins job and name it e.g. zPluginCheck&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Set to “Build periodically” with a reasonable schedule (once a day?!)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add “E-Mail notification” as a post build action&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add an “Execute system Groovy script” build step:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// Explicitly checking for updates works only with Jenkins &amp;gt;= 1.501&lt;/span&gt;
&lt;span class="c1"&gt;// Not available in LTS release :(&lt;/span&gt;
&lt;span class="c1"&gt;//&lt;/span&gt;
&lt;span class="c1"&gt;//hudson.model.Hudson.instance.updateCenter.getSiteList().each(&lt;/span&gt;
&lt;span class="c1"&gt;// {hudson.model.UpdateSite s -&amp;gt; s.doInvalidateData()&lt;/span&gt;
&lt;span class="c1"&gt;//    println(s.isDue())})&lt;/span&gt;
&lt;span class="c1"&gt;//hudson.model.Hudson.instance.updateCenter.updateAllSites()&lt;/span&gt;

&lt;span class="kt"&gt;def&lt;/span&gt; &lt;span class="n"&gt;updates&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[]&lt;/span&gt;
&lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;instance&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pluginManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;inject&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;updates&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;List&lt;/span&gt; &lt;span class="n"&gt;toUpdate&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hasUpdate&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;toUpdate&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;${p.longName}/${p.shortName}:${p.version}&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;toUpdate&lt;/span&gt;
&lt;span class="o"&gt;}.&lt;/span&gt;&lt;span class="na"&gt;inspect&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(!&lt;/span&gt;&lt;span class="n"&gt;updates&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;empty&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;updates&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
   &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;AbortException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Found available updates.&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</content></entry><entry><title>Export to docbook xml with LyX (on Ubuntu 12.10)</title><link href="http://www.lemmster.de/export-to-docbook-xml-with-lyx-on-ubuntu-12-10.html" rel="alternate"></link><published>2013-02-26T16:00:27+01:00</published><updated>2013-02-26T16:00:27+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-02-26:/export-to-docbook-xml-with-lyx-on-ubuntu-12-10.html</id><summary type="html">&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Install LyX as well as the dependencies need to author docbook in LyX&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;apt-get install docbook-dsssl sgmltools-lite jade docbook docbook-xml lyx jadetex&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;It is commonly written on the web to tell LyX where to find the docbook catalogs by explicitly exporting SGML_CATALOG_FILES. This turned out to be not needed on …&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;</summary><content type="html">&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Install LyX as well as the dependencies need to author docbook in LyX&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;apt-get install docbook-dsssl sgmltools-lite jade docbook docbook-xml lyx jadetex&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;It is commonly written on the web to tell LyX where to find the docbook catalogs by explicitly exporting SGML_CATALOG_FILES. This turned out to be not needed on Ubuntu and in fact caused sgmltools to fail if set (IOError: Couldn't resolve pubid ["-//SGMLtools//DOCUMENT Docbook Style Sheet for w3m Text//EN"]).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Start LyX and hit Tools⇒Reconfigure followed by a LyX restart&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;At this stage create a new document foo.lyx and change the document class to “Docbook articel (SGML)”&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Document =&amp;gt; Settings =&amp;gt; Document class&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Save the document and check the DVI preview (CTRL+R)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Export =&amp;gt; Docbook (XML) exports foo.lyx to foo.xml which is valid docbook xml&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content></entry><entry><title>Permanently remove dropbox client from autostart on Gnome</title><link href="http://www.lemmster.de/permanently-remove-dropbox-client-from-autostarting-on-gnome.html" rel="alternate"></link><published>2013-01-29T10:04:26+01:00</published><updated>2013-01-29T10:04:26+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2013-01-29:/permanently-remove-dropbox-client-from-autostarting-on-gnome.html</id><summary type="html">&lt;p&gt;Dropbox Inc. seems to think that I want its client to start automatically, always! Even if I manually remove the dropbox entry from startup applications or turn it off, it will be "magically" re-added/-enabled simply by running the dropbox client once. Well, I still prefer to stay in control …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Dropbox Inc. seems to think that I want its client to start automatically, always! Even if I manually remove the dropbox entry from startup applications or turn it off, it will be "magically" re-added/-enabled simply by running the dropbox client once. Well, I still prefer to stay in control of my computers (rather than the other way around) and thus keep dropbox out of autostart with a stupid &lt;strong&gt;"sudo chown root:root ~/.config/autostart/dropbox.desktop"&lt;/strong&gt;. Done!&lt;/p&gt;
&lt;p&gt;Btw. this considerably helps reduce battery drain while being mobile.&lt;/p&gt;</content></entry><entry><title>Generate QR for Wifi network with qrencode on command line</title><link href="http://www.lemmster.de/generate-qr-for-wifi-network-with-qrencode-on-command-line.html" rel="alternate"></link><published>2012-03-04T13:11:43+01:00</published><updated>2012-03-04T13:11:43+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2012-03-04:/generate-qr-for-wifi-network-with-qrencode-on-command-line.html</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;WIFI:S:aSSID;T:WPA;P:aPassword;;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; qrencode -o wifi.png -s &lt;span class="m"&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;WIFI:S:aSSID;T:WPA;P:aPassword;;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; qrencode -o wifi.png -s &lt;span class="m"&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>'Mylyn commit message templates for EGit with Gitlyn (hack) '</title><link href="http://www.lemmster.de/mylyn-commit-message-templates-for-egit-with-gitlyn-hack.html" rel="alternate"></link><published>2010-11-13T07:10:16+01:00</published><updated>2010-11-13T07:10:16+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2010-11-13:/mylyn-commit-message-templates-for-egit-with-gitlyn-hack.html</id><summary type="html">&lt;p&gt;As long as we are waiting for Mylyn commit message templates to appear in EGit (&lt;a href="https://bugs.eclipse.org/329515"&gt;see bug #329515&lt;/a&gt;), I have hacked an AspectJ/Equinox weaving based bundle that injects the current commit template into the EGit dialog. This is certainly something that breaks the second the CommitDialog implementation changes, but …&lt;/p&gt;</summary><content type="html">&lt;p&gt;As long as we are waiting for Mylyn commit message templates to appear in EGit (&lt;a href="https://bugs.eclipse.org/329515"&gt;see bug #329515&lt;/a&gt;), I have hacked an AspectJ/Equinox weaving based bundle that injects the current commit template into the EGit dialog. This is certainly something that breaks the second the CommitDialog implementation changes, but it scratches the itch of us early adopters.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://github.com/lemmy/gitlyn"&gt;code&lt;/a&gt; as well as &lt;a href="https://github.com/lemmy/gitlyn"&gt;instructions&lt;/a&gt; can be found on Github. A &lt;a href="http://www.kuppe.org/uploads/gitlyn"&gt;p2 repo&lt;/a&gt; is online too. Make sure to read the instruction as the installation requires a &lt;a href="http://wiki.eclipse.org/JDT_weaving_features#Turning_on_JDT_Weaving_manually"&gt;manual step&lt;/a&gt; after installation with p2.&lt;/p&gt;</content></entry><entry><title>'WONTFIX: Run JUnit Plug-in tests on a non-Equinox framework'</title><link href="http://www.lemmster.de/wontfix-run-junit-plug-in-tests-on-a-non-equinox-framework.html" rel="alternate"></link><published>2010-07-08T09:44:01+02:00</published><updated>2010-07-08T09:44:01+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2010-07-08:/wontfix-run-junit-plug-in-tests-on-a-non-equinox-framework.html</id><summary type="html">&lt;p&gt;In case you want to make sure your code is interoperable between different OSGi frameworks, you will be interested in &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=319089"&gt;bug #319089&lt;/a&gt;. It is about enhancing the JUnit Plug-in Launch config to support more than just Equinox as an OSGi framework.&lt;/p&gt;
&lt;p&gt;Unfortunately the PDE team has deemed non-Equinox frameworks not …&lt;/p&gt;</summary><content type="html">&lt;p&gt;In case you want to make sure your code is interoperable between different OSGi frameworks, you will be interested in &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=319089"&gt;bug #319089&lt;/a&gt;. It is about enhancing the JUnit Plug-in Launch config to support more than just Equinox as an OSGi framework.&lt;/p&gt;
&lt;p&gt;Unfortunately the PDE team has deemed non-Equinox frameworks not important enough to justify the change and hence marked the bug WONTFIX. You - the community - might want to show them, that compatibility across OSGi frameworks is no waste of efforts. Especially if Eclipse is supposed to remain the primary development environment for OSGi-based projects.&lt;/p&gt;</content></entry><entry><title>Do not ask what the committer reps can do for you, ask what you can do for the committer reps</title><link href="http://www.lemmster.de/do-not-ask-what-the-committer-reps-can-do-for-you-ask-what-you-can-do-for-the-committer-reps.html" rel="alternate"></link><published>2010-05-29T09:06:10+02:00</published><updated>2010-05-29T09:06:10+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2010-05-29:/do-not-ask-what-the-committer-reps-can-do-for-you-ask-what-you-can-do-for-the-committer-reps.html</id><summary type="html">&lt;p&gt;In a &lt;a href="http://industrial-tsi-wim.blogspot.com/2010/05/opinion-class-of-projects.html"&gt;recent blog post by Wim&lt;/a&gt;, he asked how the Eclipse Foundation (EF) can help solve the tragedy of the commons problem and &lt;a href="https://bugs.eclipse.org/313479"&gt;bug #313479&lt;/a&gt; follows up on this direction by requesting the EF to support individual projects do fund-raising (think Friends of Eclipse at the project level). The …&lt;/p&gt;</summary><content type="html">&lt;p&gt;In a &lt;a href="http://industrial-tsi-wim.blogspot.com/2010/05/opinion-class-of-projects.html"&gt;recent blog post by Wim&lt;/a&gt;, he asked how the Eclipse Foundation (EF) can help solve the tragedy of the commons problem and &lt;a href="https://bugs.eclipse.org/313479"&gt;bug #313479&lt;/a&gt; follows up on this direction by requesting the EF to support individual projects do fund-raising (think Friends of Eclipse at the project level). The committer representatives &lt;a href="https://bugs.eclipse.org/313479#c36"&gt;have shown their intent&lt;/a&gt; to raise this issue during the next board meeting, but to be prepared, they need to know if and how other (open source) organizations, communities and projects tackle project level donations.&lt;/p&gt;
&lt;p&gt;If you happen to have an answer or be otherwise an expert on this matter, please leave a comment on &lt;a href="https://bugs.eclipse.org/313479"&gt;bug #313479&lt;/a&gt;. Thanks!&lt;/p&gt;</content></entry><entry><title>Java keytool and custom certs</title><link href="http://www.lemmster.de/java-keytool-and-custom-certs.html" rel="alternate"></link><published>2010-02-16T22:08:56+01:00</published><updated>2010-02-16T22:08:56+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2010-02-16:/java-keytool-and-custom-certs.html</id><summary type="html">&lt;p&gt;When upgrading a JDK, install custom CAs by running "keytool -import -trustcacerts -alias OSU -file /path/to/ca.crt -keystore ${jre.home}/lib/security/cacerts". Default password is "changeit"&lt;/p&gt;</summary><content type="html">&lt;p&gt;When upgrading a JDK, install custom CAs by running "keytool -import -trustcacerts -alias OSU -file /path/to/ca.crt -keystore ${jre.home}/lib/security/cacerts". Default password is "changeit"&lt;/p&gt;</content></entry><entry><title>Distributed OSGi - The ECF way at DemoCamp Hamburg</title><link href="http://www.lemmster.de/distributed-osgi-the-ecf-way-at-democamp-hamburg.html" rel="alternate"></link><published>2009-05-25T09:35:35+02:00</published><updated>2009-05-25T09:35:35+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2009-05-25:/distributed-osgi-the-ecf-way-at-democamp-hamburg.html</id><summary type="html">&lt;p&gt;Following up on our presentations given at EclipseCon earlier this year [1][2], I will do a talk on ECF's implementation of distributed OSGi/RFC119 later today at the local &lt;a href="http://wiki.eclipse.org/Eclipse_DemoCamps_Galileo_2009/Hamburg"&gt;Galileo DemoCamp  here in Hamburg&lt;/a&gt;.
Make sure to show up in case you are in the area. Not just to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Following up on our presentations given at EclipseCon earlier this year [1][2], I will do a talk on ECF's implementation of distributed OSGi/RFC119 later today at the local &lt;a href="http://wiki.eclipse.org/Eclipse_DemoCamps_Galileo_2009/Hamburg"&gt;Galileo DemoCamp  here in Hamburg&lt;/a&gt;.
Make sure to show up in case you are in the area. Not just to hear about RFC119, but also to attend the other talks and the stammtisch afterwards. :-)&lt;/p&gt;
&lt;p&gt;[1] &lt;a href="http://ecf2.osuosl.org/Best_Practices_with_Distributed_OSGi.pdf"&gt;Best Practices with distributed OSGi services&lt;/a&gt;
[2] &lt;a href="http://ecf2.osuosl.org/Distributed_OSGi_-_The_ECF_way_rev02.pdf"&gt;Distributed OSGi - The ECF way&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>Git anybody? - not so fast</title><link href="http://www.lemmster.de/git-anybody-not-so-fast.html" rel="alternate"></link><published>2009-02-19T12:32:44+01:00</published><updated>2009-02-19T12:32:44+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2009-02-19:/git-anybody-not-so-fast.html</id><summary type="html">&lt;p&gt;Git appears to gain &lt;a href="http://douggaff.blogspot.com/2009/02/eclipse-board-of-directors.html"&gt;a lot&lt;/a&gt; &lt;a href="https://bugs.eclipse.org/257706"&gt;momentum&lt;/a&gt; as the DVCS for Eclipse &lt;a href="http://www.lunar-ocean.com/the-bpmn-modeler-is-hosted-on-github-fork-it-today/"&gt;recently.&lt;/a&gt; Even our benevolent dictator &lt;a href="http://dev.eclipse.org/blogs/mike/"&gt;Mike M.&lt;/a&gt; deemed it important enough to &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=257706#c63"&gt;comment on &lt;em&gt;the&lt;/em&gt; Git bug&lt;/a&gt;. ;-) 
While I am a strong supporter of Git myself (mostly because I lack experience with Mercurial, bzr, Darcs), we should take …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Git appears to gain &lt;a href="http://douggaff.blogspot.com/2009/02/eclipse-board-of-directors.html"&gt;a lot&lt;/a&gt; &lt;a href="https://bugs.eclipse.org/257706"&gt;momentum&lt;/a&gt; as the DVCS for Eclipse &lt;a href="http://www.lunar-ocean.com/the-bpmn-modeler-is-hosted-on-github-fork-it-today/"&gt;recently.&lt;/a&gt; Even our benevolent dictator &lt;a href="http://dev.eclipse.org/blogs/mike/"&gt;Mike M.&lt;/a&gt; deemed it important enough to &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=257706#c63"&gt;comment on &lt;em&gt;the&lt;/em&gt; Git bug&lt;/a&gt;. ;-) 
While I am a strong supporter of Git myself (mostly because I lack experience with Mercurial, bzr, Darcs), we should take a second before we make a decision. Simply because it looks like other (FOSS) Java-related projects are rather walking into the direction of &lt;a href="http://www.selenic.com/mercurial/wiki/"&gt;Mercurial&lt;/a&gt; with &lt;a href="http://www.selenic.com/mercurial/wiki/index.cgi/ProjectsUsingMercurial"&gt;OpenJDK, NetBeans being the most prominent ones&lt;/a&gt; (OK maybe just projects backed by SUN). On top of that Eclipse based &lt;a href="http://blog.juma.me.uk/2009/02/18/mercurialeclipse-131019/"&gt;Mercurial tooling&lt;/a&gt; is allegedly superior to Git in its current state (though this is probably going to change the second we pick a winner). From the &lt;a href="http://www.rockstarprogrammer.org/post/2008/apr/06/differences-between-mercurial-and-git/"&gt;feature set&lt;/a&gt;, both systems don't seem to differ much (what I read however is, it might not be possible to rewrite history in Mercurial)&lt;/p&gt;
&lt;p&gt;So in case you have a Mercurial/bzr/Darcs/... &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=249745#c3"&gt;success story&lt;/a&gt; sitting in your pocket or you can answer &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=257706#c63"&gt;Mike's question&lt;/a&gt; regarding Mercurial, please leave a comment on &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=249745"&gt;bug #249745&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Oh yeah, with distributed version control being the hot topic for this year's &lt;a href="http://www.eclipse.org/org/elections/"&gt;board elections&lt;/a&gt;, I am one of the candidates who had DVCS on his &lt;a href="http://www.eclipse.org/org/elections/candidate.php?year=2009&amp;amp;id=kuppe"&gt;mission statement&lt;/a&gt; right from the get go. ;-)&lt;/p&gt;
&lt;p&gt;Non-established since 2001&lt;/p&gt;</content></entry><entry><title>p2 metadata generation embedded into classic update site building</title><link href="http://www.lemmster.de/p2-metadata-generation-embedded-into-classic-update-site-building.html" rel="alternate"></link><published>2009-02-04T08:12:49+01:00</published><updated>2009-02-04T08:12:49+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2009-02-04:/p2-metadata-generation-embedded-into-classic-update-site-building.html</id><summary type="html">&lt;p&gt;Many of us have probably written their PDE build around the &lt;a href="http://www.eclipse.org/articles/Article-PDE-Automation/automation.html#discussionUpdateSiteBuild"&gt;famous build automation article&lt;/a&gt;. With Galiloe's &lt;a href="https://bugs.eclipse.org/252804"&gt;must do &lt;/a&gt; to provide p2 metadata, many projects are forced to update their build now.
We at &lt;a href="http://www.eclipse.org/ecf"&gt;ECF&lt;/a&gt; want to stick to our classic update site and keep build changes minimal though. So …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Many of us have probably written their PDE build around the &lt;a href="http://www.eclipse.org/articles/Article-PDE-Automation/automation.html#discussionUpdateSiteBuild"&gt;famous build automation article&lt;/a&gt;. With Galiloe's &lt;a href="https://bugs.eclipse.org/252804"&gt;must do &lt;/a&gt; to provide p2 metadata, many projects are forced to update their build now.
We at &lt;a href="http://www.eclipse.org/ecf"&gt;ECF&lt;/a&gt; want to stick to our classic update site and keep build changes minimal though. So here's how we've done our integration. Technically, it simply creates p2 metadata from pre build classic update site. You could also move generation out of PDE build if required.&lt;/p&gt;
&lt;p&gt;`
//customBuild.xml&lt;/p&gt;
&lt;p&gt;`&lt;/p&gt;
&lt;p&gt;And just before everything is zipped in site/build.xml, let p2 generate metadata from bits at ${updateSiteStagingLocation} and you're done.&lt;/p&gt;
&lt;p&gt;`
//site/build.xml&lt;/p&gt;
&lt;p&gt;// build classic update site
...&lt;/p&gt;
&lt;p&gt;// zip update site
...&lt;/p&gt;
&lt;p&gt;`&lt;/p&gt;
&lt;p&gt;Until &lt;a href="https://bugs.eclipse.org/263449"&gt;the fix to bug #263449&lt;/a&gt; hits the grounds, "inplace" has to be used instead of "updateSite".&lt;/p&gt;</content></entry><entry><title>Google summer of code 2009 is on</title><link href="http://www.lemmster.de/google-summer-of-code-2009-is-on.html" rel="alternate"></link><published>2009-01-08T08:39:06+01:00</published><updated>2009-01-08T08:39:06+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2009-01-08:/google-summer-of-code-2009-is-on.html</id><summary type="html">&lt;p&gt;Yesterday the &lt;a href="http://code.google.com/soc/2008"&gt;GSoC&lt;/a&gt; team &lt;a href="http://groups.google.com/group/google-summer-of-code-discuss/browse_thread/thread/31e618ed693ed5"&gt;gave the green light&lt;/a&gt; to Google summer of code 2009. Yay :-)
In case you don't know what GSoC is all about, you should read the &lt;a href="http://code.google.com/opensource/gsoc/2008/faqs.html"&gt;program faq&lt;/a&gt; or join us in #eclipse-soc at &lt;a href="http://freenode.net/"&gt;irc.freenode.net&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;To the rest of us, lets not waste time but …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Yesterday the &lt;a href="http://code.google.com/soc/2008"&gt;GSoC&lt;/a&gt; team &lt;a href="http://groups.google.com/group/google-summer-of-code-discuss/browse_thread/thread/31e618ed693ed5"&gt;gave the green light&lt;/a&gt; to Google summer of code 2009. Yay :-)
In case you don't know what GSoC is all about, you should read the &lt;a href="http://code.google.com/opensource/gsoc/2008/faqs.html"&gt;program faq&lt;/a&gt; or join us in #eclipse-soc at &lt;a href="http://freenode.net/"&gt;irc.freenode.net&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;To the rest of us, lets not waste time but start to collect ideas and approach prospective students now! I've prepared a &lt;a href="http://wiki.eclipse.org/Google_Summer_of_Code_2009_Ideas"&gt;2009er ideas page&lt;/a&gt; on the wiki for us to use.
&lt;img alt="Eclipse SoC" src="http://wiki.eclipse.org/images/b/ba/Soc20070506.png"&gt;&lt;/p&gt;</content></entry><entry><title>git repo (mirror) for rt/org.eclipse.ecf</title><link href="http://www.lemmster.de/git-repo-mirror-of-rtorgeclipseecf-at-ecf2osuoslorg.html" rel="alternate"></link><published>2008-12-23T21:39:23+01:00</published><updated>2008-12-23T21:39:23+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-12-23:/git-repo-mirror-of-rtorgeclipseecf-at-ecf2osuoslorg.html</id><summary type="html">&lt;p&gt;With a bunch of &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=257861"&gt;breaking API changes&lt;/a&gt; ahead of me and no intention to get into CVS merge hell (using my own branch for the changes), I decided to give &lt;a href="http://git.or.cz/"&gt;git&lt;/a&gt; a test spin. Others have blogged about it already and it appears as if the foundation is &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=257706"&gt;looking into …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;With a bunch of &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=257861"&gt;breaking API changes&lt;/a&gt; ahead of me and no intention to get into CVS merge hell (using my own branch for the changes), I decided to give &lt;a href="http://git.or.cz/"&gt;git&lt;/a&gt; a test spin. Others have blogged about it already and it appears as if the foundation is &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=257706"&gt;looking into the issue already&lt;/a&gt; but have postponed a &lt;a href="http://eclipse-committer-reps.blogspot.com/2008/12/december-2008-board-meeting.html"&gt;decision until next year&lt;/a&gt;.
So I did like &lt;a href="http://andymaleh.blogspot.com"&gt;Andy&lt;/a&gt; &lt;a href="http://andymaleh.blogspot.com/2008/12/glimmer-finally-available-at-github.html"&gt;has done before&lt;/a&gt; me and created a &lt;a href="http://issaris.blogspot.com/2005/11/cvs-to-git-and-back.html"&gt;git mirror of ECF's CVS&lt;/a&gt; with &lt;a href="http://www.kernel.org/pub/software/scm/git/docs/git-cvsimport.html"&gt;git-cvsimport&lt;/a&gt;. I'll report back in a while how things work out with &lt;a href="http://git.or.cz/gitwiki/EclipsePlugin"&gt;Egit&lt;/a&gt; (&lt;a href="http://wiki.eclipse.org/EGit/Proposal"&gt;soon at Eclipse.org&lt;/a&gt;) and git &amp;lt;&amp;gt; CVS.
If people are interested to use the git repo, we'd need to figure a way to make the master available at ecf2.osuosl.org.&lt;/p&gt;</content></entry><entry><title>Service Discovery and Remote Services with the Eclipse Communication Framework</title><link href="http://www.lemmster.de/service-discovery-and-remote-services-with-the-eclipse-communication-framework.html" rel="alternate"></link><published>2008-10-29T17:39:31+01:00</published><updated>2008-10-29T17:39:31+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-10-29:/service-discovery-and-remote-services-with-the-eclipse-communication-framework.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.eclipsecon.org/summiteurope2008/sessions?id=89"&gt;&lt;em&gt;Jan S. Rellermeyer, Markus Kuppe, Scott Lewis
The Eclipse Communication Framework has released its version 2.0 with Eclipse Ganymede. Two of the new and noteworthy features that ECF is bringing to the mainstream Eclipse developer are service discovery and distributed OSGi services. In this talk, we will introduce the …&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://www.eclipsecon.org/summiteurope2008/sessions?id=89"&gt;&lt;em&gt;Jan S. Rellermeyer, Markus Kuppe, Scott Lewis
The Eclipse Communication Framework has released its version 2.0 with Eclipse Ganymede. Two of the new and noteworthy features that ECF is bringing to the mainstream Eclipse developer are service discovery and distributed OSGi services. In this talk, we will introduce the various tools and concepts that ECF provides the users with. Different service discovery protocols like SLP and mDNS are available for finding remote services in the network. The interaction with remote services is supported through distributed shared objects or the R-OSGi system. On top, applications can either access remote services completely transparently, or take advantage of an explicit API that allows advanced interaction patterns like asynchronous calls or futures. We will compare the ECF API with other related concepts and the ongoing efforts in the OSGi Alliance on RFC 119.&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="I'm speacking at Eclipse Summit Europe 2008" src="http://www.eclipsesummit.org/summiteurope2008/image/friends/130x100_speaking.gif"&gt;&lt;/p&gt;</content></entry><entry><title>ECF at OSGi community event 2008</title><link href="http://www.lemmster.de/ecf-at-osgi-community-event-2008.html" rel="alternate"></link><published>2008-06-09T14:11:20+02:00</published><updated>2008-06-09T14:11:20+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-06-09:/ecf-at-osgi-community-event-2008.html</id><summary type="html">&lt;p&gt;&lt;a href="http://people.inf.ethz.ch/rjan/"&gt;Jan Rellermeyer&lt;/a&gt; and I are going to present &lt;a href="http://eclipse.org/ecf"&gt;ECF&lt;/a&gt; at the &lt;a href="http://www.osgi.org/CommunityEvent/HomePage"&gt;OSGi community event in Berlin&lt;/a&gt;. The talk is titled "&lt;em&gt;Distributed OSGi Services with the Eclipse Communication Framework
(ECF)&lt;/em&gt;" and the abstract reads as follows:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The Eclipse Communication Framework will soon go into version 2.0,
which will bring the …&lt;/em&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://people.inf.ethz.ch/rjan/"&gt;Jan Rellermeyer&lt;/a&gt; and I are going to present &lt;a href="http://eclipse.org/ecf"&gt;ECF&lt;/a&gt; at the &lt;a href="http://www.osgi.org/CommunityEvent/HomePage"&gt;OSGi community event in Berlin&lt;/a&gt;. The talk is titled "&lt;em&gt;Distributed OSGi Services with the Eclipse Communication Framework
(ECF)&lt;/em&gt;" and the abstract reads as follows:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The Eclipse Communication Framework will soon go into version 2.0,
which will bring the concepts around distributed OSGi services to the
mainstream Eclipse developers. In this talk, we will introduce the various
tools and concepts that ECF provides the users with. Different service
discovery protocols like SLP and mDNS are available for finding remote
services in the network. The interaction with remote services is supported
through distributed shared objects or the R-OSGi system. On top,
applications can either access remote services completely transparently, or
take advantage of an explicit API that allows advanced interaction patterns
like asynchronous calls or futures. We will compare the ECF API with other
related concepts and the ongoing efforts around RFC 119. 
&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;In case you're in the area, make sure to attend. The &lt;a href="http://www.osgi.org/CommunityEvent/Speakers"&gt;speakers list&lt;/a&gt; includes the who is who of the OSGi community and I'm honored to be given the chance to present the work we've done in ECF. :-)&lt;/p&gt;
&lt;p&gt;&lt;img alt="OSGi community event 2008" src="http://www.osgi.org/wiki/uploads/CommunityEvent/CE_2008_Final_small.png"&gt;&lt;/p&gt;</content></entry><entry><title>Help Chris answer the question "who actually uses ECF?".</title><link href="http://www.lemmster.de/help-chris-answer-the-question-who-actually-uses-ecf.html" rel="alternate"></link><published>2008-05-28T05:42:35+02:00</published><updated>2008-05-28T05:42:35+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-05-28:/help-chris-answer-the-question-who-actually-uses-ecf.html</id><summary type="html">&lt;p&gt;Based on an &lt;a href="http://dev.eclipse.org/mhonarc/lists/ecf-dev/msg01526.html"&gt;idea&lt;/a&gt; by &lt;a href="http://mea-bloga.blogspot.com/"&gt;Chris&lt;/a&gt;, the &lt;a href="http://www.eclipse.org/ecf/"&gt;ECF project&lt;/a&gt; wishes to compile a &lt;a href="http://wiki.eclipse.org/ECF/Adopters"&gt;list of adopters&lt;/a&gt; to get a better feel for our community. In case you're one of them, please take a moment and add yourself to the list. Thanks!&lt;/p&gt;
&lt;p&gt;Btw. to log into the wiki, one needs to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Based on an &lt;a href="http://dev.eclipse.org/mhonarc/lists/ecf-dev/msg01526.html"&gt;idea&lt;/a&gt; by &lt;a href="http://mea-bloga.blogspot.com/"&gt;Chris&lt;/a&gt;, the &lt;a href="http://www.eclipse.org/ecf/"&gt;ECF project&lt;/a&gt; wishes to compile a &lt;a href="http://wiki.eclipse.org/ECF/Adopters"&gt;list of adopters&lt;/a&gt; to get a better feel for our community. In case you're one of them, please take a moment and add yourself to the list. Thanks!&lt;/p&gt;
&lt;p&gt;Btw. to log into the wiki, one needs to create a &lt;a href="https://bugs.eclipse.org/bugs/createaccount.cgi"&gt;Bugzilla account&lt;/a&gt;.&lt;/p&gt;</content></entry><entry><title>toString() generation accepted for Google Summer of Code 2008</title><link href="http://www.lemmster.de/tostring-generation-accepted-for-google-summer-of-code-2008.html" rel="alternate"></link><published>2008-05-15T08:39:21+02:00</published><updated>2008-05-15T08:39:21+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-05-15:/tostring-generation-accepted-for-google-summer-of-code-2008.html</id><summary type="html">&lt;p&gt;A few weeks ago &lt;a href="http://eclipser-blog.blogspot.com/2008/05/poznans-eclipse-gsoc-students-at-ibm.html"&gt;Mateusz Matela&lt;/a&gt; has been accepted as a &lt;a href="http://code.google.com/soc/2008"&gt;GSoC&lt;/a&gt; Student to work on &lt;a href="http://wiki.eclipse.org/ToString()_generation"&gt;toString()&lt;/a&gt;. His &lt;a href="http://code.google.com/soc/2008/eclipse/appinfo.html?csaid=78855874A3858904"&gt;app&lt;/a&gt; looked most promising and I'm convinced he'll complete the term successfully. And in case he stumbles, &lt;a href="http://www.linkedin.com/in/mhaller"&gt;Mike Haller&lt;/a&gt; and I run to the rescue.&lt;/p&gt;
&lt;p&gt;toString() generation is pretty basic functionality which …&lt;/p&gt;</summary><content type="html">&lt;p&gt;A few weeks ago &lt;a href="http://eclipser-blog.blogspot.com/2008/05/poznans-eclipse-gsoc-students-at-ibm.html"&gt;Mateusz Matela&lt;/a&gt; has been accepted as a &lt;a href="http://code.google.com/soc/2008"&gt;GSoC&lt;/a&gt; Student to work on &lt;a href="http://wiki.eclipse.org/ToString()_generation"&gt;toString()&lt;/a&gt;. His &lt;a href="http://code.google.com/soc/2008/eclipse/appinfo.html?csaid=78855874A3858904"&gt;app&lt;/a&gt; looked most promising and I'm convinced he'll complete the term successfully. And in case he stumbles, &lt;a href="http://www.linkedin.com/in/mhaller"&gt;Mike Haller&lt;/a&gt; and I run to the rescue.&lt;/p&gt;
&lt;p&gt;toString() generation is pretty basic functionality which is definitely useful to any Java developer. So take a moment and add your ideas to our &lt;a href="http://wiki.eclipse.org/ToString%28%29_generation#Planned_features"&gt;planned features&lt;/a&gt;. Also make sure to check back once coding has started &lt;a href="http://code.google.com/opensource/gsoc/2008/faqs.html#0.1_timeline"&gt;May 26&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Other &lt;a href="http://wiki.eclipse.org/Google_Summer_of_Code_2008"&gt;accepted Eclipse GSoC projects&lt;/a&gt; are listed on the wiki. Check 'em out too!&lt;/p&gt;</content></entry><entry><title>GSoC deadline has been extended until April 7th</title><link href="http://www.lemmster.de/gsoc-deadline-has-been-extended-until-april-7th.html" rel="alternate"></link><published>2008-04-01T07:29:51+02:00</published><updated>2008-04-01T07:29:51+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-04-01:/gsoc-deadline-has-been-extended-until-april-7th.html</id><summary type="html">&lt;p&gt;Because of low numbers of student applications in general, the &lt;a href="http://code.google.com/soc/2008"&gt;Google Summer of Code&lt;/a&gt; deadline has been extended until April 7th. However &lt;a href="http://www.eclipse.org/soc"&gt;Eclipse&lt;/a&gt; to date has already received more than 100 student applications which is even more than last year. Surely we mentors have a stack of reading ahead of …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Because of low numbers of student applications in general, the &lt;a href="http://code.google.com/soc/2008"&gt;Google Summer of Code&lt;/a&gt; deadline has been extended until April 7th. However &lt;a href="http://www.eclipse.org/soc"&gt;Eclipse&lt;/a&gt; to date has already received more than 100 student applications which is even more than last year. Surely we mentors have a stack of reading ahead of us. :-)&lt;/p&gt;
&lt;p&gt;Students, use this opportunity to join GSoC. You can find our &lt;a href="http://wiki.eclipse.org/Google_Summer_of_Code_2008_Ideas"&gt;ideas&lt;/a&gt; on the wiki.&lt;/p&gt;</content></entry><entry><title>What's big in eeek4?</title><link href="http://www.lemmster.de/whats-big-in-eeek4.html" rel="alternate"></link><published>2008-03-20T19:09:07+01:00</published><updated>2008-03-20T19:09:07+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-03-20:/whats-big-in-eeek4.html</id><summary type="html">&lt;p&gt;After yesterday's e4 talks/BoF, it is easy to get the impression, that e4 is all about bringing Eclipse to the web browser. Although I see the reason behind it (don't leave the web-app market to e.g. Google alone), it alone doesn't justify e4.&lt;/p&gt;
&lt;p&gt;But what else could be …&lt;/p&gt;</summary><content type="html">&lt;p&gt;After yesterday's e4 talks/BoF, it is easy to get the impression, that e4 is all about bringing Eclipse to the web browser. Although I see the reason behind it (don't leave the web-app market to e.g. Google alone), it alone doesn't justify e4.&lt;/p&gt;
&lt;p&gt;But what else could be a major story for e4? The &lt;a href="http://docs.google.com/View?docid=df8w648g_97g33mk6hb"&gt;e4 BoF gave us an answer&lt;/a&gt; (Btw. do we have minutes from last year's blue sky BoF for e4?). A larger portion of the community wants to tackle API rot in e4 and clean up all those org.eclipse.ui.IWorkbenchPart3... cruelties. Even if it means that we have to break backward compatibility if totally unavoidable.
And we wouldn't break what we had promised before. The major version indicates a non-compatible API change in our component model.&lt;/p&gt;
&lt;p&gt;But the big players seem to be reluctant to this idea which is understandable. If you spent millions of dollars building products on top of Eclipse, you need to protect your investment. However, &lt;a href="http://ed-merks.blogspot.com/2008/03/eclipsecon-wednesday.html"&gt;Eclipse 3.X is going to stay with us for a long time even after e4 has been release&lt;/a&gt;. So it's simply wrong arguing that we cannot let "(EPIC) plug-in authors" hanging loose in the air.
This is especially dingy in front of the community out reach to step up and actively get involved in the e4 efforts. If the big players will only care for their needs in e4 and the community should take care of their own (which is absolutely fine by me) watch out that it doesn't backfire. The community can pull the same argument and let the big guys deal with backward compatibility. But not by blocking off API cleanups!&lt;/p&gt;
&lt;p&gt;Why does the community want to get rid of redundant APIs anyway? Because its getting harder and harder for anybody to develop on top of Eclipse. &lt;a href="http://dev.eclipse.org/mhonarc/lists/eclipse.org-architecture-council/msg00391.html"&gt;It's becoming way to complicated to figure out which Interface to use&lt;/a&gt; and outdated documentation doesn't help either. Some cases cannot be done with newer API version...
So cleaning up API in the end is an effort anybody will benefit from. We will be able to continue work innovative like we're so much used to.&lt;/p&gt;</content></entry><entry><title>Non-restorable views part II</title><link href="http://www.lemmster.de/non-restorable-views-part-ii.html" rel="alternate"></link><published>2008-03-20T04:46:31+01:00</published><updated>2008-03-20T04:46:31+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-03-20:/non-restorable-views-part-ii.html</id><summary type="html">&lt;p&gt;As a follow up to a &lt;a href="http://www.lemmster.de/blog/index.php/2008/01/18/164/"&gt;previous post&lt;/a&gt;, the &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=215797"&gt;non-restorable views feature&lt;/a&gt; has finally made it into HEAD &amp;gt;20080319 and will be in Ganymede starting with tomorrow's N-build. Thanks go out to PW for taking the time advising and solving the session test fw problem.&lt;/p&gt;</summary><content type="html">&lt;p&gt;As a follow up to a &lt;a href="http://www.lemmster.de/blog/index.php/2008/01/18/164/"&gt;previous post&lt;/a&gt;, the &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=215797"&gt;non-restorable views feature&lt;/a&gt; has finally made it into HEAD &amp;gt;20080319 and will be in Ganymede starting with tomorrow's N-build. Thanks go out to PW for taking the time advising and solving the session test fw problem.&lt;/p&gt;</content></entry><entry><title>GSoC '08 - Call for proposals with deadline approaching fast!</title><link href="http://www.lemmster.de/gsoc-08-call-for-proposals-with-deadline-approaching-fast.html" rel="alternate"></link><published>2008-03-19T17:53:34+01:00</published><updated>2008-03-19T17:53:34+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-03-19:/gsoc-08-call-for-proposals-with-deadline-approaching-fast.html</id><summary type="html">&lt;p&gt;As mentioned earlier, &lt;a href="http://www.eclipse.org/soc"&gt;Eclipse SoC&lt;/a&gt; will be part of &lt;a href="http://code.google.com/soc/2008"&gt;Google Summer of Code in 2008&lt;/a&gt; again. So it's time for you to &lt;a href="http://wiki.eclipse.org/Google_Summer_of_Code_2008_Ideas#Ideas"&gt;write down your ideas/proposals&lt;/a&gt;.
Afterwards you might wanna subscribe to the &lt;a href="http://dev.eclipse.org/mailman/listinfo/soc-dev"&gt;soc-dev mailing list&lt;/a&gt;, pay attention to the &lt;a href="http://www.eclipse.org/newsportal/thread.php?group=eclipse.technology.soc"&gt;newsgroup&lt;/a&gt; or visit us in &lt;a href="irc://irc.freenode.net/#eclipse-soc"&gt;#eclipse-soc on freenode&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Keep …&lt;/p&gt;</summary><content type="html">&lt;p&gt;As mentioned earlier, &lt;a href="http://www.eclipse.org/soc"&gt;Eclipse SoC&lt;/a&gt; will be part of &lt;a href="http://code.google.com/soc/2008"&gt;Google Summer of Code in 2008&lt;/a&gt; again. So it's time for you to &lt;a href="http://wiki.eclipse.org/Google_Summer_of_Code_2008_Ideas#Ideas"&gt;write down your ideas/proposals&lt;/a&gt;.
Afterwards you might wanna subscribe to the &lt;a href="http://dev.eclipse.org/mailman/listinfo/soc-dev"&gt;soc-dev mailing list&lt;/a&gt;, pay attention to the &lt;a href="http://www.eclipse.org/newsportal/thread.php?group=eclipse.technology.soc"&gt;newsgroup&lt;/a&gt; or visit us in &lt;a href="irc://irc.freenode.net/#eclipse-soc"&gt;#eclipse-soc on freenode&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Keep in mind that the GSoC applications &lt;a href="http://code.google.com/opensource/gsoc/2008/faqs.html#0.1_timeline"&gt;deadline approaches fast and ends Monday, March 31st&lt;/a&gt; and that the Eclispe SoC project even has to check all the apps before and find mentors.&lt;/p&gt;</content></entry><entry><title>Eclipse has been accepted for Google Summer of Code '08</title><link href="http://www.lemmster.de/eclipse-has-been-accepted-for-google-summer-of-code-08.html" rel="alternate"></link><published>2008-03-18T00:24:22+01:00</published><updated>2008-03-18T00:24:22+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-03-18:/eclipse-has-been-accepted-for-google-summer-of-code-08.html</id><summary type="html">&lt;p&gt;Eclipse has been &lt;a href="http://code.google.com/soc/2008/"&gt;accepted&lt;/a&gt; for Google Summer of Code 2008, hooray. :-)&lt;/p&gt;
&lt;p&gt;So it definitely makes sense for you to show up at our &lt;a href="http://www.eclipsecon.org/2008/?page=sub/&amp;amp;id=552"&gt;ESoC BoF&lt;/a&gt; later today in room 203/204 to bring up your project proposals.&lt;/p&gt;
&lt;p&gt;And if you don't have time today, you get a second chance tomorrow …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Eclipse has been &lt;a href="http://code.google.com/soc/2008/"&gt;accepted&lt;/a&gt; for Google Summer of Code 2008, hooray. :-)&lt;/p&gt;
&lt;p&gt;So it definitely makes sense for you to show up at our &lt;a href="http://www.eclipsecon.org/2008/?page=sub/&amp;amp;id=552"&gt;ESoC BoF&lt;/a&gt; later today in room 203/204 to bring up your project proposals.&lt;/p&gt;
&lt;p&gt;And if you don't have time today, you get a second chance tomorrow during our &lt;a href="http://www.eclipsecon.org/2008/?page=sub/&amp;amp;id=405"&gt;SoC short talk&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;See you!&lt;/p&gt;</content></entry><entry><title>jSLP available in Orbit and new ECF SLP based discovery provider ready</title><link href="http://www.lemmster.de/jslp-available-in-orbit-and-new-ecf-slp-based-discovery-provider-ready.html" rel="alternate"></link><published>2008-02-03T14:42:09+01:00</published><updated>2008-02-03T14:42:09+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-02-03:/jslp-available-in-orbit-and-new-ecf-slp-based-discovery-provider-ready.html</id><summary type="html">&lt;p&gt;&lt;a href="http://jslp.sourceforge.net/"&gt;jSLP&lt;/a&gt; 1.0.0RC2 has recently been added to &lt;a href="http://www.eclipse.org/orbit/"&gt;Orbit&lt;/a&gt; which concludes the new &lt;a href="http://wiki.eclipse.org/ECF_Providers#jSLP_aka_SLP.2Frfc2608"&gt;SLP provider&lt;/a&gt; contribution [CQ 1925, CQ1926, &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=200804"&gt;Bug #200804&lt;/a&gt;] for the &lt;a href="http://wiki.eclipse.org/ECF_API_Docs#Discovery_API"&gt;ECF discovery API&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;While implementing the new SLP provider, we have also done a couple of necessary API changes too, which are best summarized in &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=209774"&gt;Simplify …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://jslp.sourceforge.net/"&gt;jSLP&lt;/a&gt; 1.0.0RC2 has recently been added to &lt;a href="http://www.eclipse.org/orbit/"&gt;Orbit&lt;/a&gt; which concludes the new &lt;a href="http://wiki.eclipse.org/ECF_Providers#jSLP_aka_SLP.2Frfc2608"&gt;SLP provider&lt;/a&gt; contribution [CQ 1925, CQ1926, &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=200804"&gt;Bug #200804&lt;/a&gt;] for the &lt;a href="http://wiki.eclipse.org/ECF_API_Docs#Discovery_API"&gt;ECF discovery API&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;While implementing the new SLP provider, we have also done a couple of necessary API changes too, which are best summarized in &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=209774"&gt;Simplify/generalize discovery API #209774&lt;/a&gt;. Additionally a &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=200803"&gt;CompositeDiscoveryContainer&lt;/a&gt; is ready which allows several discovery providers to be used simultaneously. The only thing left to do, is to integrate the SLP provider into our automated builds so it can go into ECF &lt;a href="http://wiki.eclipse.org/ECF_Conference_Call_1.8.2008"&gt;2.0.0M5&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Scott who never sleeps has put together an &lt;a href="http://wiki.eclipse.org/Update_Site_Discovery"&gt;example&lt;/a&gt; showing how ECF discovery can be used to find update sites, which is probably of interest to &lt;a href="http://www.eclipse.org/equinox/incubator/provisioning/"&gt;Provisioning/p2&lt;/a&gt; at some point in time.&lt;/p&gt;
&lt;p&gt;And if this has raised some curiosity in you, Scott is going to &lt;a href="http://www.eclipsecon.org/2008/index.php?page=sub/&amp;amp;id=134"&gt;talk&lt;/a&gt; about &lt;a href="http://www.eclipse.org/ecf"&gt;ECF&lt;/a&gt; as a whole during &lt;a href="http://www.eclipsecon.org/2008"&gt;EclipseCon08&lt;/a&gt;.&lt;/p&gt;</content></entry><entry><title>Eclipse Google Summer of Code BoF</title><link href="http://www.lemmster.de/eclipse-google-summer-of-code-bof.html" rel="alternate"></link><published>2008-02-01T09:32:44+01:00</published><updated>2008-02-01T09:32:44+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-02-01:/eclipse-google-summer-of-code-bof.html</id><summary type="html">&lt;p&gt;Wayne &lt;a href="http://dev.eclipse.org/blogs/wayne/2008/01/31/bof-bof-bo-bof-banane-manane-a-fo-fof/"&gt;plans&lt;/a&gt; to schedule BoFs based on popularity, so here's a little ad for the &lt;a href="https://eclipsecon.greenmeetingsystems.com/submissions/view/552"&gt;Eclipse Google Summer of Code BoF&lt;/a&gt; submission. The abstract currently reads like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;In this BoF, we will discuss the Eclipse community&amp;#39;s participation in the
Google Summer of Code (GSoC) 2008. We will discuss …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Wayne &lt;a href="http://dev.eclipse.org/blogs/wayne/2008/01/31/bof-bof-bo-bof-banane-manane-a-fo-fof/"&gt;plans&lt;/a&gt; to schedule BoFs based on popularity, so here's a little ad for the &lt;a href="https://eclipsecon.greenmeetingsystems.com/submissions/view/552"&gt;Eclipse Google Summer of Code BoF&lt;/a&gt; submission. The abstract currently reads like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;In this BoF, we will discuss the Eclipse community&amp;#39;s participation in the
Google Summer of Code (GSoC) 2008. We will discuss lessons learned from
past experiences, our processes for the coming session, attracting students 
and mentors, and more.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But what value might this BoF offer for you? Besides organizing our internal work, we are always happy to discuss your project proposals, welcome potential students and mentors or demo achievements from previous years. And because there are students involved, chances are high to have a beer or two. ;-) 
So make sure to leave a &lt;a href="https://eclipsecon.greenmeetingsystems.com/submissions/view/552"&gt;comment&lt;/a&gt; on the submission.&lt;/p&gt;
&lt;p&gt;Btw. if this BoF doesn't get accepted, you can still see last year's results in Philippe's short talk &lt;a href="http://www.eclipsecon.org/2008/index.php?page=sub/&amp;amp;id=405"&gt;"Summer of Code 2007 @ Eclipse: discover 21 cool NEW plugins projects in 10 minutes"&lt;/a&gt;.&lt;/p&gt;</content></entry><entry><title>Viewers and 1:n associations with the EMF databinding</title><link href="http://www.lemmster.de/viewers-and-1n-associations-with-the-emf-databinding.html" rel="alternate"></link><published>2008-01-28T08:53:19+01:00</published><updated>2008-01-28T08:53:19+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-01-28:/viewers-and-1n-associations-with-the-emf-databinding.html</id><summary type="html">&lt;p&gt;&lt;a href="http://wiki.eclipse.org/Wire_EMF_Databinding_RCP"&gt;Examples&lt;/a&gt; on the evolving &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=75625"&gt;EMF databinding&lt;/a&gt; are still limited, so here's what I've learned recently. The use case is as follows, display the Collection (more precisely an EList) of Addresses a Person object owns (Person#addresses) in a JFace TableViewer.  &lt;/p&gt;
&lt;p&gt;Before things can get started, one needs to grab a …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://wiki.eclipse.org/Wire_EMF_Databinding_RCP"&gt;Examples&lt;/a&gt; on the evolving &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=75625"&gt;EMF databinding&lt;/a&gt; are still limited, so here's what I've learned recently. The use case is as follows, display the Collection (more precisely an EList) of Addresses a Person object owns (Person#addresses) in a JFace TableViewer.  &lt;/p&gt;
&lt;p&gt;Before things can get started, one needs to grab a recent version (recent in terms of HEAD because of &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=216440"&gt;#216440&lt;/a&gt;) of EMF 2.4, which in turn requires &lt;a href="http://download.eclipse.org/eclipse/downloads/"&gt;platform 3.4&lt;/a&gt;. After defining EMF as a plug-in dependency, the Viewer's &lt;em&gt;Content&lt;/em&gt;- and &lt;em&gt;LabelProvider&lt;/em&gt; needs to be changed to:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;// The model object which should be shown
Person aPerson = ModelFactory.eINSTANCE.createPerson();
...

// The content provider is responsible to handle add and
// remove notification for the Person#address EList
ObservableListContentProvider provider = new ObservableListContentProvider();
viewer.setContentProvider(provider);

// The label provider in turn handles the addresses
// The EStructuralFeature[] defines which fields get shown
// in the TableViewer columns
IObservableSet knownElements = provider.getKnownElements();
IObservableMap[] observeMaps = EMFObservables.
    observeMaps(knownElements, new EStructuralFeature[] {
    ModelPackage.Literals.PERSON_ADDRESS__STREET,
    ModelPackage.Literals.PERSON_ADDRESS__NUMBER,
    ModelPackage.Literals.PERSON_ADDRESS__ZIP,
    ModelPackage.Literals.PERSON_ADDRESS__COUNTRY);
ObservableMapLabelProvider labelProvider = 
    new ObservableMapLabelProvider(observeMaps);
viewer.setLabelProvider(labelProvider);

// Person#addresses is the Viewer&amp;#39;s input
viewer.setInput(EMFObservables.observeList(Realm.getDefault(), aPerson, 
    ModelPackage.Literals.PERSON_ADDRESSES));
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is pretty much everything what's necessary to display the Addresses details in the TableViewer and to react to EMF notifications. One doesn't even have to write a custom &lt;em&gt;Content-&lt;/em&gt; and &lt;em&gt;LabelProviders&lt;/em&gt;. 
Though the databinding has some limitation in this early incarnation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;One might want to delegate to an existing EMF edit in the LabelProvider, thus an EMF version of the &lt;em&gt;ObservableMapLabelProvider&lt;/em&gt; would be required&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;No support for non EMF/custom columns. If a table column is to be filled by a different source than an EMF field e.g. calculation usually done in the &lt;em&gt;LabelProvider&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;EMF proxies don't get resolved under certain conditions which result in NPEs in the LabelProvider or Comparators&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Edit: Following Ed's suggestion I've created a &lt;a href="http://wiki.eclipse.org/EMF/Recipes#Recipe:_JFace_Viewers_and_1:n_associations"&gt;EMF recipe&lt;/a&gt; and bug &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=216748"&gt;216748&lt;/a&gt;&lt;/p&gt;</content></entry><entry><title>Non-restorable views</title><link href="http://www.lemmster.de/non-restorable-views-extension-point.html" rel="alternate"></link><published>2008-01-18T13:42:51+01:00</published><updated>2008-01-18T13:42:51+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2008-01-18:/non-restorable-views-extension-point.html</id><summary type="html">&lt;p&gt;Yesterday I was hit with the requirement to not restore/set to be hidden certain views after workbench restart. Unfortunately this isn't supported in the current (latest) incarnation of the &lt;em&gt;&lt;a href="http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/views/package-summary.html"&gt;org.eclipse.ui.views&lt;/a&gt;&lt;/em&gt; EP, though it shouldn't be too hard to extend the EP schema. But since changing &lt;em&gt;org …&lt;/em&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;Yesterday I was hit with the requirement to not restore/set to be hidden certain views after workbench restart. Unfortunately this isn't supported in the current (latest) incarnation of the &lt;em&gt;&lt;a href="http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/views/package-summary.html"&gt;org.eclipse.ui.views&lt;/a&gt;&lt;/em&gt; EP, though it shouldn't be too hard to extend the EP schema. But since changing &lt;em&gt;org.eclipse.ui&lt;/em&gt; code isn't a short term solution anyway, I reverted to a poor mans version of an EP (btw. thanks to pwebster for inspiration). Basically the RCP checks for a given substring in all secondary ids of open ViewReferences in the &lt;a href="http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/application/WorkbenchWindowAdvisor.html"&gt;&lt;em&gt;WorkbenchWindowAdvisor#postWindowCreate&lt;/em&gt;&lt;/a&gt; startup hook. The implementation is pretty much straight forward:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;// do not restore certain views whose secondary view ID contains &amp;quot;NO_RESTORE&amp;quot;
IWorkbenchPage[] pages = getWindowConfigurer().getWindow().getPages();
for(int i = 0; i &amp;lt; pages.length; i++) {
    IWorkbenchPage workbenchPage = pages[i];
    IViewReference[] viewReferences = workbenchPage.getViewReferences();
    for(int j = 0; j &amp;lt; viewReferences.length; j++) {
        IViewReference viewReference = viewReferences[j];
        String secondaryId = viewReference.getSecondaryId();
        if(secondaryId != null &amp;amp;&amp;amp; secondaryId.contains(&amp;quot;NO_RESTORE&amp;quot;)) {
            workbenchPage.hideView(viewReference);
        }
    }
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To define a view to be non-restorable is done by concatenating "NO_RESTORE" into the secondary view id string.&lt;/p&gt;
&lt;p&gt;Hard coding the view id in &lt;em&gt;WorkbenchWindow#postWindowCreate&lt;/em&gt; is a bad alternative, because it unnecessarily separates the view properties from the bundle hosting the view. Also it makes the RCP bundle specific for certain views. It's IMO simply the wrong location. Personally I find this functionality important enough to be included, so I've create &lt;a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=215797"&gt;Bug #215797&lt;/a&gt;. If you agree, please give it a vote.&lt;/p&gt;
&lt;p&gt;The next item on my todo list, is to get rid of unwanted "Show View" shortcuts, because leaning back waiting for 3.4 to hit the road unfortunately isn't an option. :(&lt;/p&gt;</content></entry><entry><title>Session notes from the GSoC mentor meeting publicly available</title><link href="http://www.lemmster.de/session-notes-from-the-gsoc-mentor-meeting-publicly-availble.html" rel="alternate"></link><published>2007-11-02T07:21:52+01:00</published><updated>2007-11-02T07:21:52+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2007-11-02:/session-notes-from-the-gsoc-mentor-meeting-publicly-availble.html</id><summary type="html">&lt;p&gt;As I've promised in a &lt;a href="http://www.lemmster.de/blog/index.php/2007/10/09/160/"&gt;previous post&lt;/a&gt;, here is a ping for everybody who is interested in the outcome of the &lt;a href="http://code.google.com/soc/"&gt;Google Summer of Code&lt;/a&gt; mentor summit. The &lt;a href="http://googlesummerofcode.blogspot.com/2007/11/notes-from-mentor-summit.html"&gt;session notes&lt;/a&gt; are publicly available now.&lt;/p&gt;</summary><content type="html">&lt;p&gt;As I've promised in a &lt;a href="http://www.lemmster.de/blog/index.php/2007/10/09/160/"&gt;previous post&lt;/a&gt;, here is a ping for everybody who is interested in the outcome of the &lt;a href="http://code.google.com/soc/"&gt;Google Summer of Code&lt;/a&gt; mentor summit. The &lt;a href="http://googlesummerofcode.blogspot.com/2007/11/notes-from-mentor-summit.html"&gt;session notes&lt;/a&gt; are publicly available now.&lt;/p&gt;</content></entry><entry><title>GSoC 2007 Mentor Summit wrap up</title><link href="http://www.lemmster.de/gsoc-2007-mentor-summit-wrap-up.html" rel="alternate"></link><published>2007-10-09T18:54:28+02:00</published><updated>2007-10-09T18:54:28+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2007-10-09:/gsoc-2007-mentor-summit-wrap-up.html</id><summary type="html">&lt;p&gt;Sitting on my flight back from the mentor summit at Google HQ seems to boost my writing power. Although I wanted to get some coding done, I'm mainly writing E-Mail. But I digress,  cause I wanna take the chance to summarize a couple of ideas and compile a list of …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Sitting on my flight back from the mentor summit at Google HQ seems to boost my writing power. Although I wanted to get some coding done, I'm mainly writing E-Mail. But I digress,  cause I wanna take the chance to summarize a couple of ideas and compile a list of lesson learned items which floated around in the various sessions. Btw. it was an awesome event and I'm really grateful that I could attend it as an Eclipse rep.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Application review phase:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Get the applications in a lot earlier to have a longer review period&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Assign mentors and students based on technical but also on social grounds&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Have direct, non text base communication (if possible video)
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Find a hook to the reptilian brain (imprinting) to understand how the student ticks&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If you as a mentor are euphoric about the student and the application, let somebody else do a review as well. The review process should be unbiased&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Most successful apps came from the student!!!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Check how many alterations have been done to the app. The more alterations there are, the more thought has been given by the candidate&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Let the candidate take an entry level test if his/her abilities aren't known to the reviewer&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Community building:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;It should be mandatory to hang out on IRC, IM or whatever communication form is most common. In our case it is probably IRC&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;After accepting the students and assigning them to their mentor, do a big group introduction. Again, it shouldn't be text based&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Have the formal things done fast. It is really frustrating to wait weeks for commit access to the SoC repository&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Monitoring and rating progress:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Define precise project deliverables upfront, though they might change over time&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Frequent checkins should be mandatory. If there is no checkin in a week, find out what's going on&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Have a transparent review process by providing check-in statistics (DASH/CIA/...)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Sidenote: Expand DASH to not just monitor CVS/SVN but to also gather statistics about contributions out of Bugzilla, newsgroups and mailinglists...
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Let the student take the test driven development model&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;After the term ends:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If all deliverables have been successfully solved by the student, have some follow up tasks in the pocket to keep the student involved with the project. In the end she/he should become a permanent contributor/committer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This collection is certainly far from being complete. This said, the moment the official session notes will be made available, I will add a link to this post. They are currently kept in the non public GSoC wiki.&lt;/p&gt;</content></entry><entry><title>debian etch + exim4 + greylistd + spf</title><link href="http://www.lemmster.de/debian-etch-exim4-greylistd-spf.html" rel="alternate"></link><published>2007-05-19T09:53:14+02:00</published><updated>2007-05-19T09:53:14+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2007-05-19:/debian-etch-exim4-greylistd-spf.html</id><summary type="html">&lt;p&gt;Today I've spent some time implementing &lt;a href="http://greylisting.org/"&gt;greylisting&lt;/a&gt; on our smtp server continuing my endless fight against &lt;a href="http://en.wikipedia.org/wiki/E-mail_spam"&gt;UCE (spam)&lt;/a&gt;. Setting this up is as easy as running "aptitude install greylistd" and adding to the exim.conf:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;defer  
&lt;span class="nv"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$sender_host_address&lt;/span&gt; is not yet authorized to deliver &lt;span class="se"&gt;\ &lt;/span&gt; 
mail from &amp;lt;&lt;span class="nv"&gt;$sender_address&lt;/span&gt;&amp;gt; to &amp;lt;&lt;span class="nv"&gt;$local_part&lt;/span&gt;@&lt;span class="nv"&gt;$domain …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Today I've spent some time implementing &lt;a href="http://greylisting.org/"&gt;greylisting&lt;/a&gt; on our smtp server continuing my endless fight against &lt;a href="http://en.wikipedia.org/wiki/E-mail_spam"&gt;UCE (spam)&lt;/a&gt;. Setting this up is as easy as running "aptitude install greylistd" and adding to the exim.conf:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;defer  
&lt;span class="nv"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$sender_host_address&lt;/span&gt; is not yet authorized to deliver &lt;span class="se"&gt;\ &lt;/span&gt; 
mail from &amp;lt;&lt;span class="nv"&gt;$sender_address&lt;/span&gt;&amp;gt; to &amp;lt;&lt;span class="nv"&gt;$local_part&lt;/span&gt;@&lt;span class="nv"&gt;$domain&lt;/span&gt;&amp;gt;. &lt;span class="se"&gt;\ &lt;/span&gt; 
Please try later.  
&lt;span class="nv"&gt;log_message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; greylisted.  
!senders &lt;span class="o"&gt;=&lt;/span&gt; :  
!hosts &lt;span class="o"&gt;=&lt;/span&gt; : +relay_from_hosts : &lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; exists {/etc/greylistd/whitelist-hosts&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="o"&gt;{&lt;/span&gt;/etc/greylistd/whitelist-hosts&lt;span class="o"&gt;}{}}&lt;/span&gt; : &lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; exists {/var/lib/greylistd/whitelist-hosts&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="o"&gt;{&lt;/span&gt;/var/lib/greylistd/whitelist-hosts&lt;span class="o"&gt;}{}}&lt;/span&gt;  
!authenticated &lt;span class="o"&gt;=&lt;/span&gt; *  
!acl &lt;span class="o"&gt;=&lt;/span&gt; acl_check_spf  
&lt;span class="nv"&gt;domains&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; +local_domains : +relay_to_domains  
&lt;span class="nv"&gt;verify&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; recipient/callout&lt;span class="o"&gt;=&lt;/span&gt;20s,use_sender,defer_ok  
&lt;span class="nv"&gt;condition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;readsocket&lt;/span&gt;&lt;span class="p"&gt;{/var/run/greylistd/socket&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="o"&gt;{&lt;/span&gt;--grey &lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="nv"&gt;$sender_host_address&lt;/span&gt; &lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="nv"&gt;$sender_address&lt;/span&gt; &lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="nv"&gt;$local_part&lt;/span&gt;@&lt;span class="nv"&gt;$domain&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="o"&gt;{&lt;/span&gt;5s&lt;span class="o"&gt;}{}{&lt;/span&gt;false&lt;span class="o"&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But greylisting comes with one drawback that bugs me. It requires senders of legitimate mail to retry after some amount of time. This wouldn't be a problem with sane smtp servers but with potentially misconfigured servers, we can't be sure of it.  &lt;/p&gt;
&lt;p&gt;Therefore I whitelist a broad range of well known smtp servers for which I assume that they will always send legitimate mail. But maintaining a whitelist is tedious and takes a lot of effort (for postfix &lt;a href="http://oc-co.org/p2pwl/"&gt;p2pwl&lt;/a&gt; exists as a solution). That's why I decided to also whitelist hosts for which a &lt;a href="https://web.archive.org/web/20190225203208/http://www.openspf.org/"&gt;SPF&lt;/a&gt; check passes. Even though its not yet widely used it reduces the chance to greylist especially big/high traffic smtp servers (I assume that those hosts return a valid SPF record).  &lt;/p&gt;
&lt;p&gt;Unfortunately &lt;a href="http://exim.org/"&gt;exim4&lt;/a&gt; doesn't come with spf enabled in &lt;a href="http://www.debian.org/News/2007/20070408"&gt;debian etch&lt;/a&gt; for &lt;a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=377034"&gt;various reasons,&lt;/a&gt; why it is necessary to do the spf check manually with &lt;a href="http://packages.qa.debian.org/libmail-spf-query-perl"&gt;libmail-spf-query-perl&lt;/a&gt; which is available via apt. The upstream example which is included doesn't serve this use case though. So I had to create my own:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;acl_check_spf:

accept  
&lt;span class="nv"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; X-mkce.de-SPF: SPF check succeeded  
&lt;span class="nv"&gt;log_message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;SPF&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="nv"&gt;$sender_host_address&lt;/span&gt; is allowed to send mail from &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; def:&lt;/span&gt;&lt;span class="nv"&gt;sender_address_domain&lt;/span&gt;&lt;span class="p"&gt; {&lt;/span&gt;&lt;span class="nv"&gt;$sender_address_domain&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;$sender_helo_name&lt;/span&gt;&lt;span class="o"&gt;}}&lt;/span&gt;.   
&lt;span class="nv"&gt;condition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;run&lt;/span&gt;&lt;span class="p"&gt;{/usr/bin/spfquery --ip &lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$sender_host_address&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="p"&gt; --mail-from &lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$sender_address&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="p"&gt; --helo &lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$sender_helo_name&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; eq {&lt;/span&gt;&lt;span class="nv"&gt;$runrc&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;}{&lt;/span&gt;yes&lt;span class="o"&gt;}{&lt;/span&gt;no&lt;span class="o"&gt;}}}}&lt;/span&gt;

warn  
&lt;span class="nv"&gt;log_message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;SPF&lt;span class="o"&gt;]&lt;/span&gt; Temporary DNS error &lt;span class="k"&gt;while&lt;/span&gt; checking SPF record.  
&lt;span class="nv"&gt;condition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; eq {&lt;/span&gt;&lt;span class="nv"&gt;$runrc&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="o"&gt;}{&lt;/span&gt;yes&lt;span class="o"&gt;}{&lt;/span&gt;no&lt;span class="o"&gt;}}&lt;/span&gt;

warn  
&lt;span class="nv"&gt;log_message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;SPF&lt;span class="o"&gt;]&lt;/span&gt; SPF check negative with &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; eq {&lt;/span&gt;&lt;span class="nv"&gt;$runrc&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;}{&lt;/span&gt;fail&lt;span class="o"&gt;}{&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; eq {&lt;/span&gt;&lt;span class="nv"&gt;$runrc&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;}{&lt;/span&gt;softfail&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="se"&gt;\ &lt;/span&gt; 
&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; eq {&lt;/span&gt;&lt;span class="nv"&gt;$runrc&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;}{&lt;/span&gt;neutral&lt;span class="o"&gt;}{&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; eq {&lt;/span&gt;&lt;span class="nv"&gt;$runrc&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="o"&gt;}{&lt;/span&gt;unknown&lt;span class="o"&gt;}{&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; eq {&lt;/span&gt;&lt;span class="nv"&gt;$runrc&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt;&lt;span class="o"&gt;}{&lt;/span&gt;none&lt;span class="o"&gt;}{&lt;/span&gt;error&lt;span class="o"&gt;}}}}}}}}}}&lt;/span&gt;  
&lt;span class="nv"&gt;condition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; &amp;lt;={&lt;/span&gt;&lt;span class="nv"&gt;$runrc&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt;&lt;span class="o"&gt;}{&lt;/span&gt;yes&lt;span class="o"&gt;}{&lt;/span&gt;no&lt;span class="o"&gt;}}&lt;/span&gt;

warn  
&lt;span class="nv"&gt;log_message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;SPF&lt;span class="o"&gt;]&lt;/span&gt; Unexpected error in SPF check.  
&lt;span class="nv"&gt;condition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;if&lt;/span&gt;&lt;span class="p"&gt; &amp;gt;{&lt;/span&gt;&lt;span class="nv"&gt;$runrc&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt;&lt;span class="o"&gt;}{&lt;/span&gt;yes&lt;span class="o"&gt;}{&lt;/span&gt;no&lt;span class="o"&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I'll monitor my logfiles closely the next days, but even after a couple of hours the result looks promising.  &lt;/p&gt;
&lt;p&gt;May this piece of information help somebody else. :-)&lt;/p&gt;</content></entry><entry><title>'Google SOC: An auto-configuration plugin for Eclipse'</title><link href="http://www.lemmster.de/google-soc-an-auto-configuration-plugin-for-eclipse.html" rel="alternate"></link><published>2007-04-24T03:23:16+02:00</published><updated>2007-04-24T03:23:16+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2007-04-24:/google-soc-an-auto-configuration-plugin-for-eclipse.html</id><summary type="html">&lt;p&gt;Although I've blogged about Eclipse several times before, I haven't considered those posts important enough to be syndicated on the &lt;a href="http://planet.eclipse.org/"&gt;planet&lt;/a&gt;. Well, with my new role as &lt;a href="http://wiki.eclipse.org/index.php/Google_Summer_of_Code"&gt;Google SOC mentor&lt;/a&gt; this is changed. Starting with this post, I'll occasionally blog about &lt;a href="http://wiki.eclipse.org/index.php/An_auto-configuration_plugin_for_Eclipse"&gt;"An auto-configuration plugin for Eclipse"&lt;/a&gt; to put some light …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Although I've blogged about Eclipse several times before, I haven't considered those posts important enough to be syndicated on the &lt;a href="http://planet.eclipse.org/"&gt;planet&lt;/a&gt;. Well, with my new role as &lt;a href="http://wiki.eclipse.org/index.php/Google_Summer_of_Code"&gt;Google SOC mentor&lt;/a&gt; this is changed. Starting with this post, I'll occasionally blog about &lt;a href="http://wiki.eclipse.org/index.php/An_auto-configuration_plugin_for_Eclipse"&gt;"An auto-configuration plugin for Eclipse"&lt;/a&gt; to put some light onto it and report on the progress.&lt;/p&gt;
&lt;p&gt;To give you an idea of what this project is all about, let me repeat the applications abstract first:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;"Many Eclipse plugins require the user to specify the location of certain programs or services running locally in order for them to work. Having humans do this is unnecessary since services are commonly installed in only a few fixed locations. Thus I propose writing an Eclipse plugin that uses a number of heuristics to locate local services that other Eclipse plugins need. I also propose including a number of utilities that enable developers to easily write, extend, and distribute these service 'scanners.'"&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If you got a wish of what should be discovered, feel free to add &lt;a href="http://wiki.eclipse.org/index.php/An_auto-configuration_plugin_for_Eclipse#Use_cases"&gt;use cases&lt;/a&gt; to the &lt;a href="http://wiki.eclipse.org/index.php/An_auto-configuration_plugin_for_Eclipse#Use_cases"&gt;wiki &lt;/a&gt;page (we will compile the deliverable out of these use cases later). This is your change to influence the direction before the project has even started. ;-)&lt;/p&gt;</content></entry><entry><title>99 apps for eclipse at google soc</title><link href="http://www.lemmster.de/99-apps-for-eclipse-at-google-soc.html" rel="alternate"></link><published>2007-04-01T13:29:27+02:00</published><updated>2007-04-01T13:29:27+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2007-04-01:/99-apps-for-eclipse-at-google-soc.html</id><summary type="html">&lt;p&gt;eclipse received 99 student applications for this years &lt;a href="http://code.google.com/soc/"&gt;summer of code (soc)&lt;/a&gt; which is an impressive number that perfectly reflects the size/importance of the eclipse project in the open source community.
on the other hand this makes handling and reviewing them a vast amount of work. &lt;a href="http://wbeaton.blogspot.com/2007/03/we-need-help-for-summer-of-code.html"&gt;following the call …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;eclipse received 99 student applications for this years &lt;a href="http://code.google.com/soc/"&gt;summer of code (soc)&lt;/a&gt; which is an impressive number that perfectly reflects the size/importance of the eclipse project in the open source community.
on the other hand this makes handling and reviewing them a vast amount of work. &lt;a href="http://wbeaton.blogspot.com/2007/03/we-need-help-for-summer-of-code.html"&gt;following the call for help&lt;/a&gt; i therefore joined the ranks of mentors to help in the process of reviewing the applications. i'm not yet sure if i'll step up to mentor one of the accepted projects afterwards. this depends on whether i find an app for which i feel qualified in a technial sense and if my work load at my day job is bearable.&lt;/p&gt;
&lt;p&gt;the results of the selection process will be published after the deadline 11th of april. in the meantime  check out the &lt;a href="http://wiki.eclipse.org/index.php/Google_Summer_of_Code_2007_Ideas"&gt;list of project ideas&lt;/a&gt;.&lt;/p&gt;</content></entry><entry><title>see you at eclipsecon 2008</title><link href="http://www.lemmster.de/see-you-at-eclipsecon-2008.html" rel="alternate"></link><published>2007-03-09T07:23:29+01:00</published><updated>2007-03-09T07:23:29+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2007-03-09:/see-you-at-eclipsecon-2008.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.eclipsecon.org/2007"&gt;eclipsecon 2007&lt;/a&gt; is already over and i'd like to do a short résumé of this event. this summary is more personal than these &lt;a href="http://www.eclipsezone.com/eclipse/forums/t91244.html"&gt;numbers&lt;/a&gt; though. after countless talks, bofs, receptions and conversations with many different and interesting people i'm totally exhausted and nearly incapable of absorbing more information. fortunately the …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://www.eclipsecon.org/2007"&gt;eclipsecon 2007&lt;/a&gt; is already over and i'd like to do a short résumé of this event. this summary is more personal than these &lt;a href="http://www.eclipsezone.com/eclipse/forums/t91244.html"&gt;numbers&lt;/a&gt; though. after countless talks, bofs, receptions and conversations with many different and interesting people i'm totally exhausted and nearly incapable of absorbing more information. fortunately the last event of the day was rather social than a technical. the eclipse foundation represented by ralph mueller invited to one more reception for the european eclipse community. apparently europe expends across the atlantic, since some folks from north america showed up as well. but hey, we're tolerant people.
on the technical side it is impossible to summarize everything, but i'll try to sum things up i just a few sentences: &lt;a href="http://www.osgi.org"&gt;osgi&lt;/a&gt; is the next big thing in java world which is gaining a lot of momentum nowadays. nearly all the major companies started to build their products on top of osgi (except for the obvious ones, sun and microsoft) ;).
aside from that, everybody is excited about &lt;a href="http://www.jazz.net"&gt;jazz &lt;/a&gt;ibms new and, according to the masses, cool development tool, which is supposed to cover all aspects of a development process. the role model for the jazz process seems to be the taken from the eclipse process. no surprise since the minds behind jazz work with eclipse too.&lt;/p&gt;
&lt;p&gt;i'm looking forward to meeting all of you again at &lt;a href="http://www.eclipsecon.org/2008/"&gt;eclipsecon 2008&lt;/a&gt; and thanks to the people who made this event happen. :)&lt;/p&gt;</content></entry><entry><title>Interesting tracks for a database vendor 2.0</title><link href="http://www.lemmster.de/interesting-tracks-for-a-database-vendor-20.html" rel="alternate"></link><published>2007-02-18T21:52:32+01:00</published><updated>2007-02-18T21:52:32+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2007-02-18:/interesting-tracks-for-a-database-vendor-20.html</id><summary type="html">&lt;p&gt;i've update my &lt;a href="http://www.eclipsecon.org/2007/index.php?page=sub/&amp;amp;id=4097"&gt;recommended&lt;/a&gt;&lt;a href="http://www.eclipsecon.org/2007/index.php?page=sub/&amp;amp;id=4097"&gt; tracklist&lt;/a&gt; to reflect the latest program and schedule changes. the schedule is really packed with all kinds of interesting talks. it's a pity i cannot make use of my shizophrenia on a physical level.&lt;/p&gt;</summary><content type="html">&lt;p&gt;i've update my &lt;a href="http://www.eclipsecon.org/2007/index.php?page=sub/&amp;amp;id=4097"&gt;recommended&lt;/a&gt;&lt;a href="http://www.eclipsecon.org/2007/index.php?page=sub/&amp;amp;id=4097"&gt; tracklist&lt;/a&gt; to reflect the latest program and schedule changes. the schedule is really packed with all kinds of interesting talks. it's a pity i cannot make use of my shizophrenia on a physical level.&lt;/p&gt;</content></entry><entry><title>attention EclipseCon 2007, i'm coming :)</title><link href="http://www.lemmster.de/attention-eclipsecon-2007-im-coming.html" rel="alternate"></link><published>2007-02-08T00:03:10+01:00</published><updated>2007-02-08T00:03:10+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2007-02-08:/attention-eclipsecon-2007-im-coming.html</id><summary type="html">&lt;p&gt;even though i didn't win the &lt;a href="http://eclipse-projects.blogspot.com/2007/02/winning-recommended-tracks.html"&gt;foundations random drawing&lt;/a&gt; for free eclipsecon tickets, i'll be at the conference anyway. versant realized it's worth sending me to the heart of silicon valley to the town of &lt;a href="http://www.ci.santa-clara.ca.us/"&gt;santa clara&lt;/a&gt;.
the only thing left to do is to register for the conference, decide …&lt;/p&gt;</summary><content type="html">&lt;p&gt;even though i didn't win the &lt;a href="http://eclipse-projects.blogspot.com/2007/02/winning-recommended-tracks.html"&gt;foundations random drawing&lt;/a&gt; for free eclipsecon tickets, i'll be at the conference anyway. versant realized it's worth sending me to the heart of silicon valley to the town of &lt;a href="http://www.ci.santa-clara.ca.us/"&gt;santa clara&lt;/a&gt;.
the only thing left to do is to register for the conference, decide if a cheaper but more remote hotel which makes a  rental car necessary is more cost effective than the &lt;a href="http://santaclara.hyatt.com/groupbooking/claraecli2007"&gt;conference hotel&lt;/a&gt; and if it is possible to get a direct flight from san jose intl. to pune afterwards. btw. maybe i will stop by at versants fremont office when i'm in santa clara since it's only a 10 minutes drive.&lt;/p&gt;
&lt;p&gt;exciting things to come :)&lt;/p&gt;</content></entry><entry><title>EclipseCon is coming up</title><link href="http://www.lemmster.de/eclipsecon-is-coming-up.html" rel="alternate"></link><published>2007-02-01T08:13:32+01:00</published><updated>2007-02-01T08:13:32+01:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2007-02-01:/eclipsecon-is-coming-up.html</id><summary type="html">&lt;p&gt;in march EclipseCon 2007 is going to happen and i'd like to use my blog for shameless advertisement of this great event.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.eclipsecon.org/2007/&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.eclipsecon.org/2007/image125x72.gif&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;border=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/img&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;btw. i was asked to promote my &lt;a href="http://www.eclipsecon.org/2007/index.php?page=sub/&amp;amp;id=4097"&gt;recommended …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;in march EclipseCon 2007 is going to happen and i'd like to use my blog for shameless advertisement of this great event.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.eclipsecon.org/2007/&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.eclipsecon.org/2007/image125x72.gif&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;border=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/img&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;btw. i was asked to promote my &lt;a href="http://www.eclipsecon.org/2007/index.php?page=sub/&amp;amp;id=4097"&gt;recommended track&lt;/a&gt; list which is according to &lt;a href="http://wbeaton.blogspot.com/2007/01/eclipsecon-recommended-tracks.html"&gt;wayne &lt;/a&gt;more diverse than the title "interesting tracks for a database vendor" suggests. while at it, check out the other track lists as well. the conference program covers a variety of topics so everybody will be able to find something interesting.&lt;/p&gt;</content></entry><entry><title>eclipse committer status granted</title><link href="http://www.lemmster.de/eclipse-committer-status-granted.html" rel="alternate"></link><published>2006-04-14T14:24:26+02:00</published><updated>2006-04-14T14:24:26+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2006-04-14:/eclipse-committer-status-granted.html</id><summary type="html">&lt;p&gt;a few minutes ago i finally received my login credentials for dev.eclipse.org and the bugzilla system. :)
after my &lt;a href="http://dev.eclipse.org/mhonarc/lists/dali-dev/msg00099.html"&gt;nomination&lt;/a&gt; in february and a successful vote thereafter, the whole process was delayed until after the eclipsecon due to workload issues in the eclipse legal department.
later some discussion arose …&lt;/p&gt;</summary><content type="html">&lt;p&gt;a few minutes ago i finally received my login credentials for dev.eclipse.org and the bugzilla system. :)
after my &lt;a href="http://dev.eclipse.org/mhonarc/lists/dali-dev/msg00099.html"&gt;nomination&lt;/a&gt; in february and a successful vote thereafter, the whole process was delayed until after the eclipsecon due to workload issues in the eclipse legal department.
later some discussion arose between me, neil (the dali project lead) and bjorn (technology pmc) if my &lt;a href="http://eclipse-projects.blogspot.com/2006/03/consolidating-committers.html"&gt;public track/record&lt;/a&gt; justifies committer rights at this early stage of my involvement with the &lt;a href="http://www.eclipse.org/dali/"&gt;dali&lt;/a&gt; project.
i was able to convince him that i'm already ready for this though...
so here i am, the newest member in the eclipse &lt;a href="http://wiki.eclipse.org/index.php/Committers"&gt;committer&lt;/a&gt; community. :-)&lt;/p&gt;</content></entry><entry><title>ip_conntrack_tcp_be_liberal</title><link href="http://www.lemmster.de/ip_conntrack_tcp_be_liberal.html" rel="alternate"></link><published>2005-09-23T12:02:04+02:00</published><updated>2005-09-23T12:02:04+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2005-09-23:/ip_conntrack_tcp_be_liberal.html</id><summary type="html">&lt;p&gt;von beginn an bestand ein problem mit haengenden verbindungen in den xen domainen. ssh oder ftp verbindungen brachen gelegentlich ab, ohne einen hinweis in den logfiles zu hinterlassen. nachdem ich am heutigen vormittag das problem dann genauer untersucht habe und probleme mit der glibc ausschliessen konnte, richtete ich mein augenmerk …&lt;/p&gt;</summary><content type="html">&lt;p&gt;von beginn an bestand ein problem mit haengenden verbindungen in den xen domainen. ssh oder ftp verbindungen brachen gelegentlich ab, ohne einen hinweis in den logfiles zu hinterlassen. nachdem ich am heutigen vormittag das problem dann genauer untersucht habe und probleme mit der glibc ausschliessen konnte, richtete ich mein augenmerk auf die firewall. und tatsaechlich verschwand das problem, wenn iptables nicht im spiel war.
also befragte ich wieder google und fand einen hinweis auf ip_conntrack_tcp_be_liberal. ab dem 2.6.9 kernel scheint neuer code fuer das tcp window handling hinzu gekommen zu sein, der sich leider nicht mit iptables vertraegt. wenn diese funktion im kernel abgeschaltet ist, arbeitet das system wieder fehlerfrei. :)&lt;/p&gt;</content></entry><entry><title>uebersichtlichkeit von todo tags in eclipse</title><link href="http://www.lemmster.de/uebersichtlichkeit-von-todo-tags-in-eclipse.html" rel="alternate"></link><published>2005-09-11T19:19:47+02:00</published><updated>2005-09-11T19:19:47+02:00</updated><author><name>Markus A. Kuppe</name></author><id>tag:www.lemmster.de,2005-09-11:/uebersichtlichkeit-von-todo-tags-in-eclipse.html</id><summary type="html">&lt;p&gt;die standard templates von eclipse generieren bei neu erzeugte methoden automatisch einen todo tag. leider aendert man aus zeitmangel seltents den default hinweis und so schwillt die todo liste schnell auf x identische eintraege an. ausserdem veraendern todo tags nicht das laufzeitverhalten des codes und so bemerkt man ggf. nicht …&lt;/p&gt;</summary><content type="html">&lt;p&gt;die standard templates von eclipse generieren bei neu erzeugte methoden automatisch einen todo tag. leider aendert man aus zeitmangel seltents den default hinweis und so schwillt die todo liste schnell auf x identische eintraege an. ausserdem veraendern todo tags nicht das laufzeitverhalten des codes und so bemerkt man ggf. nicht, dass eine methode noch gar nicht implementiert ist.
daher scheint es mir sinnvoller, anstatt einen todo tag ein "throws new NotImplementedException()" im code template vorzusehen. NotImplementedException erbt dann von RuntimeException. nun wirkt sich die unvollstaendigkeit des codes auch aufs laufzeitverhalten aus und man bemerkt, dass noch arbeit aussteht. &lt;/p&gt;</content></entry></feed>